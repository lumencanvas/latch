var cs=Object.defineProperty;var ds=(e,t,n)=>t in e?cs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Gt=(e,t,n)=>ds(e,typeof t!="symbol"?t+"":t,n);import{c as Re,d as ve,g as Sl,i as Yt,e as $l,w as xe,r as fe,u as zi,a as ee,o as G,b as E,f as ye,h as _e,m as go,j as B,F as Pe,k as Y,l as Te,n as de,p as Se,q as Nl,s as Mt,t as pe,v as Xe,x as rn,y as ps,z as oo,A as Ve,B as Ee,C as fs,D as hs,E as ft,G as ot,H as El,I as gs,J as Et,K as Ne,L as Ri,M as ms,N as ys,O as Ot,P as kl,Q as ke,R as be,S as Oe,T as vs,U as dt,V as ci,W as bs,X as ws,Y as Xt,Z as We,_ as Ge,$ as Ke,a0 as xs,a1 as bt,a2 as io,a3 as lt,a4 as Zo,a5 as he,a6 as _n,a7 as Sn,a8 as vn,a9 as _s,aa as Ss,ab as mo,ac as $s,ad as Ns,ae as qo,af as Es,ag as ks,ah as Cs,ai as Ms,aj as Ts,ak as Is,al as Ds}from"./index-9MypOnlf.js";import{M as Ps,A as Cl,V as As}from"./video-DpDxGjv1.js";/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=Re("BarChart3Icon",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=Re("BoxIcon",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=Re("BugIcon",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=Re("CalculatorIcon",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=Re("ClockIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=Re("DatabaseIcon",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=Re("GitBranchIcon",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=Re("LayersIcon",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=Re("LineChartIcon",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=Re("Loader2Icon",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=Re("Maximize2Icon",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=Re("Minimize2Icon",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=Re("MinusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=Re("MusicIcon",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=Re("PaletteIcon",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=Re("PuzzleIcon",[["path",{d:"M19.439 7.85c-.049.322.059.648.289.878l1.568 1.568c.47.47.706 1.087.706 1.704s-.235 1.233-.706 1.704l-1.611 1.611a.98.98 0 0 1-.837.276c-.47-.07-.802-.48-.968-.925a2.501 2.501 0 1 0-3.214 3.214c.446.166.855.497.925.968a.979.979 0 0 1-.276.837l-1.61 1.61a2.404 2.404 0 0 1-1.705.707 2.402 2.402 0 0 1-1.704-.706l-1.568-1.568a1.026 1.026 0 0 0-.877-.29c-.493.074-.84.504-1.02.968a2.5 2.5 0 1 1-3.237-3.237c.464-.18.894-.527.967-1.02a1.026 1.026 0 0 0-.289-.877l-1.568-1.568A2.402 2.402 0 0 1 1.998 12c0-.617.236-1.234.706-1.704L4.23 8.77c.24-.24.581-.353.917-.303.515.077.877.528 1.073 1.01a2.5 2.5 0 1 0 3.259-3.259c-.482-.196-.933-.558-1.01-1.073-.05-.336.062-.676.303-.917l1.525-1.525A2.402 2.402 0 0 1 12 1.998c.617 0 1.234.236 1.704.706l1.568 1.568c.23.23.556.338.877.29.493-.074.84-.504 1.02-.968a2.5 2.5 0 1 1 3.237 3.237c-.464.18-.894.527-.967 1.02Z",key:"i0oyt7"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=Re("Tv2Icon",[["path",{d:"M7 21h10",key:"1b0cd5"}],["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=Re("TypeIcon",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);function $n(e){return Sl()?(oo(e),!0):!1}function pt(e){return typeof e=="function"?e():B(e)}const Js=typeof window<"u"&&typeof document<"u",Qs=e=>typeof e<"u",eu=Object.prototype.toString,tu=e=>eu.call(e)==="[object Object]",nu=()=>{};function ou(e,t){function n(...o){return new Promise((i,r)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(i).catch(r)})}return n}const Ml=e=>e();function iu(e=Ml){const t=fe(!0);function n(){t.value=!1}function o(){t.value=!0}const i=(...r)=>{t.value&&e(...r)};return{isActive:vs(t),pause:n,resume:o,eventFilter:i}}function rr(e,t=!1,n="Timeout"){return new Promise((o,i)=>{setTimeout(t?()=>i(n):o,e)})}function ru(e,t,n={}){const{eventFilter:o=Ml,...i}=n;return xe(e,ou(o,t),i)}function Ut(e,t,n={}){const{eventFilter:o,...i}=n,{eventFilter:r,pause:l,resume:a,isActive:s}=iu(o);return{stop:ru(e,t,{...i,eventFilter:r}),pause:l,resume:a,isActive:s}}function lu(e,t={}){if(!Ri(e))return ms(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=ys(()=>({get(){return e.value[o]},set(i){var r;if((r=pt(t.replaceRef))!=null?r:!0)if(Array.isArray(e.value)){const a=[...e.value];a[o]=i,e.value=a}else{const a={...e.value,[o]:i};Object.setPrototypeOf(a,Object.getPrototypeOf(e.value)),e.value=a}else e.value[o]=i}}));return n}function di(e,t=!1){function n(d,{flush:f="sync",deep:p=!1,timeout:$,throwOnTimeout:_}={}){let C=null;const m=[new Promise(g=>{C=xe(e,w=>{d(w)!==t&&(C==null||C(),g(w))},{flush:f,deep:p,immediate:!0})})];return $!=null&&m.push(rr($,_).then(()=>pt(e)).finally(()=>C==null?void 0:C())),Promise.race(m)}function o(d,f){if(!Ri(d))return n(w=>w===d,f);const{flush:p="sync",deep:$=!1,timeout:_,throwOnTimeout:C}=f??{};let v=null;const g=[new Promise(w=>{v=xe([e,d],([z,I])=>{t!==(z===I)&&(v==null||v(),w(z))},{flush:p,deep:$,immediate:!0})})];return _!=null&&g.push(rr(_,C).then(()=>pt(e)).finally(()=>(v==null||v(),pt(e)))),Promise.race(g)}function i(d){return n(f=>!!f,d)}function r(d){return o(null,d)}function l(d){return o(void 0,d)}function a(d){return n(Number.isNaN,d)}function s(d,f){return n(p=>{const $=Array.from(p);return $.includes(d)||$.includes(pt(d))},f)}function u(d){return c(1,d)}function c(d=1,f){let p=-1;return n(()=>(p+=1,p>=d),f)}return Array.isArray(pt(e))?{toMatch:n,toContains:s,changed:u,changedTimes:c,get not(){return di(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:i,toBeNull:r,toBeNaN:a,toBeUndefined:l,changed:u,changedTimes:c,get not(){return di(e,!t)}}}function pi(e){return di(e)}function au(e){var t;const n=pt(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Tl=Js?window:void 0;function Il(...e){let t,n,o,i;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,i]=e,t=Tl):[t,n,o,i]=e,!t)return nu;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const r=[],l=()=>{r.forEach(c=>c()),r.length=0},a=(c,d,f,p)=>(c.addEventListener(d,f,p),()=>c.removeEventListener(d,f,p)),s=xe(()=>[au(t),pt(i)],([c,d])=>{if(l(),!c)return;const f=tu(d)?{...d}:d;r.push(...n.flatMap(p=>o.map($=>a(c,p,$,f))))},{immediate:!0,flush:"post"}),u=()=>{s(),l()};return $n(u),u}function su(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function lr(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:i=Tl,eventName:r="keydown",passive:l=!1,dedupe:a=!1}=o,s=su(t);return Il(i,r,c=>{c.repeat&&pt(a)||s(c)&&n(c)},l)}function uu(e){return JSON.parse(JSON.stringify(e))}function Wo(e,t,n,o={}){var i,r,l;const{clone:a=!1,passive:s=!1,eventName:u,deep:c=!1,defaultValue:d,shouldEmit:f}=o,p=rn(),$=n||(p==null?void 0:p.emit)||((i=p==null?void 0:p.$emit)==null?void 0:i.bind(p))||((l=(r=p==null?void 0:p.proxy)==null?void 0:r.$emit)==null?void 0:l.bind(p==null?void 0:p.proxy));let _=u;t||(t="modelValue"),_=_||`update:${t.toString()}`;const C=g=>a?typeof a=="function"?a(g):uu(g):g,v=()=>Qs(e[t])?C(e[t]):d,m=g=>{f?f(g)&&$(_,g):$(_,g)};if(s){const g=v(),w=fe(g);let z=!1;return xe(()=>e[t],I=>{z||(z=!0,w.value=C(I),ot(()=>z=!1))}),xe(w,I=>{!z&&(I!==e[t]||c)&&m(I)},{deep:c}),w}else return Y({get(){return v()},set(g){m(g)}})}var cu={value:()=>{}};function Ao(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new ro(n)}function ro(e){this._=e}function du(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}ro.prototype=Ao.prototype={constructor:ro,on:function(e,t){var n=this._,o=du(e+"",n),i,r=-1,l=o.length;if(arguments.length<2){for(;++r<l;)if((i=(e=o[r]).type)&&(i=pu(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++r<l;)if(i=(e=o[r]).type)n[i]=ar(n[i],e.name,t);else if(t==null)for(i in n)n[i]=ar(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ro(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,r;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)}};function pu(e,t){for(var n=0,o=e.length,i;n<o;++n)if((i=e[n]).name===t)return i.value}function ar(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=cu,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var fi="http://www.w3.org/1999/xhtml";const sr={svg:"http://www.w3.org/2000/svg",xhtml:fi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function zo(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),sr.hasOwnProperty(t)?{space:sr[t],local:e}:e}function fu(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===fi&&t.documentElement.namespaceURI===fi?t.createElement(e):t.createElementNS(n,e)}}function hu(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Dl(e){var t=zo(e);return(t.local?hu:fu)(t)}function gu(){}function Bi(e){return e==null?gu:function(){return this.querySelector(e)}}function mu(e){typeof e!="function"&&(e=Bi(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],l=r.length,a=o[i]=new Array(l),s,u,c=0;c<l;++c)(s=r[c])&&(u=e.call(s,s.__data__,c,r))&&("__data__"in s&&(u.__data__=s.__data__),a[c]=u);return new He(o,this._parents)}function yu(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function vu(){return[]}function Pl(e){return e==null?vu:function(){return this.querySelectorAll(e)}}function bu(e){return function(){return yu(e.apply(this,arguments))}}function wu(e){typeof e=="function"?e=bu(e):e=Pl(e);for(var t=this._groups,n=t.length,o=[],i=[],r=0;r<n;++r)for(var l=t[r],a=l.length,s,u=0;u<a;++u)(s=l[u])&&(o.push(e.call(s,s.__data__,u,l)),i.push(s));return new He(o,i)}function Al(e){return function(){return this.matches(e)}}function zl(e){return function(t){return t.matches(e)}}var xu=Array.prototype.find;function _u(e){return function(){return xu.call(this.children,e)}}function Su(){return this.firstElementChild}function $u(e){return this.select(e==null?Su:_u(typeof e=="function"?e:zl(e)))}var Nu=Array.prototype.filter;function Eu(){return Array.from(this.children)}function ku(e){return function(){return Nu.call(this.children,e)}}function Cu(e){return this.selectAll(e==null?Eu:ku(typeof e=="function"?e:zl(e)))}function Mu(e){typeof e!="function"&&(e=Al(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],l=r.length,a=o[i]=[],s,u=0;u<l;++u)(s=r[u])&&e.call(s,s.__data__,u,r)&&a.push(s);return new He(o,this._parents)}function Rl(e){return new Array(e.length)}function Tu(){return new He(this._enter||this._groups.map(Rl),this._parents)}function yo(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}yo.prototype={constructor:yo,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Iu(e){return function(){return e}}function Du(e,t,n,o,i,r){for(var l=0,a,s=t.length,u=r.length;l<u;++l)(a=t[l])?(a.__data__=r[l],o[l]=a):n[l]=new yo(e,r[l]);for(;l<s;++l)(a=t[l])&&(i[l]=a)}function Pu(e,t,n,o,i,r,l){var a,s,u=new Map,c=t.length,d=r.length,f=new Array(c),p;for(a=0;a<c;++a)(s=t[a])&&(f[a]=p=l.call(s,s.__data__,a,t)+"",u.has(p)?i[a]=s:u.set(p,s));for(a=0;a<d;++a)p=l.call(e,r[a],a,r)+"",(s=u.get(p))?(o[a]=s,s.__data__=r[a],u.delete(p)):n[a]=new yo(e,r[a]);for(a=0;a<c;++a)(s=t[a])&&u.get(f[a])===s&&(i[a]=s)}function Au(e){return e.__data__}function zu(e,t){if(!arguments.length)return Array.from(this,Au);var n=t?Pu:Du,o=this._parents,i=this._groups;typeof e!="function"&&(e=Iu(e));for(var r=i.length,l=new Array(r),a=new Array(r),s=new Array(r),u=0;u<r;++u){var c=o[u],d=i[u],f=d.length,p=Ru(e.call(c,c&&c.__data__,u,o)),$=p.length,_=a[u]=new Array($),C=l[u]=new Array($),v=s[u]=new Array(f);n(c,d,_,C,v,p,t);for(var m=0,g=0,w,z;m<$;++m)if(w=_[m]){for(m>=g&&(g=m+1);!(z=C[g])&&++g<$;);w._next=z||null}}return l=new He(l,o),l._enter=a,l._exit=s,l}function Ru(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Bu(){return new He(this._exit||this._groups.map(Rl),this._parents)}function Ou(e,t,n){var o=this.enter(),i=this,r=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?r.remove():n(r),o&&i?o.merge(i).order():i}function Vu(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,r=o.length,l=Math.min(i,r),a=new Array(i),s=0;s<l;++s)for(var u=n[s],c=o[s],d=u.length,f=a[s]=new Array(d),p,$=0;$<d;++$)(p=u[$]||c[$])&&(f[$]=p);for(;s<i;++s)a[s]=n[s];return new He(a,this._parents)}function Lu(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],i=o.length-1,r=o[i],l;--i>=0;)(l=o[i])&&(r&&l.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(l,r),r=l);return this}function Fu(e){e||(e=Hu);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,o=n.length,i=new Array(o),r=0;r<o;++r){for(var l=n[r],a=l.length,s=i[r]=new Array(a),u,c=0;c<a;++c)(u=l[c])&&(s[c]=u);s.sort(t)}return new He(i,this._parents).order()}function Hu(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Yu(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Xu(){return Array.from(this)}function Gu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length;i<r;++i){var l=o[i];if(l)return l}return null}function Uu(){let e=0;for(const t of this)++e;return e}function Zu(){return!this.node()}function qu(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i=t[n],r=0,l=i.length,a;r<l;++r)(a=i[r])&&e.call(a,a.__data__,r,i);return this}function Wu(e){return function(){this.removeAttribute(e)}}function Ku(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ju(e,t){return function(){this.setAttribute(e,t)}}function Ju(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Qu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function ec(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function tc(e,t){var n=zo(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?Ku:Wu:typeof t=="function"?n.local?ec:Qu:n.local?Ju:ju)(n,t))}function Bl(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function nc(e){return function(){this.style.removeProperty(e)}}function oc(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ic(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function rc(e,t,n){return arguments.length>1?this.each((t==null?nc:typeof t=="function"?ic:oc)(e,t,n??"")):Jt(this.node(),e)}function Jt(e,t){return e.style.getPropertyValue(t)||Bl(e).getComputedStyle(e,null).getPropertyValue(t)}function lc(e){return function(){delete this[e]}}function ac(e,t){return function(){this[e]=t}}function sc(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function uc(e,t){return arguments.length>1?this.each((t==null?lc:typeof t=="function"?sc:ac)(e,t)):this.node()[e]}function Ol(e){return e.trim().split(/^|\s+/)}function Oi(e){return e.classList||new Vl(e)}function Vl(e){this._node=e,this._names=Ol(e.getAttribute("class")||"")}Vl.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ll(e,t){for(var n=Oi(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function Fl(e,t){for(var n=Oi(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function cc(e){return function(){Ll(this,e)}}function dc(e){return function(){Fl(this,e)}}function pc(e,t){return function(){(t.apply(this,arguments)?Ll:Fl)(this,e)}}function fc(e,t){var n=Ol(e+"");if(arguments.length<2){for(var o=Oi(this.node()),i=-1,r=n.length;++i<r;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?pc:t?cc:dc)(n,t))}function hc(){this.textContent=""}function gc(e){return function(){this.textContent=e}}function mc(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function yc(e){return arguments.length?this.each(e==null?hc:(typeof e=="function"?mc:gc)(e)):this.node().textContent}function vc(){this.innerHTML=""}function bc(e){return function(){this.innerHTML=e}}function wc(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function xc(e){return arguments.length?this.each(e==null?vc:(typeof e=="function"?wc:bc)(e)):this.node().innerHTML}function _c(){this.nextSibling&&this.parentNode.appendChild(this)}function Sc(){return this.each(_c)}function $c(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Nc(){return this.each($c)}function Ec(e){var t=typeof e=="function"?e:Dl(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function kc(){return null}function Cc(e,t){var n=typeof e=="function"?e:Dl(e),o=t==null?kc:typeof t=="function"?t:Bi(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Mc(){var e=this.parentNode;e&&e.removeChild(this)}function Tc(){return this.each(Mc)}function Ic(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Dc(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Pc(e){return this.select(e?Dc:Ic)}function Ac(e){return arguments.length?this.property("__data__",e):this.node().__data__}function zc(e){return function(t){e.call(this,t,this.__data__)}}function Rc(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Bc(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,i=t.length,r;n<i;++n)r=t[n],(!e.type||r.type===e.type)&&r.name===e.name?this.removeEventListener(r.type,r.listener,r.options):t[++o]=r;++o?t.length=o:delete this.__on}}}function Oc(e,t,n){return function(){var o=this.__on,i,r=zc(t);if(o){for(var l=0,a=o.length;l<a;++l)if((i=o[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=r,i.options=n),i.value=t;return}}this.addEventListener(e.type,r,n),i={type:e.type,name:e.name,value:t,listener:r,options:n},o?o.push(i):this.__on=[i]}}function Vc(e,t,n){var o=Rc(e+""),i,r=o.length,l;if(arguments.length<2){var a=this.node().__on;if(a){for(var s=0,u=a.length,c;s<u;++s)for(i=0,c=a[s];i<r;++i)if((l=o[i]).type===c.type&&l.name===c.name)return c.value}return}for(a=t?Oc:Bc,i=0;i<r;++i)this.each(a(o[i],t,n));return this}function Hl(e,t,n){var o=Bl(e),i=o.CustomEvent;typeof i=="function"?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Lc(e,t){return function(){return Hl(this,e,t)}}function Fc(e,t){return function(){return Hl(this,e,t.apply(this,arguments))}}function Hc(e,t){return this.each((typeof t=="function"?Fc:Lc)(e,t))}function*Yc(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length,l;i<r;++i)(l=o[i])&&(yield l)}var Yl=[null];function He(e,t){this._groups=e,this._parents=t}function Bn(){return new He([[document.documentElement]],Yl)}function Xc(){return this}He.prototype=Bn.prototype={constructor:He,select:mu,selectAll:wu,selectChild:$u,selectChildren:Cu,filter:Mu,data:zu,enter:Tu,exit:Bu,join:Ou,merge:Vu,selection:Xc,order:Lu,sort:Fu,call:Yu,nodes:Xu,node:Gu,size:Uu,empty:Zu,each:qu,attr:tc,style:rc,property:uc,classed:fc,text:yc,html:xc,raise:Sc,lower:Nc,append:Ec,insert:Cc,remove:Tc,clone:Pc,datum:Ac,on:Vc,dispatch:Hc,[Symbol.iterator]:Yc};function Ue(e){return typeof e=="string"?new He([[document.querySelector(e)]],[document.documentElement]):new He([[e]],Yl)}function Gc(e){let t;for(;t=e.sourceEvent;)e=t;return e}function et(e,t){if(e=Gc(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Uc={passive:!1},Nn={capture:!0,passive:!1};function Ko(e){e.stopImmediatePropagation()}function qt(e){e.preventDefault(),e.stopImmediatePropagation()}function Xl(e){var t=e.document.documentElement,n=Ue(e).on("dragstart.drag",qt,Nn);"onselectstart"in t?n.on("selectstart.drag",qt,Nn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Gl(e,t){var n=e.document.documentElement,o=Ue(e).on("dragstart.drag",null);t&&(o.on("click.drag",qt,Nn),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Yn=e=>()=>e;function hi(e,{sourceEvent:t,subject:n,target:o,identifier:i,active:r,x:l,y:a,dx:s,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:r,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:s,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}hi.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Zc(e){return!e.ctrlKey&&!e.button}function qc(){return this.parentNode}function Wc(e,t){return t??{x:e.x,y:e.y}}function Kc(){return navigator.maxTouchPoints||"ontouchstart"in this}function jc(){var e=Zc,t=qc,n=Wc,o=Kc,i={},r=Ao("start","drag","end"),l=0,a,s,u,c,d=0;function f(w){w.on("mousedown.drag",p).filter(o).on("touchstart.drag",C).on("touchmove.drag",v,Uc).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(w,z){if(!(c||!e.call(this,w,z))){var I=g(this,t.call(this,w,z),w,z,"mouse");I&&(Ue(w.view).on("mousemove.drag",$,Nn).on("mouseup.drag",_,Nn),Xl(w.view),Ko(w),u=!1,a=w.clientX,s=w.clientY,I("start",w))}}function $(w){if(qt(w),!u){var z=w.clientX-a,I=w.clientY-s;u=z*z+I*I>d}i.mouse("drag",w)}function _(w){Ue(w.view).on("mousemove.drag mouseup.drag",null),Gl(w.view,u),qt(w),i.mouse("end",w)}function C(w,z){if(e.call(this,w,z)){var I=w.changedTouches,q=t.call(this,w,z),j=I.length,te,W;for(te=0;te<j;++te)(W=g(this,q,w,z,I[te].identifier,I[te]))&&(Ko(w),W("start",w,I[te]))}}function v(w){var z=w.changedTouches,I=z.length,q,j;for(q=0;q<I;++q)(j=i[z[q].identifier])&&(qt(w),j("drag",w,z[q]))}function m(w){var z=w.changedTouches,I=z.length,q,j;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),q=0;q<I;++q)(j=i[z[q].identifier])&&(Ko(w),j("end",w,z[q]))}function g(w,z,I,q,j,te){var W=r.copy(),O=et(te||I,z),y,U,h;if((h=n.call(w,new hi("beforestart",{sourceEvent:I,target:f,identifier:j,active:l,x:O[0],y:O[1],dx:0,dy:0,dispatch:W}),q))!=null)return y=h.x-O[0]||0,U=h.y-O[1]||0,function T(b,R,S){var A=O,D;switch(b){case"start":i[j]=T,D=l++;break;case"end":delete i[j],--l;case"drag":O=et(S||R,z),D=l;break}W.call(b,w,new hi(b,{sourceEvent:R,subject:h,target:f,identifier:j,active:D,x:O[0]+y,y:O[1]+U,dx:O[0]-A[0],dy:O[1]-A[1],dispatch:W}),q)}}return f.filter=function(w){return arguments.length?(e=typeof w=="function"?w:Yn(!!w),f):e},f.container=function(w){return arguments.length?(t=typeof w=="function"?w:Yn(w),f):t},f.subject=function(w){return arguments.length?(n=typeof w=="function"?w:Yn(w),f):n},f.touchable=function(w){return arguments.length?(o=typeof w=="function"?w:Yn(!!w),f):o},f.on=function(){var w=r.on.apply(r,arguments);return w===r?f:w},f.clickDistance=function(w){return arguments.length?(d=(w=+w)*w,f):Math.sqrt(d)},f}function Vi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ul(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function On(){}var En=.7,vo=1/En,Wt="\\s*([+-]?\\d+)\\s*",kn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",it="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Jc=/^#([0-9a-f]{3,8})$/,Qc=new RegExp(`^rgb\\(${Wt},${Wt},${Wt}\\)$`),ed=new RegExp(`^rgb\\(${it},${it},${it}\\)$`),td=new RegExp(`^rgba\\(${Wt},${Wt},${Wt},${kn}\\)$`),nd=new RegExp(`^rgba\\(${it},${it},${it},${kn}\\)$`),od=new RegExp(`^hsl\\(${kn},${it},${it}\\)$`),id=new RegExp(`^hsla\\(${kn},${it},${it},${kn}\\)$`),ur={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Vi(On,Vt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:cr,formatHex:cr,formatHex8:rd,formatHsl:ld,formatRgb:dr,toString:dr});function cr(){return this.rgb().formatHex()}function rd(){return this.rgb().formatHex8()}function ld(){return Zl(this).formatHsl()}function dr(){return this.rgb().formatRgb()}function Vt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Jc.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?pr(t):n===3?new Le(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Xn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Xn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Qc.exec(e))?new Le(t[1],t[2],t[3],1):(t=ed.exec(e))?new Le(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=td.exec(e))?Xn(t[1],t[2],t[3],t[4]):(t=nd.exec(e))?Xn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=od.exec(e))?gr(t[1],t[2]/100,t[3]/100,1):(t=id.exec(e))?gr(t[1],t[2]/100,t[3]/100,t[4]):ur.hasOwnProperty(e)?pr(ur[e]):e==="transparent"?new Le(NaN,NaN,NaN,0):null}function pr(e){return new Le(e>>16&255,e>>8&255,e&255,1)}function Xn(e,t,n,o){return o<=0&&(e=t=n=NaN),new Le(e,t,n,o)}function ad(e){return e instanceof On||(e=Vt(e)),e?(e=e.rgb(),new Le(e.r,e.g,e.b,e.opacity)):new Le}function gi(e,t,n,o){return arguments.length===1?ad(e):new Le(e,t,n,o??1)}function Le(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Vi(Le,gi,Ul(On,{brighter(e){return e=e==null?vo:Math.pow(vo,e),new Le(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?En:Math.pow(En,e),new Le(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Le(zt(this.r),zt(this.g),zt(this.b),bo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fr,formatHex:fr,formatHex8:sd,formatRgb:hr,toString:hr}));function fr(){return`#${Pt(this.r)}${Pt(this.g)}${Pt(this.b)}`}function sd(){return`#${Pt(this.r)}${Pt(this.g)}${Pt(this.b)}${Pt((isNaN(this.opacity)?1:this.opacity)*255)}`}function hr(){const e=bo(this.opacity);return`${e===1?"rgb(":"rgba("}${zt(this.r)}, ${zt(this.g)}, ${zt(this.b)}${e===1?")":`, ${e})`}`}function bo(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function zt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Pt(e){return e=zt(e),(e<16?"0":"")+e.toString(16)}function gr(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ze(e,t,n,o)}function Zl(e){if(e instanceof Ze)return new Ze(e.h,e.s,e.l,e.opacity);if(e instanceof On||(e=Vt(e)),!e)return new Ze;if(e instanceof Ze)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),r=Math.max(t,n,o),l=NaN,a=r-i,s=(r+i)/2;return a?(t===r?l=(n-o)/a+(n<o)*6:n===r?l=(o-t)/a+2:l=(t-n)/a+4,a/=s<.5?r+i:2-r-i,l*=60):a=s>0&&s<1?0:l,new Ze(l,a,s,e.opacity)}function ud(e,t,n,o){return arguments.length===1?Zl(e):new Ze(e,t,n,o??1)}function Ze(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Vi(Ze,ud,Ul(On,{brighter(e){return e=e==null?vo:Math.pow(vo,e),new Ze(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?En:Math.pow(En,e),new Ze(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new Le(jo(e>=240?e-240:e+120,i,o),jo(e,i,o),jo(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new Ze(mr(this.h),Gn(this.s),Gn(this.l),bo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=bo(this.opacity);return`${e===1?"hsl(":"hsla("}${mr(this.h)}, ${Gn(this.s)*100}%, ${Gn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function mr(e){return e=(e||0)%360,e<0?e+360:e}function Gn(e){return Math.max(0,Math.min(1,e||0))}function jo(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Li=e=>()=>e;function cd(e,t){return function(n){return e+n*t}}function dd(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function pd(e){return(e=+e)==1?ql:function(t,n){return n-t?dd(t,n,e):Li(isNaN(t)?n:t)}}function ql(e,t){var n=t-e;return n?cd(e,n):Li(isNaN(e)?t:e)}const wo=function e(t){var n=pd(t);function o(i,r){var l=n((i=gi(i)).r,(r=gi(r)).r),a=n(i.g,r.g),s=n(i.b,r.b),u=ql(i.opacity,r.opacity);return function(c){return i.r=l(c),i.g=a(c),i.b=s(c),i.opacity=u(c),i+""}}return o.gamma=e,o}(1);function fd(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,o=t.slice(),i;return function(r){for(i=0;i<n;++i)o[i]=e[i]*(1-r)+t[i]*r;return o}}function hd(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function gd(e,t){var n=t?t.length:0,o=e?Math.min(n,e.length):0,i=new Array(o),r=new Array(n),l;for(l=0;l<o;++l)i[l]=bn(e[l],t[l]);for(;l<n;++l)r[l]=t[l];return function(a){for(l=0;l<o;++l)r[l]=i[l](a);return r}}function md(e,t){var n=new Date;return e=+e,t=+t,function(o){return n.setTime(e*(1-o)+t*o),n}}function tt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function yd(e,t){var n={},o={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=bn(e[i],t[i]):o[i]=t[i];return function(r){for(i in n)o[i]=n[i](r);return o}}var mi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Jo=new RegExp(mi.source,"g");function vd(e){return function(){return e}}function bd(e){return function(t){return e(t)+""}}function Wl(e,t){var n=mi.lastIndex=Jo.lastIndex=0,o,i,r,l=-1,a=[],s=[];for(e=e+"",t=t+"";(o=mi.exec(e))&&(i=Jo.exec(t));)(r=i.index)>n&&(r=t.slice(n,r),a[l]?a[l]+=r:a[++l]=r),(o=o[0])===(i=i[0])?a[l]?a[l]+=i:a[++l]=i:(a[++l]=null,s.push({i:l,x:tt(o,i)})),n=Jo.lastIndex;return n<t.length&&(r=t.slice(n),a[l]?a[l]+=r:a[++l]=r),a.length<2?s[0]?bd(s[0].x):vd(t):(t=s.length,function(u){for(var c=0,d;c<t;++c)a[(d=s[c]).i]=d.x(u);return a.join("")})}function bn(e,t){var n=typeof t,o;return t==null||n==="boolean"?Li(t):(n==="number"?tt:n==="string"?(o=Vt(t))?(t=o,wo):Wl:t instanceof Vt?wo:t instanceof Date?md:hd(t)?fd:Array.isArray(t)?gd:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?yd:tt)(e,t)}var yr=180/Math.PI,yi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Kl(e,t,n,o,i,r){var l,a,s;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(s=e*n+t*o)&&(n-=e*s,o-=t*s),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,s/=a),e*o<t*n&&(e=-e,t=-t,s=-s,l=-l),{translateX:i,translateY:r,rotate:Math.atan2(t,e)*yr,skewX:Math.atan(s)*yr,scaleX:l,scaleY:a}}var Un;function wd(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?yi:Kl(t.a,t.b,t.c,t.d,t.e,t.f)}function xd(e){return e==null||(Un||(Un=document.createElementNS("http://www.w3.org/2000/svg","g")),Un.setAttribute("transform",e),!(e=Un.transform.baseVal.consolidate()))?yi:(e=e.matrix,Kl(e.a,e.b,e.c,e.d,e.e,e.f))}function jl(e,t,n,o){function i(u){return u.length?u.pop()+" ":""}function r(u,c,d,f,p,$){if(u!==d||c!==f){var _=p.push("translate(",null,t,null,n);$.push({i:_-4,x:tt(u,d)},{i:_-2,x:tt(c,f)})}else(d||f)&&p.push("translate("+d+t+f+n)}function l(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(i(d)+"rotate(",null,o)-2,x:tt(u,c)})):c&&d.push(i(d)+"rotate("+c+o)}function a(u,c,d,f){u!==c?f.push({i:d.push(i(d)+"skewX(",null,o)-2,x:tt(u,c)}):c&&d.push(i(d)+"skewX("+c+o)}function s(u,c,d,f,p,$){if(u!==d||c!==f){var _=p.push(i(p)+"scale(",null,",",null,")");$.push({i:_-4,x:tt(u,d)},{i:_-2,x:tt(c,f)})}else(d!==1||f!==1)&&p.push(i(p)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),r(u.translateX,u.translateY,c.translateX,c.translateY,d,f),l(u.rotate,c.rotate,d,f),a(u.skewX,c.skewX,d,f),s(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(p){for(var $=-1,_=f.length,C;++$<_;)d[(C=f[$]).i]=C.x(p);return d.join("")}}}var _d=jl(wd,"px, ","px)","deg)"),Sd=jl(xd,", ",")",")"),$d=1e-12;function vr(e){return((e=Math.exp(e))+1/e)/2}function Nd(e){return((e=Math.exp(e))-1/e)/2}function Ed(e){return((e=Math.exp(2*e))-1)/(e+1)}const lo=function e(t,n,o){function i(r,l){var a=r[0],s=r[1],u=r[2],c=l[0],d=l[1],f=l[2],p=c-a,$=d-s,_=p*p+$*$,C,v;if(_<$d)v=Math.log(f/u)/t,C=function(q){return[a+q*p,s+q*$,u*Math.exp(t*q*v)]};else{var m=Math.sqrt(_),g=(f*f-u*u+o*_)/(2*u*n*m),w=(f*f-u*u-o*_)/(2*f*n*m),z=Math.log(Math.sqrt(g*g+1)-g),I=Math.log(Math.sqrt(w*w+1)-w);v=(I-z)/t,C=function(q){var j=q*v,te=vr(z),W=u/(n*m)*(te*Ed(t*j+z)-Nd(z));return[a+W*p,s+W*$,u*te/vr(t*j+z)]}}return C.duration=v*1e3*t/Math.SQRT2,C}return i.rho=function(r){var l=Math.max(.001,+r),a=l*l,s=a*a;return e(l,a,s)},i}(Math.SQRT2,2,4);var Qt=0,pn=0,an=0,Jl=1e3,xo,fn,_o=0,Lt=0,Ro=0,Cn=typeof performance=="object"&&performance.now?performance:Date,Ql=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Fi(){return Lt||(Ql(kd),Lt=Cn.now()+Ro)}function kd(){Lt=0}function So(){this._call=this._time=this._next=null}So.prototype=ea.prototype={constructor:So,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Fi():+n)+(t==null?0:+t),!this._next&&fn!==this&&(fn?fn._next=this:xo=this,fn=this),this._call=e,this._time=n,vi()},stop:function(){this._call&&(this._call=null,this._time=1/0,vi())}};function ea(e,t,n){var o=new So;return o.restart(e,t,n),o}function Cd(){Fi(),++Qt;for(var e=xo,t;e;)(t=Lt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Qt}function br(){Lt=(_o=Cn.now())+Ro,Qt=pn=0;try{Cd()}finally{Qt=0,Td(),Lt=0}}function Md(){var e=Cn.now(),t=e-_o;t>Jl&&(Ro-=t,_o=e)}function Td(){for(var e,t=xo,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:xo=n);fn=e,vi(o)}function vi(e){if(!Qt){pn&&(pn=clearTimeout(pn));var t=e-Lt;t>24?(e<1/0&&(pn=setTimeout(br,e-Cn.now()-Ro)),an&&(an=clearInterval(an))):(an||(_o=Cn.now(),an=setInterval(Md,Jl)),Qt=1,Ql(br))}}function wr(e,t,n){var o=new So;return t=t==null?0:+t,o.restart(i=>{o.stop(),e(i+t)},t,n),o}var Id=Ao("start","end","cancel","interrupt"),Dd=[],ta=0,xr=1,bi=2,ao=3,_r=4,wi=5,so=6;function Bo(e,t,n,o,i,r){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;Pd(e,n,{name:t,index:o,group:i,on:Id,tween:Dd,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:ta})}function Hi(e,t){var n=je(e,t);if(n.state>ta)throw new Error("too late; already scheduled");return n}function at(e,t){var n=je(e,t);if(n.state>ao)throw new Error("too late; already running");return n}function je(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Pd(e,t,n){var o=e.__transition,i;o[t]=n,n.timer=ea(r,0,n.time);function r(u){n.state=xr,n.timer.restart(l,n.delay,n.time),n.delay<=u&&l(u-n.delay)}function l(u){var c,d,f,p;if(n.state!==xr)return s();for(c in o)if(p=o[c],p.name===n.name){if(p.state===ao)return wr(l);p.state===_r?(p.state=so,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete o[c]):+c<t&&(p.state=so,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete o[c])}if(wr(function(){n.state===ao&&(n.state=_r,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=bi,n.on.call("start",e,e.__data__,n.index,n.group),n.state===bi){for(n.state=ao,i=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=p);i.length=d+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=wi,1),d=-1,f=i.length;++d<f;)i[d].call(e,c);n.state===wi&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=so,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function uo(e,t){var n=e.__transition,o,i,r=!0,l;if(n){t=t==null?null:t+"";for(l in n){if((o=n[l]).name!==t){r=!1;continue}i=o.state>bi&&o.state<wi,o.state=so,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[l]}r&&delete e.__transition}}function Ad(e){return this.each(function(){uo(this,e)})}function zd(e,t){var n,o;return function(){var i=at(this,e),r=i.tween;if(r!==n){o=n=r;for(var l=0,a=o.length;l<a;++l)if(o[l].name===t){o=o.slice(),o.splice(l,1);break}}i.tween=o}}function Rd(e,t,n){var o,i;if(typeof n!="function")throw new Error;return function(){var r=at(this,e),l=r.tween;if(l!==o){i=(o=l).slice();for(var a={name:t,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===t){i[s]=a;break}s===u&&i.push(a)}r.tween=i}}function Bd(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=je(this.node(),n).tween,i=0,r=o.length,l;i<r;++i)if((l=o[i]).name===e)return l.value;return null}return this.each((t==null?zd:Rd)(n,e,t))}function Yi(e,t,n){var o=e._id;return e.each(function(){var i=at(this,o);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return je(i,o).value[t]}}function na(e,t){var n;return(typeof t=="number"?tt:t instanceof Vt?wo:(n=Vt(t))?(t=n,wo):Wl)(e,t)}function Od(e){return function(){this.removeAttribute(e)}}function Vd(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ld(e,t,n){var o,i=n+"",r;return function(){var l=this.getAttribute(e);return l===i?null:l===o?r:r=t(o=l,n)}}function Fd(e,t,n){var o,i=n+"",r;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===o?r:r=t(o=l,n)}}function Hd(e,t,n){var o,i,r;return function(){var l,a=n(this),s;return a==null?void this.removeAttribute(e):(l=this.getAttribute(e),s=a+"",l===s?null:l===o&&s===i?r:(i=s,r=t(o=l,a)))}}function Yd(e,t,n){var o,i,r;return function(){var l,a=n(this),s;return a==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),s=a+"",l===s?null:l===o&&s===i?r:(i=s,r=t(o=l,a)))}}function Xd(e,t){var n=zo(e),o=n==="transform"?Sd:na;return this.attrTween(e,typeof t=="function"?(n.local?Yd:Hd)(n,o,Yi(this,"attr."+e,t)):t==null?(n.local?Vd:Od)(n):(n.local?Fd:Ld)(n,o,t))}function Gd(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Ud(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Zd(e,t){var n,o;function i(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&Ud(e,r)),n}return i._value=t,i}function qd(e,t){var n,o;function i(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&Gd(e,r)),n}return i._value=t,i}function Wd(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=zo(e);return this.tween(n,(o.local?Zd:qd)(o,t))}function Kd(e,t){return function(){Hi(this,e).delay=+t.apply(this,arguments)}}function jd(e,t){return t=+t,function(){Hi(this,e).delay=t}}function Jd(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Kd:jd)(t,e)):je(this.node(),t).delay}function Qd(e,t){return function(){at(this,e).duration=+t.apply(this,arguments)}}function ep(e,t){return t=+t,function(){at(this,e).duration=t}}function tp(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Qd:ep)(t,e)):je(this.node(),t).duration}function np(e,t){if(typeof t!="function")throw new Error;return function(){at(this,e).ease=t}}function op(e){var t=this._id;return arguments.length?this.each(np(t,e)):je(this.node(),t).ease}function ip(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;at(this,e).ease=n}}function rp(e){if(typeof e!="function")throw new Error;return this.each(ip(this._id,e))}function lp(e){typeof e!="function"&&(e=Al(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],l=r.length,a=o[i]=[],s,u=0;u<l;++u)(s=r[u])&&e.call(s,s.__data__,u,r)&&a.push(s);return new yt(o,this._parents,this._name,this._id)}function ap(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,r=Math.min(o,i),l=new Array(o),a=0;a<r;++a)for(var s=t[a],u=n[a],c=s.length,d=l[a]=new Array(c),f,p=0;p<c;++p)(f=s[p]||u[p])&&(d[p]=f);for(;a<o;++a)l[a]=t[a];return new yt(l,this._parents,this._name,this._id)}function sp(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function up(e,t,n){var o,i,r=sp(t)?Hi:at;return function(){var l=r(this,e),a=l.on;a!==o&&(i=(o=a).copy()).on(t,n),l.on=i}}function cp(e,t){var n=this._id;return arguments.length<2?je(this.node(),n).on.on(e):this.each(up(n,e,t))}function dp(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function pp(){return this.on("end.remove",dp(this._id))}function fp(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Bi(e));for(var o=this._groups,i=o.length,r=new Array(i),l=0;l<i;++l)for(var a=o[l],s=a.length,u=r[l]=new Array(s),c,d,f=0;f<s;++f)(c=a[f])&&(d=e.call(c,c.__data__,f,a))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,Bo(u[f],t,n,f,u,je(c,n)));return new yt(r,this._parents,t,n)}function hp(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Pl(e));for(var o=this._groups,i=o.length,r=[],l=[],a=0;a<i;++a)for(var s=o[a],u=s.length,c,d=0;d<u;++d)if(c=s[d]){for(var f=e.call(c,c.__data__,d,s),p,$=je(c,n),_=0,C=f.length;_<C;++_)(p=f[_])&&Bo(p,t,n,_,f,$);r.push(f),l.push(c)}return new yt(r,l,t,n)}var gp=Bn.prototype.constructor;function mp(){return new gp(this._groups,this._parents)}function yp(e,t){var n,o,i;return function(){var r=Jt(this,e),l=(this.style.removeProperty(e),Jt(this,e));return r===l?null:r===n&&l===o?i:i=t(n=r,o=l)}}function oa(e){return function(){this.style.removeProperty(e)}}function vp(e,t,n){var o,i=n+"",r;return function(){var l=Jt(this,e);return l===i?null:l===o?r:r=t(o=l,n)}}function bp(e,t,n){var o,i,r;return function(){var l=Jt(this,e),a=n(this),s=a+"";return a==null&&(s=a=(this.style.removeProperty(e),Jt(this,e))),l===s?null:l===o&&s===i?r:(i=s,r=t(o=l,a))}}function wp(e,t){var n,o,i,r="style."+t,l="end."+r,a;return function(){var s=at(this,e),u=s.on,c=s.value[r]==null?a||(a=oa(t)):void 0;(u!==n||i!==c)&&(o=(n=u).copy()).on(l,i=c),s.on=o}}function xp(e,t,n){var o=(e+="")=="transform"?_d:na;return t==null?this.styleTween(e,yp(e,o)).on("end.style."+e,oa(e)):typeof t=="function"?this.styleTween(e,bp(e,o,Yi(this,"style."+e,t))).each(wp(this._id,e)):this.styleTween(e,vp(e,o,t),n).on("end.style."+e,null)}function _p(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Sp(e,t,n){var o,i;function r(){var l=t.apply(this,arguments);return l!==i&&(o=(i=l)&&_p(e,l,n)),o}return r._value=t,r}function $p(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Sp(e,t,n??""))}function Np(e){return function(){this.textContent=e}}function Ep(e){return function(){var t=e(this);this.textContent=t??""}}function kp(e){return this.tween("text",typeof e=="function"?Ep(Yi(this,"text",e)):Np(e==null?"":e+""))}function Cp(e){return function(t){this.textContent=e.call(this,t)}}function Mp(e){var t,n;function o(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Cp(i)),t}return o._value=e,o}function Tp(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Mp(e))}function Ip(){for(var e=this._name,t=this._id,n=ia(),o=this._groups,i=o.length,r=0;r<i;++r)for(var l=o[r],a=l.length,s,u=0;u<a;++u)if(s=l[u]){var c=je(s,t);Bo(s,e,n,u,l,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new yt(o,this._parents,e,n)}function Dp(){var e,t,n=this,o=n._id,i=n.size();return new Promise(function(r,l){var a={value:l},s={value:function(){--i===0&&r()}};n.each(function(){var u=at(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(s)),u.on=t}),i===0&&r()})}var Pp=0;function yt(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function ia(){return++Pp}var ut=Bn.prototype;yt.prototype={constructor:yt,select:fp,selectAll:hp,selectChild:ut.selectChild,selectChildren:ut.selectChildren,filter:lp,merge:ap,selection:mp,transition:Ip,call:ut.call,nodes:ut.nodes,node:ut.node,size:ut.size,empty:ut.empty,each:ut.each,on:cp,attr:Xd,attrTween:Wd,style:xp,styleTween:$p,text:kp,textTween:Tp,remove:pp,tween:Bd,delay:Jd,duration:tp,ease:op,easeVarying:rp,end:Dp,[Symbol.iterator]:ut[Symbol.iterator]};function Ap(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var zp={time:null,delay:0,duration:250,ease:Ap};function Rp(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Bp(e){var t,n;e instanceof yt?(t=e._id,e=e._name):(t=ia(),(n=zp).time=Fi(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,r=0;r<i;++r)for(var l=o[r],a=l.length,s,u=0;u<a;++u)(s=l[u])&&Bo(s,e,t,u,l,n||Rp(s,t));return new yt(o,this._parents,e,t)}Bn.prototype.interrupt=Ad;Bn.prototype.transition=Bp;const Zn=e=>()=>e;function Op(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function ht(e,t,n){this.k=e,this.x=t,this.y=n}ht.prototype={constructor:ht,scale:function(e){return e===1?this:new ht(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ht(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var en=new ht(1,0,0);ht.prototype;function Qo(e){e.stopImmediatePropagation()}function sn(e){e.preventDefault(),e.stopImmediatePropagation()}function Vp(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Lp(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Sr(){return this.__zoom||en}function Fp(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Hp(){return navigator.maxTouchPoints||"ontouchstart"in this}function Yp(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],r=e.invertY(t[0][1])-n[0][1],l=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),l>r?(r+l)/2:Math.min(0,r)||Math.max(0,l))}function Xp(){var e=Vp,t=Lp,n=Yp,o=Fp,i=Hp,r=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],a=250,s=lo,u=Ao("start","zoom","end"),c,d,f,p=500,$=150,_=0,C=10;function v(h){h.property("__zoom",Sr).on("wheel.zoom",j,{passive:!1}).on("mousedown.zoom",te).on("dblclick.zoom",W).filter(i).on("touchstart.zoom",O).on("touchmove.zoom",y).on("touchend.zoom touchcancel.zoom",U).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(h,T,b,R){var S=h.selection?h.selection():h;S.property("__zoom",Sr),h!==S?z(h,T,b,R):S.interrupt().each(function(){I(this,arguments).event(R).start().zoom(null,typeof T=="function"?T.apply(this,arguments):T).end()})},v.scaleBy=function(h,T,b,R){v.scaleTo(h,function(){var S=this.__zoom.k,A=typeof T=="function"?T.apply(this,arguments):T;return S*A},b,R)},v.scaleTo=function(h,T,b,R){v.transform(h,function(){var S=t.apply(this,arguments),A=this.__zoom,D=b==null?w(S):typeof b=="function"?b.apply(this,arguments):b,H=A.invert(D),V=typeof T=="function"?T.apply(this,arguments):T;return n(g(m(A,V),D,H),S,l)},b,R)},v.translateBy=function(h,T,b,R){v.transform(h,function(){return n(this.__zoom.translate(typeof T=="function"?T.apply(this,arguments):T,typeof b=="function"?b.apply(this,arguments):b),t.apply(this,arguments),l)},null,R)},v.translateTo=function(h,T,b,R,S){v.transform(h,function(){var A=t.apply(this,arguments),D=this.__zoom,H=R==null?w(A):typeof R=="function"?R.apply(this,arguments):R;return n(en.translate(H[0],H[1]).scale(D.k).translate(typeof T=="function"?-T.apply(this,arguments):-T,typeof b=="function"?-b.apply(this,arguments):-b),A,l)},R,S)};function m(h,T){return T=Math.max(r[0],Math.min(r[1],T)),T===h.k?h:new ht(T,h.x,h.y)}function g(h,T,b){var R=T[0]-b[0]*h.k,S=T[1]-b[1]*h.k;return R===h.x&&S===h.y?h:new ht(h.k,R,S)}function w(h){return[(+h[0][0]+ +h[1][0])/2,(+h[0][1]+ +h[1][1])/2]}function z(h,T,b,R){h.on("start.zoom",function(){I(this,arguments).event(R).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(R).end()}).tween("zoom",function(){var S=this,A=arguments,D=I(S,A).event(R),H=t.apply(S,A),V=b==null?w(H):typeof b=="function"?b.apply(S,A):b,X=Math.max(H[1][0]-H[0][0],H[1][1]-H[0][1]),F=S.__zoom,J=typeof T=="function"?T.apply(S,A):T,P=s(F.invert(V).concat(X/F.k),J.invert(V).concat(X/J.k));return function(L){if(L===1)L=J;else{var K=P(L),Q=X/K[2];L=new ht(Q,V[0]-K[0]*Q,V[1]-K[1]*Q)}D.zoom(null,L)}})}function I(h,T,b){return!b&&h.__zooming||new q(h,T)}function q(h,T){this.that=h,this.args=T,this.active=0,this.sourceEvent=null,this.extent=t.apply(h,T),this.taps=0}q.prototype={event:function(h){return h&&(this.sourceEvent=h),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(h,T){return this.mouse&&h!=="mouse"&&(this.mouse[1]=T.invert(this.mouse[0])),this.touch0&&h!=="touch"&&(this.touch0[1]=T.invert(this.touch0[0])),this.touch1&&h!=="touch"&&(this.touch1[1]=T.invert(this.touch1[0])),this.that.__zoom=T,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(h){var T=Ue(this.that).datum();u.call(h,this.that,new Op(h,{sourceEvent:this.sourceEvent,target:v,transform:this.that.__zoom,dispatch:u}),T)}};function j(h,...T){if(!e.apply(this,arguments))return;var b=I(this,T).event(h),R=this.__zoom,S=Math.max(r[0],Math.min(r[1],R.k*Math.pow(2,o.apply(this,arguments)))),A=et(h);if(b.wheel)(b.mouse[0][0]!==A[0]||b.mouse[0][1]!==A[1])&&(b.mouse[1]=R.invert(b.mouse[0]=A)),clearTimeout(b.wheel);else{if(R.k===S)return;b.mouse=[A,R.invert(A)],uo(this),b.start()}sn(h),b.wheel=setTimeout(D,$),b.zoom("mouse",n(g(m(R,S),b.mouse[0],b.mouse[1]),b.extent,l));function D(){b.wheel=null,b.end()}}function te(h,...T){if(f||!e.apply(this,arguments))return;var b=h.currentTarget,R=I(this,T,!0).event(h),S=Ue(h.view).on("mousemove.zoom",V,!0).on("mouseup.zoom",X,!0),A=et(h,b),D=h.clientX,H=h.clientY;Xl(h.view),Qo(h),R.mouse=[A,this.__zoom.invert(A)],uo(this),R.start();function V(F){if(sn(F),!R.moved){var J=F.clientX-D,P=F.clientY-H;R.moved=J*J+P*P>_}R.event(F).zoom("mouse",n(g(R.that.__zoom,R.mouse[0]=et(F,b),R.mouse[1]),R.extent,l))}function X(F){S.on("mousemove.zoom mouseup.zoom",null),Gl(F.view,R.moved),sn(F),R.event(F).end()}}function W(h,...T){if(e.apply(this,arguments)){var b=this.__zoom,R=et(h.changedTouches?h.changedTouches[0]:h,this),S=b.invert(R),A=b.k*(h.shiftKey?.5:2),D=n(g(m(b,A),R,S),t.apply(this,T),l);sn(h),a>0?Ue(this).transition().duration(a).call(z,D,R,h):Ue(this).call(v.transform,D,R,h)}}function O(h,...T){if(e.apply(this,arguments)){var b=h.touches,R=b.length,S=I(this,T,h.changedTouches.length===R).event(h),A,D,H,V;for(Qo(h),D=0;D<R;++D)H=b[D],V=et(H,this),V=[V,this.__zoom.invert(V),H.identifier],S.touch0?!S.touch1&&S.touch0[2]!==V[2]&&(S.touch1=V,S.taps=0):(S.touch0=V,A=!0,S.taps=1+!!c);c&&(c=clearTimeout(c)),A&&(S.taps<2&&(d=V[0],c=setTimeout(function(){c=null},p)),uo(this),S.start())}}function y(h,...T){if(this.__zooming){var b=I(this,T).event(h),R=h.changedTouches,S=R.length,A,D,H,V;for(sn(h),A=0;A<S;++A)D=R[A],H=et(D,this),b.touch0&&b.touch0[2]===D.identifier?b.touch0[0]=H:b.touch1&&b.touch1[2]===D.identifier&&(b.touch1[0]=H);if(D=b.that.__zoom,b.touch1){var X=b.touch0[0],F=b.touch0[1],J=b.touch1[0],P=b.touch1[1],L=(L=J[0]-X[0])*L+(L=J[1]-X[1])*L,K=(K=P[0]-F[0])*K+(K=P[1]-F[1])*K;D=m(D,Math.sqrt(L/K)),H=[(X[0]+J[0])/2,(X[1]+J[1])/2],V=[(F[0]+P[0])/2,(F[1]+P[1])/2]}else if(b.touch0)H=b.touch0[0],V=b.touch0[1];else return;b.zoom("touch",n(g(D,H,V),b.extent,l))}}function U(h,...T){if(this.__zooming){var b=I(this,T).event(h),R=h.changedTouches,S=R.length,A,D;for(Qo(h),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),A=0;A<S;++A)D=R[A],b.touch0&&b.touch0[2]===D.identifier?delete b.touch0:b.touch1&&b.touch1[2]===D.identifier&&delete b.touch1;if(b.touch1&&!b.touch0&&(b.touch0=b.touch1,delete b.touch1),b.touch0)b.touch0[1]=this.__zoom.invert(b.touch0[0]);else if(b.end(),b.taps===2&&(D=et(D,this),Math.hypot(d[0]-D[0],d[1]-D[1])<C)){var H=Ue(this).on("dblclick.zoom");H&&H.apply(this,arguments)}}}return v.wheelDelta=function(h){return arguments.length?(o=typeof h=="function"?h:Zn(+h),v):o},v.filter=function(h){return arguments.length?(e=typeof h=="function"?h:Zn(!!h),v):e},v.touchable=function(h){return arguments.length?(i=typeof h=="function"?h:Zn(!!h),v):i},v.extent=function(h){return arguments.length?(t=typeof h=="function"?h:Zn([[+h[0][0],+h[0][1]],[+h[1][0],+h[1][1]]]),v):t},v.scaleExtent=function(h){return arguments.length?(r[0]=+h[0],r[1]=+h[1],v):[r[0],r[1]]},v.translateExtent=function(h){return arguments.length?(l[0][0]=+h[0][0],l[1][0]=+h[1][0],l[0][1]=+h[0][1],l[1][1]=+h[1][1],v):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},v.constrain=function(h){return arguments.length?(n=h,v):n},v.duration=function(h){return arguments.length?(a=+h,v):a},v.interpolate=function(h){return arguments.length?(s=h,v):s},v.on=function(){var h=u.on.apply(u,arguments);return h===u?v:h},v.clickDistance=function(h){return arguments.length?(_=(h=+h)*h,v):Math.sqrt(_)},v.tapDistance=function(h){return arguments.length?(C=+h,v):C},v}var ne=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(ne||{}),Xi=(e=>(e.Partial="partial",e.Full="full",e))(Xi||{}),Tt=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(Tt||{}),kt=(e=>(e.Strict="strict",e.Loose="loose",e))(kt||{}),xi=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(xi||{}),wn=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(wn||{}),ra=(e=>(e.TopLeft="top-left",e.TopCenter="top-center",e.TopRight="top-right",e.BottomLeft="bottom-left",e.BottomCenter="bottom-center",e.BottomRight="bottom-right",e))(ra||{});const Gp=["INPUT","SELECT","TEXTAREA"],Up=typeof document<"u"?document:null;function _i(e){var t,n;const o=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,i=typeof(o==null?void 0:o.hasAttribute)=="function"?o.hasAttribute("contenteditable"):!1,r=typeof(o==null?void 0:o.closest)=="function"?o.closest(".nokey"):null;return Gp.includes(o==null?void 0:o.nodeName)||i||!!r}function Zp(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function $r(e,t,n,o){const i=t.replace("+",`
`).replace(`

`,`
+`).split(`
`).map(l=>l.trim().toLowerCase());if(i.length===1)return e.toLowerCase()===t.toLowerCase();o||n.add(e.toLowerCase());const r=i.every((l,a)=>n.has(l)&&Array.from(n.values())[a]===i[a]);return o&&n.delete(e.toLowerCase()),r}function qp(e,t){return n=>{if(!n.code&&!n.key)return!1;const o=Wp(n.code,e);return Array.isArray(e)?e.some(i=>$r(n[o],i,t,n.type==="keyup")):$r(n[o],e,t,n.type==="keyup")}}function Wp(e,t){return t.includes(e)?"code":"key"}function xn(e,t){const n=Y(()=>be(t==null?void 0:t.target)??Up),o=Et(be(e)===!0);let i=!1;const r=new Set;let l=s(be(e));xe(()=>be(e),(u,c)=>{typeof c=="boolean"&&typeof u!="boolean"&&a(),l=s(u)},{immediate:!0}),Il(["blur","contextmenu"],a),lr((...u)=>l(...u),u=>{var c,d;const f=be(t==null?void 0:t.actInsideInputWithModifier)??!0,p=be(t==null?void 0:t.preventDefault)??!1;if(i=Zp(u),(!i||i&&!f)&&_i(u))return;const _=((d=(c=u.composedPath)==null?void 0:c.call(u))==null?void 0:d[0])||u.target,C=(_==null?void 0:_.nodeName)==="BUTTON"||(_==null?void 0:_.nodeName)==="A";!p&&(i||!C)&&u.preventDefault(),o.value=!0},{eventName:"keydown",target:n}),lr((...u)=>l(...u),u=>{const c=be(t==null?void 0:t.actInsideInputWithModifier)??!0;if(o.value){if((!i||i&&!c)&&_i(u))return;i=!1,o.value=!1}},{eventName:"keyup",target:n});function a(){i=!1,r.clear(),o.value=be(e)===!0}function s(u){return u===null?(a(),()=>!1):typeof u=="boolean"?(a(),o.value=u,()=>!1):Array.isArray(u)||typeof u=="string"?qp(u,r):u}return o}const la="vue-flow__node-desc",aa="vue-flow__edge-desc",Kp="vue-flow__aria-live",sa=["Enter"," ","Escape"],Kt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function $o(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function No(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function Oo(e){return{width:e.offsetWidth,height:e.offsetHeight}}function Ft(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function ua(e,t){return{x:Ft(e.x,t[0][0],t[1][0]),y:Ft(e.y,t[0][1],t[1][1])}}function Nr(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function Ct(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function Rt(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!Ct(e)}function hn(e){return Rt(e)&&"computedPosition"in e}function qn(e){return!Number.isNaN(e)&&Number.isFinite(e)}function jp(e){return qn(e.width)&&qn(e.height)&&qn(e.x)&&qn(e.y)}function Jp(e,t,n){const o={id:e.id.toString(),type:e.type??"default",dimensions:Oe({width:0,height:0}),computedPosition:Oe({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:Ie(e.data)?e.data:{},events:Oe(Ie(e.events)?e.events:{})};return Object.assign(t??o,e,{id:e.id.toString(),parentNode:n})}function ca(e,t,n){var o,i;const r={id:e.id.toString(),type:e.type??(t==null?void 0:t.type)??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(o=e.sourceHandle)==null?void 0:o.toString(),targetHandle:(i=e.targetHandle)==null?void 0:i.toString(),updatable:e.updatable??(n==null?void 0:n.updatable),selectable:e.selectable??(n==null?void 0:n.selectable),focusable:e.focusable??(n==null?void 0:n.focusable),data:Ie(e.data)?e.data:{},events:Oe(Ie(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??(n==null?void 0:n.interactionWidth),...n??{}};return Object.assign(t??r,e,{id:e.id.toString()})}function da(e,t,n,o){const i=typeof e=="string"?e:e.id,r=new Set,l=o==="source"?"target":"source";for(const a of n)a[l]===i&&r.add(a[o]);return t.filter(a=>r.has(a.id))}function Qp(...e){if(e.length===3){const[r,l,a]=e;return da(r,l,a,"target")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(r=>Ct(r)&&r.source===o).map(r=>n.find(l=>Rt(l)&&l.id===r.target))}function ef(...e){if(e.length===3){const[r,l,a]=e;return da(r,l,a,"source")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(r=>Ct(r)&&r.target===o).map(r=>n.find(l=>Rt(l)&&l.id===r.source))}function pa({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function tf(e,t){return t.some(n=>Ct(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function Mn({x:e,y:t},{x:n,y:o,zoom:i}){return{x:e*i+n,y:t*i+o}}function Tn({x:e,y:t},{x:n,y:o,zoom:i},r=!1,l=[1,1]){const a={x:(e-n)/i,y:(t-o)/i};return r?Vo(a,l):a}function fa(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function Eo({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function ha({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function nf(e,t){return ha(fa(Eo(e),Eo(t)))}function Gi(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const o=e[n];t=fa(t,Eo({...o.computedPosition,...o.dimensions}))}return ha(t)}function ga(e,t,n={x:0,y:0,zoom:1},o=!1,i=!1){const r={...Tn(t,n),width:t.width/n.zoom,height:t.height/n.zoom},l=[];for(const a of e){const{dimensions:s,selectable:u=!0,hidden:c=!1}=a,d=s.width??a.width??null,f=s.height??a.height??null;if(i&&!u||c)continue;const p=No(r,$o(a)),$=d===null||f===null,_=o&&p>0,C=(d??0)*(f??0);($||_||p>=C||a.dragging)&&l.push(a)}return l}function It(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter(o=>n.has(o.source)||n.has(o.target))}function Zt(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return Vn(`The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function of(e,t,n){if(typeof e=="string"||typeof e=="number"){const o=Zt(e,n),i=Zt(e,t);return{top:o,right:i,bottom:o,left:i,x:i*2,y:o*2}}if(typeof e=="object"){const o=Zt(e.top??e.y??0,n),i=Zt(e.bottom??e.y??0,n),r=Zt(e.left??e.x??0,t),l=Zt(e.right??e.x??0,t);return{top:o,right:l,bottom:i,left:r,x:r+l,y:o+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function rf(e,t,n,o,i,r){const{x:l,y:a}=Mn(e,{x:t,y:n,zoom:o}),{x:s,y:u}=Mn({x:e.x+e.width,y:e.y+e.height},{x:t,y:n,zoom:o}),c=i-s,d=r-u;return{left:Math.floor(l),top:Math.floor(a),right:Math.floor(c),bottom:Math.floor(d)}}function Er(e,t,n,o,i,r=.1){const l=of(r,t,n),a=(t-l.x)/e.width,s=(n-l.y)/e.height,u=Math.min(a,s),c=Ft(u,o,i),d=e.x+e.width/2,f=e.y+e.height/2,p=t/2-d*c,$=n/2-f*c,_=rf(e,p,$,c,t,n),C={left:Math.min(_.left-l.left,0),top:Math.min(_.top-l.top,0),right:Math.min(_.right-l.right,0),bottom:Math.min(_.bottom-l.bottom,0)};return{x:p-C.left+C.right,y:$-C.top+C.bottom,zoom:c}}function lf(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function ma(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return n?n.selected?!0:ma(n,t):!1}function In(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`}function Si(e){const t=e.ctrlKey&&Dn()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t}function kr(e,t,n){return e<t?Ft(Math.abs(e-t),1,t)/t:e>n?-Ft(Math.abs(e-n),1,t)/t:0}function ya(e,t,n=15,o=40){const i=kr(e.x,o,t.width-o)*n,r=kr(e.y,o,t.height-o)*n;return[i,r]}function ei(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let i={};if(typeof t.style=="function"?i={...t.style(t)}:t.style&&(i={...t.style}),i.width=i.width??`${t.dimensions.width}px`,i.height=i.height??`${t.dimensions.height}px`,n>0)if(typeof i.width=="string"){const r=Number(i.width.replace("px",""));i.width=`${r+n}px`}else i.width+=n;if(o>0)if(typeof i.height=="string"){const r=Number(i.height.replace("px",""));i.height=`${r+o}px`}else i.height+=o;if(e.position.x<0){const r=Math.abs(e.position.x);if(t.position.x=t.position.x-r,typeof i.width=="string"){const l=Number(i.width.replace("px",""));i.width=`${l+r}px`}else i.width+=r;e.position.x=0}if(e.position.y<0){const r=Math.abs(e.position.y);if(t.position.y=t.position.y-r,typeof i.height=="string"){const l=Number(i.height.replace("px",""));i.height=`${l+r}px`}else i.height+=r;e.position.y=0}t.dimensions.width=Number(i.width.toString().replace("px","")),t.dimensions.height=Number(i.height.toString().replace("px","")),typeof t.style=="function"?t.style=r=>{const l=t.style;return{...l(r),...i}}:t.style={...t.style,...i}}}}function Cr(e,t){var n,o;const i=e.filter(l=>l.type==="add"||l.type==="remove");for(const l of i)if(l.type==="add")t.findIndex(s=>s.id===l.item.id)===-1&&t.push(l.item);else if(l.type==="remove"){const a=t.findIndex(s=>s.id===l.id);a!==-1&&t.splice(a,1)}const r=t.map(l=>l.id);for(const l of t)for(const a of e)if(a.id===l.id)switch(a.type){case"select":l.selected=a.selected;break;case"position":if(hn(l)&&(typeof a.position<"u"&&(l.position=a.position),typeof a.dragging<"u"&&(l.dragging=a.dragging),l.expandParent&&l.parentNode)){const s=t[r.indexOf(l.parentNode)];s&&hn(s)&&ei(l,s)}break;case"dimensions":if(hn(l)&&(typeof a.dimensions<"u"&&(l.dimensions=a.dimensions),typeof a.updateStyle<"u"&&a.updateStyle&&(l.style={...l.style||{},width:`${(n=a.dimensions)==null?void 0:n.width}px`,height:`${(o=a.dimensions)==null?void 0:o.height}px`}),typeof a.resizing<"u"&&(l.resizing=a.resizing),l.expandParent&&l.parentNode)){const s=t[r.indexOf(l.parentNode)];s&&hn(s)&&(!!s.dimensions.width&&!!s.dimensions.height?ei(l,s):ot(()=>{ei(l,s)}))}break}return t}function xt(e,t){return{id:e,type:"select",selected:t}}function Mr(e){return{item:e,type:"add"}}function Tr(e){return{id:e,type:"remove"}}function Ir(e,t,n,o,i){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:i||null,type:"remove"}}function St(e,t=new Set,n=!1){const o=[];for(const[i,r]of e){const l=t.has(i);!(r.selected===void 0&&!l)&&r.selected!==l&&(n&&(r.selected=l),o.push(xt(r.id,l)))}return o}const Dr=()=>{};function re(e){const t=new Set;let n=Dr,o=()=>!1;const i=()=>t.size>0||o(),r=f=>{n=f},l=()=>{n=Dr},a=f=>{o=f},s=()=>{o=()=>!1},u=f=>{t.delete(f)};return{on:f=>{t.add(f);const p=()=>u(f);return $n(p),{off:p}},off:u,trigger:f=>{const p=[n];return i()?p.push(...t):e&&p.push(e),Promise.allSettled(p.map($=>$(f)))},hasListeners:i,listeners:t,setEmitter:r,removeEmitter:l,setHasEmitListeners:a,removeHasEmitListeners:s}}function Pr(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function af(e,t,n,o){var i,r;const l=new Map;for(const[a,s]of e)(s.selected||s.id===o)&&(!s.parentNode||!ma(s,e))&&(s.draggable||t&&typeof s.draggable>"u")&&e.get(a)&&l.set(a,{id:s.id,position:s.position||{x:0,y:0},distance:{x:n.x-((i=s.computedPosition)==null?void 0:i.x)||0,y:n.y-((r=s.computedPosition)==null?void 0:r.y)||0},from:{x:s.computedPosition.x,y:s.computedPosition.y},extent:s.extent,parentNode:s.parentNode,dimensions:{...s.dimensions},expandParent:s.expandParent});return Array.from(l.values())}function ti({id:e,dragItems:t,findNode:n}){const o=[];for(const i of t){const r=n(i.id);r&&o.push(r)}return[e?o.find(i=>i.id===e):o[0],o]}function va(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function sf(e,t,n){const[o,i,r,l]=typeof e!="string"?va(e.padding):[0,0,0,0];return n&&typeof n.computedPosition.x<"u"&&typeof n.computedPosition.y<"u"&&typeof n.dimensions.width<"u"&&typeof n.dimensions.height<"u"?[[n.computedPosition.x+l,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-i,n.computedPosition.y+n.dimensions.height-r]]:!1}function uf(e,t,n,o){let i=e.extent||n;if((i==="parent"||!Array.isArray(i)&&(i==null?void 0:i.range)==="parent")&&!e.expandParent)if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const r=sf(i,e,o);r&&(i=r)}else t(new Ae(De.NODE_EXTENT_INVALID,e.id)),i=n;else if(Array.isArray(i)){const r=(o==null?void 0:o.computedPosition.x)||0,l=(o==null?void 0:o.computedPosition.y)||0;i=[[i[0][0]+r,i[0][1]+l],[i[1][0]+r,i[1][1]+l]]}else if(i!=="parent"&&(i!=null&&i.range)&&Array.isArray(i.range)){const[r,l,a,s]=va(i.padding),u=(o==null?void 0:o.computedPosition.x)||0,c=(o==null?void 0:o.computedPosition.y)||0;i=[[i.range[0][0]+u+s,i.range[0][1]+c+r],[i.range[1][0]+u-l,i.range[1][1]+c-a]]}return i==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:i}function cf({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function Ui(e,t,n,o,i){const r=cf(e.dimensions,uf(e,n,o,i)),l=ua(t,r);return{position:{x:l.x-((i==null?void 0:i.computedPosition.x)||0),y:l.y-((i==null?void 0:i.computedPosition.y)||0)},computedPosition:l}}function tn(e,t,n=ne.Left,o=!1){const i=((t==null?void 0:t.x)??0)+e.computedPosition.x,r=((t==null?void 0:t.y)??0)+e.computedPosition.y,{width:l,height:a}=t??hf(e);if(o)return{x:i+l/2,y:r+a/2};switch((t==null?void 0:t.position)??n){case ne.Top:return{x:i+l/2,y:r};case ne.Right:return{x:i+l,y:r+a/2};case ne.Bottom:return{x:i+l/2,y:r+a};case ne.Left:return{x:i,y:r+a/2}}}function Ar(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function df({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:i,targetHeight:r,width:l,height:a,viewport:s}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+o,t.y+r)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=Eo({x:(0-s.x)/s.zoom,y:(0-s.y)/s.zoom,width:l/s.zoom,height:a/s.zoom}),d=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),f=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(d*f)>0}function pf(e,t,n=!1){const o=typeof e.zIndex=="number";let i=o?e.zIndex:0;const r=t(e.source),l=t(e.target);return!r||!l?0:(n&&(i=o?e.zIndex:Math.max(r.computedPosition.z||0,l.computedPosition.z||0)),i)}var De=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(De||{});const zr={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class Ae extends Error{constructor(t,...n){var o;super((o=zr[t])==null?void 0:o.call(zr,...n)),this.name="VueFlowError",this.code=t,this.args=n}}function Zi(e){return"clientX"in e}function ff(e){return"sourceEvent"in e}function nt(e,t){const n=Zi(e);let o,i;return n?(o=e.clientX,i=e.clientY):"touches"in e&&e.touches.length>0?(o=e.touches[0].clientX,i=e.touches[0].clientY):"changedTouches"in e&&e.changedTouches.length>0?(o=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY):(o=0,i=0),{x:o-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}}const Dn=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function hf(e){var t,n;return{width:((t=e.dimensions)==null?void 0:t.width)??e.width??0,height:((n=e.dimensions)==null?void 0:n.height)??e.height??0}}function Vo(e,t=[1,1]){return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}}const gf=()=>!0;function ni(e){e==null||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function mf(e,t,n){const o=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const r of t.values())No(i,$o(r))>0&&o.push(r);return o}const yf=250;function vf(e,t,n,o){var i,r;let l=[],a=Number.POSITIVE_INFINITY;const s=mf(e,n,t+yf);for(const u of s){const c=[...((i=u.handleBounds)==null?void 0:i.source)??[],...((r=u.handleBounds)==null?void 0:r.target)??[]];for(const d of c){if(o.nodeId===d.nodeId&&o.type===d.type&&o.id===d.id)continue;const{x:f,y:p}=tn(u,d,d.position,!0),$=Math.sqrt((f-e.x)**2+(p-e.y)**2);$>t||($<a?(l=[{...d,x:f,y:p}],a=$):$===a&&l.push({...d,x:f,y:p}))}}if(!l.length)return null;if(l.length>1){const u=o.type==="source"?"target":"source";return l.find(c=>c.type===u)??l[0]}return l[0]}function Rr(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:i,fromType:r,doc:l,lib:a,flowId:s,isValidConnection:u=gf},c,d,f,p){const $=r==="target",_=t?l.querySelector(`.${a}-flow__handle[data-id="${s}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:C,y:v}=nt(e),m=l.elementFromPoint(C,v),g=m!=null&&m.classList.contains(`${a}-flow__handle`)?m:_,w={handleDomNode:g,isValid:!1,connection:null,toHandle:null};if(g){const z=ba(void 0,g),I=g.getAttribute("data-nodeid"),q=g.getAttribute("data-handleid"),j=g.classList.contains("connectable"),te=g.classList.contains("connectableend");if(!I||!z)return w;const W={source:$?I:o,sourceHandle:$?q:i,target:$?o:I,targetHandle:$?i:q};w.connection=W;const y=j&&te&&(n===kt.Strict?$&&z==="source"||!$&&z==="target":I!==o||q!==i);w.isValid=y&&u(W,{nodes:d,edges:c,sourceNode:f(W.source),targetNode:f(W.target)}),w.toHandle=wa(I,z,q,p,n,!0)}return w}function ba(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function bf(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function wf(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}function wa(e,t,n,o,i,r=!1){var l,a,s;const u=o.get(e);if(!u)return null;const c=i===kt.Strict?(l=u.handleBounds)==null?void 0:l[t]:[...((a=u.handleBounds)==null?void 0:a.source)??[],...((s=u.handleBounds)==null?void 0:s.target)??[]],d=(n?c==null?void 0:c.find(f=>f.id===n):c==null?void 0:c[0])??null;return d&&r?{...d,...tn(u,d,d.position,!0)}:d}const $i={[ne.Left]:ne.Right,[ne.Right]:ne.Left,[ne.Top]:ne.Bottom,[ne.Bottom]:ne.Top},xf=["production","prod"];function Vn(e,...t){xa()&&console.warn(`[Vue Flow]: ${e}`,...t)}function xa(){return!xf.includes("production")}function Br(e,t,n,o,i){const r=t.querySelectorAll(`.vue-flow__handle.${e}`);return r!=null&&r.length?Array.from(r).map(l=>{const a=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),type:e,nodeId:i,position:l.getAttribute("data-handlepos"),x:(a.left-n.left)/o,y:(a.top-n.top)/o,...Oo(l)}}):null}function Ni(e,t,n,o,i,r=!1,l){i.value=!1,e.selected?(r||e.selected&&t)&&(o([e]),ot(()=>{l.blur()})):n([e])}function Ie(e){return typeof B(e)<"u"}function _f(e,t,n,o){if(!e||!e.source||!e.target)return n(new Ae(De.EDGE_INVALID,(e==null?void 0:e.id)??"[ID UNKNOWN]")),!1;let i;return Ct(e)?i=e:i={...e,id:pa(e)},i=ca(i,void 0,o),tf(i,t)?!1:i}function Sf(e,t,n,o,i){if(!t.source||!t.target)return i(new Ae(De.EDGE_INVALID,e.id)),!1;if(!n)return i(new Ae(De.EDGE_NOT_FOUND,e.id)),!1;const{id:r,...l}=e;return{...l,id:o?pa(t):r,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle}}function Or(e,t,n){const o={},i=[];for(let r=0;r<e.length;++r){const l=e[r];if(!Rt(l)){n(new Ae(De.NODE_INVALID,l==null?void 0:l.id)||`[ID UNKNOWN|INDEX ${r}]`);continue}const a=Jp(l,t(l.id),l.parentNode);l.parentNode&&(o[l.parentNode]=!0),i[r]=a}for(const r of i){const l=t(r.parentNode)||i.find(a=>a.id===r.parentNode);r.parentNode&&!l&&n(new Ae(De.NODE_MISSING_PARENT,r.id,r.parentNode)),(r.parentNode||o[r.id])&&(o[r.id]&&(r.isParent=!0),l&&(l.isParent=!0))}return i}function Vr(e,t,n,o,i,r){let l=i;const a=o.get(l)||new Map;o.set(l,a.set(n,t)),l=`${i}-${e}`;const s=o.get(l)||new Map;if(o.set(l,s.set(n,t)),r){l=`${i}-${e}-${r}`;const u=o.get(l)||new Map;o.set(l,u.set(n,t))}}function oi(e,t,n){e.clear();for(const o of n){const{source:i,target:r,sourceHandle:l=null,targetHandle:a=null}=o,s={edgeId:o.id,source:i,target:r,sourceHandle:l,targetHandle:a},u=`${i}-${l}--${r}-${a}`,c=`${r}-${a}--${i}-${l}`;Vr("source",s,c,e,i,l),Vr("target",s,u,e,r,a)}}function Lr(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function ii(e,t,n,o,i,r,l,a){const s=[];for(const u of e){const c=Ct(u)?u:_f(u,a,i,r);if(!c)continue;const d=n(c.source),f=n(c.target);if(!d||!f){i(new Ae(De.EDGE_SOURCE_TARGET_MISSING,c.id,c.source,c.target));continue}if(!d){i(new Ae(De.EDGE_SOURCE_MISSING,c.id,c.source));continue}if(!f){i(new Ae(De.EDGE_TARGET_MISSING,c.id,c.target));continue}if(t&&!t(c,{edges:a,nodes:l,sourceNode:d,targetNode:f})){i(new Ae(De.EDGE_INVALID,c.id));continue}const p=o(c.id);s.push({...ca(c,p,r),sourceNode:d,targetNode:f})}return s}const Fr=Symbol("vueFlow"),_a=Symbol("nodeId"),Sa=Symbol("nodeRef"),$f=Symbol("edgeId"),Nf=Symbol("edgeRef"),Lo=Symbol("slots");function $a(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:i,nodeLookup:r,nodeExtent:l,nodeDragThreshold:a,viewport:s,autoPanOnNodeDrag:u,autoPanSpeed:c,nodesDraggable:d,panBy:f,findNode:p,multiSelectionActive:$,nodesSelectionActive:_,selectNodesOnDrag:C,removeSelectedElements:v,addSelectedNodes:m,updateNodePositions:g,emits:w}=Ce(),{onStart:z,onDrag:I,onStop:q,onClick:j,el:te,disabled:W,id:O,selectable:y,dragHandle:U}=e,h=Et(!1);let T=[],b,R=null,S={x:void 0,y:void 0},A={x:0,y:0},D=null,H=!1,V=!1,X=0,F=!1;const J=Cf(),P=({x:ce,y:ge})=>{S={x:ce,y:ge};let N=!1;if(T=T.map(x=>{const M={x:ce-x.distance.x,y:ge-x.distance.y},{computedPosition:k}=Ui(x,n.value?Vo(M,o.value):M,w.error,l.value,x.parentNode?p(x.parentNode):void 0);return N=N||x.position.x!==k.x||x.position.y!==k.y,x.position=k,x}),V=V||N,!!N&&(g(T,!0,!0),h.value=!0,D)){const[x,M]=ti({id:O,dragItems:T,findNode:p});I({event:D,node:x,nodes:M})}},L=()=>{if(!R)return;const[ce,ge]=ya(A,R,c.value);if(ce!==0||ge!==0){const N={x:(S.x??0)-ce/s.value.zoom,y:(S.y??0)-ge/s.value.zoom};f({x:ce,y:ge})&&P(N)}X=requestAnimationFrame(L)},K=(ce,ge)=>{H=!0;const N=p(O);!C.value&&!$.value&&N&&(N.selected||v()),N&&be(y)&&C.value&&Ni(N,$.value,m,v,_,!1,ge);const x=J(ce.sourceEvent);if(S=x,T=af(r.value,d.value,x,O),T.length){const[M,k]=ti({id:O,dragItems:T,findNode:p});z({event:ce.sourceEvent,node:M,nodes:k})}},Q=(ce,ge)=>{var N;ce.sourceEvent.type==="touchmove"&&ce.sourceEvent.touches.length>1||(V=!1,a.value===0&&K(ce,ge),S=J(ce.sourceEvent),R=((N=t.value)==null?void 0:N.getBoundingClientRect())||null,A=nt(ce.sourceEvent,R))},oe=(ce,ge)=>{const N=J(ce.sourceEvent);if(!F&&H&&u.value&&(F=!0,L()),!H){const x=N.xSnapped-(S.x??0),M=N.ySnapped-(S.y??0);Math.sqrt(x*x+M*M)>a.value&&K(ce,ge)}(S.x!==N.xSnapped||S.y!==N.ySnapped)&&T.length&&H&&(D=ce.sourceEvent,A=nt(ce.sourceEvent,R),P(N))},ie=ce=>{let ge=!1;if(!H&&!h.value&&!$.value){const N=ce.sourceEvent,x=J(N),M=x.xSnapped-(S.x??0),k=x.ySnapped-(S.y??0),Z=Math.sqrt(M*M+k*k);Z!==0&&Z<=a.value&&(j==null||j(N),ge=!0)}if(T.length&&!ge){V&&(g(T,!1,!1),V=!1);const[N,x]=ti({id:O,dragItems:T,findNode:p});q({event:ce.sourceEvent,node:N,nodes:x})}T=[],h.value=!1,F=!1,H=!1,S={x:void 0,y:void 0},cancelAnimationFrame(X)};return xe([()=>be(W),te],([ce,ge],N,x)=>{if(ge){const M=Ue(ge);ce||(b=jc().on("start",k=>Q(k,ge)).on("drag",k=>oe(k,ge)).on("end",k=>ie(k)).filter(k=>{const Z=k.target,ae=be(U);return!k.button&&(!i.value||!Pr(Z,`.${i.value}`,ge)&&(!ae||Pr(Z,ae,ge)))}),M.call(b)),x(()=>{M.on(".drag",null),b&&(b.on("start",null),b.on("drag",null),b.on("end",null))})}}),h}function Ef(){return{doubleClick:re(),click:re(),mouseEnter:re(),mouseMove:re(),mouseLeave:re(),contextMenu:re(),updateStart:re(),update:re(),updateEnd:re()}}function kf(e,t){const n=Ef();return n.doubleClick.on(o=>{var i,r;t.edgeDoubleClick(o),(r=(i=e.events)==null?void 0:i.doubleClick)==null||r.call(i,o)}),n.click.on(o=>{var i,r;t.edgeClick(o),(r=(i=e.events)==null?void 0:i.click)==null||r.call(i,o)}),n.mouseEnter.on(o=>{var i,r;t.edgeMouseEnter(o),(r=(i=e.events)==null?void 0:i.mouseEnter)==null||r.call(i,o)}),n.mouseMove.on(o=>{var i,r;t.edgeMouseMove(o),(r=(i=e.events)==null?void 0:i.mouseMove)==null||r.call(i,o)}),n.mouseLeave.on(o=>{var i,r;t.edgeMouseLeave(o),(r=(i=e.events)==null?void 0:i.mouseLeave)==null||r.call(i,o)}),n.contextMenu.on(o=>{var i,r;t.edgeContextMenu(o),(r=(i=e.events)==null?void 0:i.contextMenu)==null||r.call(i,o)}),n.updateStart.on(o=>{var i,r;t.edgeUpdateStart(o),(r=(i=e.events)==null?void 0:i.updateStart)==null||r.call(i,o)}),n.update.on(o=>{var i,r;t.edgeUpdate(o),(r=(i=e.events)==null?void 0:i.update)==null||r.call(i,o)}),n.updateEnd.on(o=>{var i,r;t.edgeUpdateEnd(o),(r=(i=e.events)==null?void 0:i.updateEnd)==null||r.call(i,o)}),Object.entries(n).reduce((o,[i,r])=>(o.emit[i]=r.trigger,o.on[i]=r.on,o),{emit:{},on:{}})}function Cf(){const{viewport:e,snapGrid:t,snapToGrid:n,vueFlowRef:o}=Ce();return i=>{var r;const l=((r=o.value)==null?void 0:r.getBoundingClientRect())??{left:0,top:0},a=ff(i)?i.sourceEvent:i,{x:s,y:u}=nt(a,l),c=Tn({x:s,y:u},e.value),{x:d,y:f}=n.value?Vo(c,t.value):c;return{xSnapped:d,ySnapped:f,...c}}}function Wn(){return!0}function Na({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:i,onEdgeUpdate:r,onEdgeUpdateEnd:l}){const{id:a,vueFlowRef:s,connectionMode:u,connectionRadius:c,connectOnClick:d,connectionClickStartHandle:f,nodesConnectable:p,autoPanOnConnect:$,autoPanSpeed:_,findNode:C,panBy:v,startConnection:m,updateConnection:g,endConnection:w,emits:z,viewport:I,edges:q,nodes:j,isValidConnection:te,nodeLookup:W}=Ce();let O=null,y=!1,U=null;function h(b){var R;const S=be(n)==="target",A=Zi(b),D=Nr(b.target),H=b.currentTarget;if(H&&(A&&b.button===0||!A)){let V=function(ue){N=nt(ue,ie),P=vf(Tn(N,I.value,!1,[1,1]),c.value,W.value,k),x||(M(),x=!0);const me=Rr(ue,{handle:P,connectionMode:u.value,fromNodeId:be(t),fromHandleId:be(e),fromType:S?"target":"source",isValidConnection:J,doc:D,lib:"vue",flowId:a,nodeLookup:W.value},q.value,j.value,C,W.value);U=me.handleDomNode,O=me.connection,y=wf(!!P,me.isValid);const we={...le,isValid:y,to:me.toHandle&&y?Mn({x:me.toHandle.x,y:me.toHandle.y},I.value):N,toHandle:me.toHandle,toPosition:y&&me.toHandle?me.toHandle.position:$i[k.position],toNode:me.toHandle?W.value.get(me.toHandle.nodeId):null};if(y&&P&&(le!=null&&le.toHandle)&&we.toHandle&&le.toHandle.type===we.toHandle.type&&le.toHandle.nodeId===we.toHandle.nodeId&&le.toHandle.id===we.toHandle.id&&le.to.x===we.to.x&&le.to.y===we.to.y)return;const $e=P??me.toHandle;if(g($e&&y?Mn({x:$e.x,y:$e.y},I.value):N,$e,bf(!!$e,y)),le=we,!P&&!y&&!U)return ni(ge);O&&O.source!==O.target&&U&&(ni(ge),ge=U,U.classList.add("connecting","vue-flow__handle-connecting"),U.classList.toggle("valid",!!y),U.classList.toggle("vue-flow__handle-valid",!!y))},X=function(ue){"touches"in ue&&ue.touches.length>0||((P||U)&&O&&y&&(r?r(ue,O):z.connect(O)),z.connectEnd(ue),i&&(l==null||l(ue)),ni(ge),cancelAnimationFrame(L),w(ue),x=!1,y=!1,O=null,U=null,D.removeEventListener("mousemove",V),D.removeEventListener("mouseup",X),D.removeEventListener("touchmove",V),D.removeEventListener("touchend",X))};const F=C(be(t));let J=be(o)||te.value||Wn;!J&&F&&(J=(S?F.isValidSourcePos:F.isValidTargetPos)||Wn);let P,L=0;const{x:K,y:Q}=nt(b),oe=ba(be(i),H),ie=(R=s.value)==null?void 0:R.getBoundingClientRect();if(!ie||!oe)return;const ce=wa(be(t),oe,be(e),W.value,u.value);if(!ce)return;let ge,N=nt(b,ie),x=!1;const M=()=>{if(!$.value)return;const[ue,me]=ya(N,ie,_.value);v({x:ue,y:me}),L=requestAnimationFrame(M)},k={...ce,nodeId:be(t),type:oe,position:ce.position},Z=W.value.get(be(t)),se={inProgress:!0,isValid:null,from:tn(Z,k,ne.Left,!0),fromHandle:k,fromPosition:k.position,fromNode:Z,to:N,toHandle:null,toPosition:$i[k.position],toNode:null};m({nodeId:be(t),id:be(e),type:oe,position:(H==null?void 0:H.getAttribute("data-handlepos"))||ne.Top,...N},{x:K-ie.left,y:Q-ie.top}),z.connectStart({event:b,nodeId:be(t),handleId:be(e),handleType:oe});let le=se;D.addEventListener("mousemove",V),D.addEventListener("mouseup",X),D.addEventListener("touchmove",V),D.addEventListener("touchend",X)}}function T(b){var R,S;if(!d.value)return;const A=be(n)==="target";if(!f.value){z.clickConnectStart({event:b,nodeId:be(t),handleId:be(e)}),m({nodeId:be(t),type:be(n),id:be(e),position:ne.Top,...nt(b)},void 0,!0);return}let D=be(o)||te.value||Wn;const H=C(be(t));if(!D&&H&&(D=(A?H.isValidSourcePos:H.isValidTargetPos)||Wn),H&&(typeof H.connectable>"u"?p.value:H.connectable)===!1)return;const V=Nr(b.target),X=Rr(b,{handle:{nodeId:be(t),id:be(e),type:be(n),position:ne.Top,...nt(b)},connectionMode:u.value,fromNodeId:f.value.nodeId,fromHandleId:f.value.id??null,fromType:f.value.type,isValidConnection:D,doc:V,lib:"vue",flowId:a,nodeLookup:W.value},q.value,j.value,C,W.value),F=((R=X.connection)==null?void 0:R.source)===((S=X.connection)==null?void 0:S.target);X.isValid&&X.connection&&!F&&z.connect(X.connection),z.clickConnectEnd(b),w(b,!0)}return{handlePointerDown:h,handleClick:T}}function Mf(){return Yt(_a,"")}function Ea(e){const t=e??Mf()??"",n=Yt(Sa,fe(null)),{findNode:o,edges:i,emits:r}=Ce(),l=o(t);return l||r.error(new Ae(De.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:l,parentNode:Y(()=>o(l.parentNode)),connectedEdges:Y(()=>It([l],i.value))}}function Tf(){return{doubleClick:re(),click:re(),mouseEnter:re(),mouseMove:re(),mouseLeave:re(),contextMenu:re(),dragStart:re(),drag:re(),dragStop:re()}}function If(e,t){const n=Tf();return n.doubleClick.on(o=>{var i,r;t.nodeDoubleClick(o),(r=(i=e.events)==null?void 0:i.doubleClick)==null||r.call(i,o)}),n.click.on(o=>{var i,r;t.nodeClick(o),(r=(i=e.events)==null?void 0:i.click)==null||r.call(i,o)}),n.mouseEnter.on(o=>{var i,r;t.nodeMouseEnter(o),(r=(i=e.events)==null?void 0:i.mouseEnter)==null||r.call(i,o)}),n.mouseMove.on(o=>{var i,r;t.nodeMouseMove(o),(r=(i=e.events)==null?void 0:i.mouseMove)==null||r.call(i,o)}),n.mouseLeave.on(o=>{var i,r;t.nodeMouseLeave(o),(r=(i=e.events)==null?void 0:i.mouseLeave)==null||r.call(i,o)}),n.contextMenu.on(o=>{var i,r;t.nodeContextMenu(o),(r=(i=e.events)==null?void 0:i.contextMenu)==null||r.call(i,o)}),n.dragStart.on(o=>{var i,r;t.nodeDragStart(o),(r=(i=e.events)==null?void 0:i.dragStart)==null||r.call(i,o)}),n.drag.on(o=>{var i,r;t.nodeDrag(o),(r=(i=e.events)==null?void 0:i.drag)==null||r.call(i,o)}),n.dragStop.on(o=>{var i,r;t.nodeDragStop(o),(r=(i=e.events)==null?void 0:i.dragStop)==null||r.call(i,o)}),Object.entries(n).reduce((o,[i,r])=>(o.emit[i]=r.trigger,o.on[i]=r.on,o),{emit:{},on:{}})}function ka(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:i,snapToGrid:r,nodesDraggable:l,emits:a}=Ce();return(s,u=!1)=>{const c=r.value?i.value[0]:5,d=r.value?i.value[1]:5,f=u?4:1,p=s.x*c*f,$=s.y*d*f,_=[];for(const C of e.value)if(C.draggable||l&&typeof C.draggable>"u"){const v={x:C.computedPosition.x+p,y:C.computedPosition.y+$},{position:m}=Ui(C,v,a.error,t.value,C.parentNode?o(C.parentNode):void 0);_.push({id:C.id,position:m,from:C.position,distance:{x:s.x,y:s.y},dimensions:C.dimensions})}n(_,!0,!1)}}const Kn=.1,Df=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2;function wt(){return Vn("Viewport not initialized yet."),Promise.resolve(!1)}const Pf={zoomIn:wt,zoomOut:wt,zoomTo:wt,fitView:wt,setCenter:wt,fitBounds:wt,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:wt,setTransform:wt,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function Af(e){function t(o,i){return new Promise(r=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate((i==null?void 0:i.interpolate)==="linear"?bn:lo).scaleBy(ri(e.d3Selection,i==null?void 0:i.duration,i==null?void 0:i.ease,()=>{r(!0)}),o):r(!1)})}function n(o,i,r,l){return new Promise(a=>{var s;const{x:u,y:c}=ua({x:-o,y:-i},e.translateExtent),d=en.translate(-u,-c).scale(r);e.d3Selection&&e.d3Zoom?(s=e.d3Zoom)==null||s.interpolate((l==null?void 0:l.interpolate)==="linear"?bn:lo).transform(ri(e.d3Selection,l==null?void 0:l.duration,l==null?void 0:l.ease,()=>{a(!0)}),d):a(!1)})}return Y(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:i=>t(1.2,i),zoomOut:i=>t(1/1.2,i),zoomTo:(i,r)=>new Promise(l=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate((r==null?void 0:r.interpolate)==="linear"?bn:lo).scaleTo(ri(e.d3Selection,r==null?void 0:r.duration,r==null?void 0:r.ease,()=>{l(!0)}),i):l(!1)}),setViewport:(i,r)=>n(i.x,i.y,i.zoom,r),setTransform:(i,r)=>n(i.x,i.y,i.zoom,r),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(i={padding:Kn,includeHiddenNodes:!1,duration:0})=>{var r,l;const a=[];for(const f of e.nodes)f.dimensions.width&&f.dimensions.height&&((i==null?void 0:i.includeHiddenNodes)||!f.hidden)&&(!((r=i.nodes)!=null&&r.length)||(l=i.nodes)!=null&&l.length&&i.nodes.includes(f.id))&&a.push(f);if(!a.length)return Promise.resolve(!1);const s=Gi(a),{x:u,y:c,zoom:d}=Er(s,e.dimensions.width,e.dimensions.height,i.minZoom??e.minZoom,i.maxZoom??e.maxZoom,i.padding??Kn);return n(u,c,d,i)},setCenter:(i,r,l)=>{const a=typeof(l==null?void 0:l.zoom)<"u"?l.zoom:e.maxZoom,s=e.dimensions.width/2-i*a,u=e.dimensions.height/2-r*a;return n(s,u,a,l)},fitBounds:(i,r={padding:Kn})=>{const{x:l,y:a,zoom:s}=Er(i,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,r.padding??Kn);return n(l,a,s,r)},project:i=>Tn(i,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:i=>{if(e.vueFlowRef){const{x:r,y:l}=e.vueFlowRef.getBoundingClientRect(),a={x:i.x-r,y:i.y-l};return Tn(a,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:i=>{if(e.vueFlowRef){const{x:r,y:l}=e.vueFlowRef.getBoundingClientRect(),a={x:i.x+r,y:i.y+l};return Mn(a,e.viewport)}return{x:0,y:0}}}:Pf)}function ri(e,t=0,n=Df,o=()=>{}){const i=typeof t=="number"&&t>0;return i||o(),i?e.transition().duration(t).ease(n).on("end",o):e}function zf(e,t,n){const o=$l(!0);return o.run(()=>{const i=()=>{o.run(()=>{let _,C,v=!!(n.nodes.value.length||n.edges.value.length);_=Ut([e.modelValue,()=>{var m,g;return(g=(m=e.modelValue)==null?void 0:m.value)==null?void 0:g.length}],([m])=>{m&&Array.isArray(m)&&(C==null||C.pause(),n.setElements(m),!C&&!v&&m.length?v=!0:C==null||C.resume())}),C=Ut([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([m,g])=>{var w;(w=e.modelValue)!=null&&w.value&&Array.isArray(e.modelValue.value)&&(_==null||_.pause(),e.modelValue.value=[...m,...g],ot(()=>{_==null||_.resume()}))},{immediate:v}),oo(()=>{_==null||_.stop(),C==null||C.stop()})})},r=()=>{o.run(()=>{let _,C,v=!!n.nodes.value.length;_=Ut([e.nodes,()=>{var m,g;return(g=(m=e.nodes)==null?void 0:m.value)==null?void 0:g.length}],([m])=>{m&&Array.isArray(m)&&(C==null||C.pause(),n.setNodes(m),!C&&!v&&m.length?v=!0:C==null||C.resume())}),C=Ut([n.nodes,()=>n.nodes.value.length],([m])=>{var g;(g=e.nodes)!=null&&g.value&&Array.isArray(e.nodes.value)&&(_==null||_.pause(),e.nodes.value=[...m],ot(()=>{_==null||_.resume()}))},{immediate:v}),oo(()=>{_==null||_.stop(),C==null||C.stop()})})},l=()=>{o.run(()=>{let _,C,v=!!n.edges.value.length;_=Ut([e.edges,()=>{var m,g;return(g=(m=e.edges)==null?void 0:m.value)==null?void 0:g.length}],([m])=>{m&&Array.isArray(m)&&(C==null||C.pause(),n.setEdges(m),!C&&!v&&m.length?v=!0:C==null||C.resume())}),C=Ut([n.edges,()=>n.edges.value.length],([m])=>{var g;(g=e.edges)!=null&&g.value&&Array.isArray(e.edges.value)&&(_==null||_.pause(),e.edges.value=[...m],ot(()=>{_==null||_.resume()}))},{immediate:v}),oo(()=>{_==null||_.stop(),C==null||C.stop()})})},a=()=>{o.run(()=>{xe(()=>t.maxZoom,()=>{t.maxZoom&&Ie(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})})},s=()=>{o.run(()=>{xe(()=>t.minZoom,()=>{t.minZoom&&Ie(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})})},u=()=>{o.run(()=>{xe(()=>t.translateExtent,()=>{t.translateExtent&&Ie(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})})},c=()=>{o.run(()=>{xe(()=>t.nodeExtent,()=>{t.nodeExtent&&Ie(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})})},d=()=>{o.run(()=>{xe(()=>t.applyDefault,()=>{Ie(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})})},f=()=>{o.run(()=>{const _=async C=>{let v=C;typeof t.autoConnect=="function"&&(v=await t.autoConnect(C)),v!==!1&&n.addEdges([v])};xe(()=>t.autoConnect,()=>{Ie(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),xe(n.autoConnect,(C,v,m)=>{C?n.onConnect(_):n.hooks.value.connect.off(_),m(()=>{n.hooks.value.connect.off(_)})},{immediate:!0})})},p=()=>{const _=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const C of Object.keys(t)){const v=C;if(!_.includes(v)){const m=Ee(()=>t[v]),g=n[v];Ri(g)&&o.run(()=>{xe(m,w=>{Ie(w)&&(g.value=w)},{immediate:!0})})}}};(()=>{i(),r(),l(),s(),a(),u(),c(),d(),f(),p()})()}),()=>o.stop()}function Rf(){return{edgesChange:re(),nodesChange:re(),nodeDoubleClick:re(),nodeClick:re(),nodeMouseEnter:re(),nodeMouseMove:re(),nodeMouseLeave:re(),nodeContextMenu:re(),nodeDragStart:re(),nodeDrag:re(),nodeDragStop:re(),nodesInitialized:re(),miniMapNodeClick:re(),miniMapNodeDoubleClick:re(),miniMapNodeMouseEnter:re(),miniMapNodeMouseMove:re(),miniMapNodeMouseLeave:re(),connect:re(),connectStart:re(),connectEnd:re(),clickConnectStart:re(),clickConnectEnd:re(),paneReady:re(),init:re(),move:re(),moveStart:re(),moveEnd:re(),selectionDragStart:re(),selectionDrag:re(),selectionDragStop:re(),selectionContextMenu:re(),selectionStart:re(),selectionEnd:re(),viewportChangeStart:re(),viewportChange:re(),viewportChangeEnd:re(),paneScroll:re(),paneClick:re(),paneContextMenu:re(),paneMouseEnter:re(),paneMouseMove:re(),paneMouseLeave:re(),edgeContextMenu:re(),edgeMouseEnter:re(),edgeMouseMove:re(),edgeMouseLeave:re(),edgeDoubleClick:re(),edgeClick:re(),edgeUpdateStart:re(),edgeUpdate:re(),edgeUpdateEnd:re(),updateNodeInternals:re(),error:re(e=>Vn(e.message))}}function Bf(e,t){const n=rn();hs(()=>{for(const[i,r]of Object.entries(t.value)){const l=a=>{e(i,a)};r.setEmitter(l),$n(r.removeEmitter),r.setHasEmitListeners(()=>o(i)),$n(r.removeHasEmitListeners)}});function o(i){var r;const l=Of(i);return!!((r=n==null?void 0:n.vnode.props)==null?void 0:r[l])}}function Of(e){const[t,...n]=e.split(":");return`on${t.replace(/(?:^|-)(\w)/g,(i,r)=>r.toUpperCase())}${n.length?`:${n.join(":")}`:""}`}function Ca(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:Xi.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:wn.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:Tt.Bezier,style:{}},connectionMode:kt.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:Dn()?"Meta":"Control",zoomActivationKeyCode:Dn()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:Rf(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const Vf=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function Lf(e,t,n){const o=Af(e),i=N=>{const x=N??[];e.hooks.updateNodeInternals.trigger(x)},r=N=>ef(N,e.nodes,e.edges),l=N=>Qp(N,e.nodes,e.edges),a=N=>It(N,e.edges),s=({id:N,type:x,nodeId:M})=>{var k;const Z=N?`-${x}-${N}`:`-${x}`;return Array.from(((k=e.connectionLookup.get(`${M}${Z}`))==null?void 0:k.values())??[])},u=N=>{if(N)return t.value.get(N)},c=N=>{if(N)return n.value.get(N)},d=(N,x,M)=>{var k,Z;const ae=[];for(const se of N){const le={id:se.id,type:"position",dragging:M,from:se.from};if(x&&(le.position=se.position,se.parentNode)){const ue=u(se.parentNode);le.position={x:le.position.x-(((k=ue==null?void 0:ue.computedPosition)==null?void 0:k.x)??0),y:le.position.y-(((Z=ue==null?void 0:ue.computedPosition)==null?void 0:Z.y)??0)}}ae.push(le)}ae!=null&&ae.length&&e.hooks.nodesChange.trigger(ae)},f=N=>{if(!e.vueFlowRef)return;const x=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!x)return;const M=window.getComputedStyle(x),{m22:k}=new window.DOMMatrixReadOnly(M.transform),Z=[];for(const ae of N){const se=ae,le=u(se.id);if(le){const ue=Oo(se.nodeElement);if(!!(ue.width&&ue.height&&(le.dimensions.width!==ue.width||le.dimensions.height!==ue.height||se.forceUpdate))){const we=se.nodeElement.getBoundingClientRect();le.dimensions=ue,le.handleBounds.source=Br("source",se.nodeElement,we,k,le.id),le.handleBounds.target=Br("target",se.nodeElement,we,k,le.id),Z.push({id:le.id,type:"dimensions",dimensions:ue})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&o.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),Z.length&&e.hooks.nodesChange.trigger(Z)},p=(N,x)=>{const M=new Set,k=new Set;for(const se of N)Rt(se)?M.add(se.id):Ct(se)&&k.add(se.id);const Z=St(t.value,M,!0),ae=St(n.value,k);if(e.multiSelectionActive){for(const se of M)Z.push(xt(se,x));for(const se of k)ae.push(xt(se,x))}Z.length&&e.hooks.nodesChange.trigger(Z),ae.length&&e.hooks.edgesChange.trigger(ae)},$=N=>{if(e.multiSelectionActive){const x=N.map(M=>xt(M.id,!0));e.hooks.nodesChange.trigger(x);return}e.hooks.nodesChange.trigger(St(t.value,new Set(N.map(x=>x.id)),!0)),e.hooks.edgesChange.trigger(St(n.value))},_=N=>{if(e.multiSelectionActive){const x=N.map(M=>xt(M.id,!0));e.hooks.edgesChange.trigger(x);return}e.hooks.edgesChange.trigger(St(n.value,new Set(N.map(x=>x.id)))),e.hooks.nodesChange.trigger(St(t.value,new Set,!0))},C=N=>{p(N,!0)},v=N=>{const M=(N||e.nodes).map(k=>(k.selected=!1,xt(k.id,!1)));e.hooks.nodesChange.trigger(M)},m=N=>{const M=(N||e.edges).map(k=>(k.selected=!1,xt(k.id,!1)));e.hooks.edgesChange.trigger(M)},g=N=>{if(!N||!N.length)return p([],!1);const x=N.reduce((M,k)=>{const Z=xt(k.id,!1);return Rt(k)?M.nodes.push(Z):M.edges.push(Z),M},{nodes:[],edges:[]});x.nodes.length&&e.hooks.nodesChange.trigger(x.nodes),x.edges.length&&e.hooks.edgesChange.trigger(x.edges)},w=N=>{var x;(x=e.d3Zoom)==null||x.scaleExtent([N,e.maxZoom]),e.minZoom=N},z=N=>{var x;(x=e.d3Zoom)==null||x.scaleExtent([e.minZoom,N]),e.maxZoom=N},I=N=>{var x;(x=e.d3Zoom)==null||x.translateExtent(N),e.translateExtent=N},q=N=>{e.nodeExtent=N,i()},j=N=>{var x;(x=e.d3Zoom)==null||x.clickDistance(N)},te=N=>{e.nodesDraggable=N,e.nodesConnectable=N,e.elementsSelectable=N},W=N=>{const x=N instanceof Function?N(e.nodes):N;!e.initialized&&!x.length||(e.nodes=Or(x,u,e.hooks.error.trigger))},O=N=>{const x=N instanceof Function?N(e.edges):N;if(!e.initialized&&!x.length)return;const M=ii(x,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);oi(e.connectionLookup,n.value,M),e.edges=M},y=N=>{const x=N instanceof Function?N([...e.nodes,...e.edges]):N;!e.initialized&&!x.length||(W(x.filter(Rt)),O(x.filter(Ct)))},U=N=>{let x=N instanceof Function?N(e.nodes):N;x=Array.isArray(x)?x:[x];const M=Or(x,u,e.hooks.error.trigger),k=[];for(const Z of M)k.push(Mr(Z));k.length&&e.hooks.nodesChange.trigger(k)},h=N=>{let x=N instanceof Function?N(e.edges):N;x=Array.isArray(x)?x:[x];const M=ii(x,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),k=[];for(const Z of M)k.push(Mr(Z));k.length&&e.hooks.edgesChange.trigger(k)},T=(N,x=!0,M=!1)=>{const k=N instanceof Function?N(e.nodes):N,Z=Array.isArray(k)?k:[k],ae=[],se=[];function le(me){const we=a(me);for(const $e of we)(!Ie($e.deletable)||$e.deletable)&&se.push(Ir($e.id,$e.source,$e.target,$e.sourceHandle,$e.targetHandle))}function ue(me){const we=[];for(const $e of e.nodes)$e.parentNode===me&&we.push($e);if(we.length){for(const $e of we)ae.push(Tr($e.id));x&&le(we);for(const $e of we)ue($e.id)}}for(const me of Z){const we=typeof me=="string"?u(me):me;we&&(Ie(we.deletable)&&!we.deletable||(ae.push(Tr(we.id)),x&&le([we]),M&&ue(we.id)))}se.length&&e.hooks.edgesChange.trigger(se),ae.length&&e.hooks.nodesChange.trigger(ae)},b=N=>{const x=N instanceof Function?N(e.edges):N,M=Array.isArray(x)?x:[x],k=[];for(const Z of M){const ae=typeof Z=="string"?c(Z):Z;ae&&(Ie(ae.deletable)&&!ae.deletable||k.push(Ir(typeof Z=="string"?Z:Z.id,ae.source,ae.target,ae.sourceHandle,ae.targetHandle)))}e.hooks.edgesChange.trigger(k)},R=(N,x,M=!0)=>{const k=c(N.id);if(!k)return!1;const Z=e.edges.indexOf(k),ae=Sf(N,x,k,M,e.hooks.error.trigger);if(ae){const[se]=ii([ae],e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);return e.edges=e.edges.map((le,ue)=>ue===Z?se:le),oi(e.connectionLookup,n.value,[se]),se}return!1},S=(N,x,M={replace:!1})=>{const k=c(N);if(!k)return;const Z=typeof x=="function"?x(k):x;k.data=M.replace?Z:{...k.data,...Z}},A=N=>Cr(N,e.nodes),D=N=>{const x=Cr(N,e.edges);return oi(e.connectionLookup,n.value,x),x},H=(N,x,M={replace:!1})=>{const k=u(N);if(!k)return;const Z=typeof x=="function"?x(k):x;M.replace?e.nodes.splice(e.nodes.indexOf(k),1,Z):Object.assign(k,Z)},V=(N,x,M={replace:!1})=>{const k=u(N);if(!k)return;const Z=typeof x=="function"?x(k):x;k.data=M.replace?Z:{...k.data,...Z}},X=(N,x,M=!1)=>{M?e.connectionClickStartHandle=N:e.connectionStartHandle=N,e.connectionEndHandle=null,e.connectionStatus=null,x&&(e.connectionPosition=x)},F=(N,x=null,M=null)=>{e.connectionStartHandle&&(e.connectionPosition=N,e.connectionEndHandle=x,e.connectionStatus=M)},J=(N,x)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,x?e.connectionClickStartHandle=null:e.connectionStartHandle=null},P=N=>{const x=jp(N),M=x?null:hn(N)?N:u(N.id);return!x&&!M?[null,null,x]:[x?N:$o(M),M,x]},L=(N,x=!0,M=e.nodes)=>{const[k,Z,ae]=P(N);if(!k)return[];const se=[];for(const le of M||e.nodes){if(!ae&&(le.id===Z.id||!le.computedPosition))continue;const ue=$o(le),me=No(ue,k);(x&&me>0||me>=ue.width*ue.height||me>=Number(k.width)*Number(k.height))&&se.push(le)}return se},K=(N,x,M=!0)=>{const[k]=P(N);if(!k)return!1;const Z=No(k,x);return M&&Z>0||Z>=Number(k.width)*Number(k.height)},Q=N=>{const{viewport:x,dimensions:M,d3Zoom:k,d3Selection:Z,translateExtent:ae}=e;if(!k||!Z||!N.x&&!N.y)return!1;const se=en.translate(x.x+N.x,x.y+N.y).scale(x.zoom),le=[[0,0],[M.width,M.height]],ue=k.constrain()(se,le,ae),me=e.viewport.x!==ue.x||e.viewport.y!==ue.y||e.viewport.zoom!==ue.k;return k.transform(Z,ue),me},oe=N=>{const x=N instanceof Function?N(e):N,M=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];Ie(x.defaultEdgeOptions)&&(e.defaultEdgeOptions=x.defaultEdgeOptions);const k=x.modelValue||x.nodes||x.edges?[]:void 0;k&&(x.modelValue&&k.push(...x.modelValue),x.nodes&&k.push(...x.nodes),x.edges&&k.push(...x.edges),y(k));const Z=()=>{Ie(x.maxZoom)&&z(x.maxZoom),Ie(x.minZoom)&&w(x.minZoom),Ie(x.translateExtent)&&I(x.translateExtent)};for(const ae of Object.keys(x)){const se=ae,le=x[se];![...Vf,...M].includes(se)&&Ie(le)&&(e[se]=le)}pi(()=>e.d3Zoom).not.toBeNull().then(Z),e.initialized||(e.initialized=!0)};return{updateNodePositions:d,updateNodeDimensions:f,setElements:y,setNodes:W,setEdges:O,addNodes:U,addEdges:h,removeNodes:T,removeEdges:b,findNode:u,findEdge:c,updateEdge:R,updateEdgeData:S,updateNode:H,updateNodeData:V,applyEdgeChanges:D,applyNodeChanges:A,addSelectedElements:C,addSelectedNodes:$,addSelectedEdges:_,setMinZoom:w,setMaxZoom:z,setTranslateExtent:I,setNodeExtent:q,setPaneClickDistance:j,removeSelectedElements:g,removeSelectedNodes:v,removeSelectedEdges:m,startConnection:X,updateConnection:F,endConnection:J,setInteractive:te,setState:oe,getIntersectingNodes:L,getIncomers:r,getOutgoers:l,getConnectedEdges:a,getHandleConnections:s,isNodeIntersecting:K,panBy:Q,fitView:N=>o.value.fitView(N),zoomIn:N=>o.value.zoomIn(N),zoomOut:N=>o.value.zoomOut(N),zoomTo:(N,x)=>o.value.zoomTo(N,x),setViewport:(N,x)=>o.value.setViewport(N,x),setTransform:(N,x)=>o.value.setTransform(N,x),getViewport:()=>o.value.getViewport(),getTransform:()=>o.value.getTransform(),setCenter:(N,x,M)=>o.value.setCenter(N,x,M),fitBounds:(N,x)=>o.value.fitBounds(N,x),project:N=>o.value.project(N),screenToFlowCoordinate:N=>o.value.screenToFlowCoordinate(N),flowToScreenCoordinate:N=>o.value.flowToScreenCoordinate(N),toObject:()=>{const N=[],x=[];for(const M of e.nodes){const{computedPosition:k,handleBounds:Z,selected:ae,dimensions:se,isParent:le,resizing:ue,dragging:me,events:we,...$e}=M;N.push($e)}for(const M of e.edges){const{selected:k,sourceNode:Z,targetNode:ae,events:se,...le}=M;x.push(le)}return JSON.parse(JSON.stringify({nodes:N,edges:x,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:N=>new Promise(x=>{const{nodes:M,edges:k,position:Z,zoom:ae,viewport:se}=N;M&&W(M),k&&O(k);const[le,ue]=se!=null&&se.x&&(se!=null&&se.y)?[se.x,se.y]:Z??[null,null];if(le&&ue){const me=(se==null?void 0:se.zoom)||ae||e.viewport.zoom;return pi(()=>o.value.viewportInitialized).toBe(!0).then(()=>{o.value.setViewport({x:le,y:ue,zoom:me}).then(()=>{x(!0)})})}else x(!0)}),updateNodeInternals:i,viewportHelper:o,$reset:()=>{const N=Ca();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const x=en.translate(N.defaultViewport.x??0,N.defaultViewport.y??0).scale(Ft(N.defaultViewport.zoom??1,N.minZoom,N.maxZoom)),M=e.viewportRef.getBoundingClientRect(),k=[[0,0],[M.width,M.height]],Z=e.d3Zoom.constrain()(x,k,N.translateExtent);e.d3Zoom.transform(e.d3Selection,Z)}oe(N)},$destroy:()=>{}}}const Ff=["data-id","data-handleid","data-nodeid","data-handlepos"],Hf={name:"Handle",compatConfig:{MODE:3}},Me=ve({...Hf,props:{id:{default:null},type:{},position:{default:()=>ne.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=fs(e,["position","connectable","connectableStart","connectableEnd","id"]),o=Ee(()=>n.type??"source"),i=Ee(()=>n.isValidConnection??null),{id:r,connectionStartHandle:l,connectionClickStartHandle:a,connectionEndHandle:s,vueFlowRef:u,nodesConnectable:c,noDragClassName:d,noPanClassName:f}=Ce(),{id:p,node:$,nodeEl:_,connectedEdges:C}=Ea(),v=fe(),m=Ee(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),g=Ee(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),w=Ee(()=>{var O,y,U,h,T,b;return((O=l.value)==null?void 0:O.nodeId)===p&&((y=l.value)==null?void 0:y.id)===e.id&&((U=l.value)==null?void 0:U.type)===o.value||((h=s.value)==null?void 0:h.nodeId)===p&&((T=s.value)==null?void 0:T.id)===e.id&&((b=s.value)==null?void 0:b.type)===o.value}),z=Ee(()=>{var O,y,U;return((O=a.value)==null?void 0:O.nodeId)===p&&((y=a.value)==null?void 0:y.id)===e.id&&((U=a.value)==null?void 0:U.type)===o.value}),{handlePointerDown:I,handleClick:q}=Na({nodeId:p,handleId:e.id,isValidConnection:i,type:o}),j=Y(()=>typeof e.connectable=="string"&&e.connectable==="single"?!C.value.some(O=>{const y=O[`${o.value}Handle`];return O[o.value]!==p?!1:y?y===e.id:!0}):typeof e.connectable=="number"?C.value.filter(O=>{const y=O[`${o.value}Handle`];return O[o.value]!==p?!1:y?y===e.id:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable($,C.value):Ie(e.connectable)?e.connectable:c.value);Ve(()=>{var O;if(!$.dimensions.width||!$.dimensions.height)return;const y=(O=$.handleBounds[o.value])==null?void 0:O.find(A=>A.id===e.id);if(!u.value||y)return;const U=u.value.querySelector(".vue-flow__transformationpane");if(!_.value||!v.value||!U||!e.id)return;const h=_.value.getBoundingClientRect(),T=v.value.getBoundingClientRect(),b=window.getComputedStyle(U),{m22:R}=new window.DOMMatrixReadOnly(b.transform),S={id:e.id,position:e.position,x:(T.left-h.left)/R,y:(T.top-h.top)/R,type:o.value,nodeId:p,...Oo(v.value)};$.handleBounds[o.value]=[...$.handleBounds[o.value]??[],S]});function te(O){const y=Zi(O);j.value&&m.value&&(y&&O.button===0||!y)&&I(O)}function W(O){!p||!a.value&&!m.value||j.value&&q(O)}return t({handleClick:q,handlePointerDown:I,onClick:W,onPointerDown:te}),(O,y)=>(G(),ee("div",{ref_key:"handle",ref:v,"data-id":`${B(r)}-${B(p)}-${e.id}-${o.value}`,"data-handleid":e.id,"data-nodeid":B(p),"data-handlepos":O.position,class:Se(["vue-flow__handle",[`vue-flow__handle-${O.position}`,`vue-flow__handle-${e.id}`,B(d),B(f),o.value,{connectable:j.value,connecting:z.value,connectablestart:m.value,connectableend:g.value,connectionindicator:j.value&&(m.value&&!w.value||g.value&&w.value)}]]),onMousedown:te,onTouchstartPassive:te,onClick:W},[Te(O.$slots,"default",{id:O.id})],42,Ff))}}),Fo=function({sourcePosition:e=ne.Bottom,targetPosition:t=ne.Top,label:n,connectable:o=!0,isValidTargetPos:i,isValidSourcePos:r,data:l}){const a=l.label??n;return[ke(Me,{type:"target",position:t,connectable:o,isValidConnection:i}),typeof a!="string"&&a?ke(a):ke(Pe,[a]),ke(Me,{type:"source",position:e,connectable:o,isValidConnection:r})]};Fo.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];Fo.inheritAttrs=!1;Fo.compatConfig={MODE:3};const Yf=Fo,Ho=function({targetPosition:e=ne.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:i}){const r=i.label??t;return[ke(Me,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof r!="string"&&r?ke(r):ke(Pe,[r])]};Ho.props=["targetPosition","label","isValidTargetPos","connectable","data"];Ho.inheritAttrs=!1;Ho.compatConfig={MODE:3};const Xf=Ho,Yo=function({sourcePosition:e=ne.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:i}){const r=i.label??t;return[typeof r!="string"&&r?ke(r):ke(Pe,[r]),ke(Me,{type:"source",position:e,connectable:n,isValidConnection:o})]};Yo.props=["sourcePosition","label","isValidSourcePos","connectable","data"];Yo.inheritAttrs=!1;Yo.compatConfig={MODE:3};const Gf=Yo,Uf=["transform"],Zf=["width","height","x","y","rx","ry"],qf=["y"],Wf={name:"EdgeText",compatConfig:{MODE:3}},Kf=ve({...Wf,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=fe({x:0,y:0,width:0,height:0}),n=fe(null),o=Y(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);Ve(i),xe([()=>e.x,()=>e.y,n,()=>e.label],i);function i(){if(!n.value)return;const r=n.value.getBBox();(r.width!==t.value.width||r.height!==t.value.height)&&(t.value=r)}return(r,l)=>(G(),ee("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[r.labelShowBg?(G(),ee("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*r.labelBgPadding[0]}px`,height:`${t.value.height+2*r.labelBgPadding[1]}px`,x:-r.labelBgPadding[0],y:-r.labelBgPadding[1],style:de(r.labelBgStyle),rx:r.labelBgBorderRadius,ry:r.labelBgBorderRadius},null,12,Zf)):ye("",!0),E("text",go(r.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:r.labelStyle}),[Te(r.$slots,"default",{},()=>[typeof r.label!="string"?(G(),_e(dt(r.label),{key:0})):(G(),ee(Pe,{key:1},[ci(Ne(r.label),1)],64))])],16,qf)],8,Uf))}}),jf=["id","d","marker-end","marker-start"],Jf=["d","stroke-width"],Qf={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},Ln=ve({...Qf,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},labelStyle:{},labelShowBg:{type:Boolean},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=fe(null),o=fe(null),i=fe(null),r=zi();return t({pathEl:n,interactionEl:o,labelEl:i}),(l,a)=>(G(),ee(Pe,null,[E("path",go(B(r),{id:l.id,ref_key:"pathEl",ref:n,d:l.path,class:"vue-flow__edge-path","marker-end":l.markerEnd,"marker-start":l.markerStart}),null,16,jf),l.interactionWidth?(G(),ee("path",{key:0,ref_key:"interactionEl",ref:o,fill:"none",d:l.path,"stroke-width":l.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,Jf)):ye("",!0),l.label&&l.labelX&&l.labelY?(G(),_e(Kf,{key:1,ref_key:"labelEl",ref:i,x:l.labelX,y:l.labelY,label:l.label,"label-show-bg":l.labelShowBg,"label-bg-style":l.labelBgStyle,"label-bg-padding":l.labelBgPadding,"label-bg-border-radius":l.labelBgBorderRadius,"label-style":l.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):ye("",!0)],64))}});function Ma({sourceX:e,sourceY:t,targetX:n,targetY:o}){const i=Math.abs(n-e)/2,r=n<e?n+i:n-i,l=Math.abs(o-t)/2,a=o<t?o+l:o-l;return[r,a,i,l]}function Ta({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:i,sourceControlY:r,targetControlX:l,targetControlY:a}){const s=e*.125+i*.375+l*.375+n*.125,u=t*.125+r*.375+a*.375+o*.125,c=Math.abs(s-e),d=Math.abs(u-t);return[s,u,c,d]}function jn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Hr({pos:e,x1:t,y1:n,x2:o,y2:i,c:r}){let l,a;switch(e){case ne.Left:l=t-jn(t-o,r),a=n;break;case ne.Right:l=t+jn(o-t,r),a=n;break;case ne.Top:l=t,a=n-jn(n-i,r);break;case ne.Bottom:l=t,a=n+jn(i-n,r);break}return[l,a]}function Ia(e){const{sourceX:t,sourceY:n,sourcePosition:o=ne.Bottom,targetX:i,targetY:r,targetPosition:l=ne.Top,curvature:a=.25}=e,[s,u]=Hr({pos:o,x1:t,y1:n,x2:i,y2:r,c:a}),[c,d]=Hr({pos:l,x1:i,y1:r,x2:t,y2:n,c:a}),[f,p,$,_]=Ta({sourceX:t,sourceY:n,targetX:i,targetY:r,sourceControlX:s,sourceControlY:u,targetControlX:c,targetControlY:d});return[`M${t},${n} C${s},${u} ${c},${d} ${i},${r}`,f,p,$,_]}function Yr({pos:e,x1:t,y1:n,x2:o,y2:i}){let r,l;switch(e){case ne.Left:case ne.Right:r=.5*(t+o),l=n;break;case ne.Top:case ne.Bottom:r=t,l=.5*(n+i);break}return[r,l]}function Da(e){const{sourceX:t,sourceY:n,sourcePosition:o=ne.Bottom,targetX:i,targetY:r,targetPosition:l=ne.Top}=e,[a,s]=Yr({pos:o,x1:t,y1:n,x2:i,y2:r}),[u,c]=Yr({pos:l,x1:i,y1:r,x2:t,y2:n}),[d,f,p,$]=Ta({sourceX:t,sourceY:n,targetX:i,targetY:r,sourceControlX:a,sourceControlY:s,targetControlX:u,targetControlY:c});return[`M${t},${n} C${a},${s} ${u},${c} ${i},${r}`,d,f,p,$]}const Xr={[ne.Left]:{x:-1,y:0},[ne.Right]:{x:1,y:0},[ne.Top]:{x:0,y:-1},[ne.Bottom]:{x:0,y:1}};function eh({source:e,sourcePosition:t=ne.Bottom,target:n}){return t===ne.Left||t===ne.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function Gr(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function th({source:e,sourcePosition:t=ne.Bottom,target:n,targetPosition:o=ne.Top,center:i,offset:r}){const l=Xr[t],a=Xr[o],s={x:e.x+l.x*r,y:e.y+l.y*r},u={x:n.x+a.x*r,y:n.y+a.y*r},c=eh({source:s,sourcePosition:t,target:u}),d=c.x!==0?"x":"y",f=c[d];let p,$,_;const C={x:0,y:0},v={x:0,y:0},[m,g,w,z]=Ma({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(l[d]*a[d]===-1){$=i.x??m,_=i.y??g;const q=[{x:$,y:s.y},{x:$,y:u.y}],j=[{x:s.x,y:_},{x:u.x,y:_}];l[d]===f?p=d==="x"?q:j:p=d==="x"?j:q}else{const q=[{x:s.x,y:u.y}],j=[{x:u.x,y:s.y}];if(d==="x"?p=l.x===f?j:q:p=l.y===f?q:j,t===o){const U=Math.abs(e[d]-n[d]);if(U<=r){const h=Math.min(r-1,r-U);l[d]===f?C[d]=(s[d]>e[d]?-1:1)*h:v[d]=(u[d]>n[d]?-1:1)*h}}if(t!==o){const U=d==="x"?"y":"x",h=l[d]===a[U],T=s[U]>u[U],b=s[U]<u[U];(l[d]===1&&(!h&&T||h&&b)||l[d]!==1&&(!h&&b||h&&T))&&(p=d==="x"?q:j)}const te={x:s.x+C.x,y:s.y+C.y},W={x:u.x+v.x,y:u.y+v.y},O=Math.max(Math.abs(te.x-p[0].x),Math.abs(W.x-p[0].x)),y=Math.max(Math.abs(te.y-p[0].y),Math.abs(W.y-p[0].y));O>=y?($=(te.x+W.x)/2,_=p[0].y):($=p[0].x,_=(te.y+W.y)/2)}return[[e,{x:s.x+C.x,y:s.y+C.y},...p,{x:u.x+v.x,y:u.y+v.y},n],$,_,w,z]}function nh(e,t,n,o){const i=Math.min(Gr(e,t)/2,Gr(t,n)/2,o),{x:r,y:l}=t;if(e.x===r&&r===n.x||e.y===l&&l===n.y)return`L${r} ${l}`;if(e.y===l){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${r+i*u},${l}Q ${r},${l} ${r},${l+i*c}`}const a=e.x<n.x?1:-1,s=e.y<n.y?-1:1;return`L ${r},${l+i*s}Q ${r},${l} ${r+i*a},${l}`}function ko(e){const{sourceX:t,sourceY:n,sourcePosition:o=ne.Bottom,targetX:i,targetY:r,targetPosition:l=ne.Top,borderRadius:a=5,centerX:s,centerY:u,offset:c=20}=e,[d,f,p,$,_]=th({source:{x:t,y:n},sourcePosition:o,target:{x:i,y:r},targetPosition:l,center:{x:s,y:u},offset:c});return[d.reduce((v,m,g)=>{let w;return g>0&&g<d.length-1?w=nh(d[g-1],m,d[g+1],a):w=`${g===0?"M":"L"}${m.x} ${m.y}`,v+=w,v},""),f,p,$,_]}function oh(e){const{sourceX:t,sourceY:n,targetX:o,targetY:i}=e,[r,l,a,s]=Ma({sourceX:t,sourceY:n,targetX:o,targetY:i});return[`M ${t},${n}L ${o},${i}`,r,l,a,s]}const ih=ve({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=oh(e);return ke(Ln,{path:n,labelX:o,labelY:i,...t,...e})}}}),rh=ih,lh=ve({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=ko({...e,sourcePosition:e.sourcePosition??ne.Bottom,targetPosition:e.targetPosition??ne.Top});return ke(Ln,{path:n,labelX:o,labelY:i,...t,...e})}}}),Pa=lh,ah=ve({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>ke(Pa,{...e,...t,borderRadius:0})}}),sh=ah,uh=ve({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=Ia({...e,sourcePosition:e.sourcePosition??ne.Bottom,targetPosition:e.targetPosition??ne.Top});return ke(Ln,{path:n,labelX:o,labelY:i,...t,...e})}}}),ch=uh,dh=ve({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=Da({...e,sourcePosition:e.sourcePosition??ne.Bottom,targetPosition:e.targetPosition??ne.Top});return ke(Ln,{path:n,labelX:o,labelY:i,...t,...e})}}}),ph=dh,fh={input:Gf,default:Yf,output:Xf},hh={default:ch,straight:rh,step:sh,smoothstep:Pa,simplebezier:ph};function gh(e,t,n){const o=Y(()=>_=>t.value.get(_)),i=Y(()=>_=>n.value.get(_)),r=Y(()=>{const _={...hh,...e.edgeTypes},C=Object.keys(_);for(const v of e.edges)v.type&&!C.includes(v.type)&&(_[v.type]=v.type);return _}),l=Y(()=>{const _={...fh,...e.nodeTypes},C=Object.keys(_);for(const v of e.nodes)v.type&&!C.includes(v.type)&&(_[v.type]=v.type);return _}),a=Y(()=>e.onlyRenderVisibleElements?ga(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),s=Y(()=>{if(e.onlyRenderVisibleElements){const _=[];for(const C of e.edges){const v=t.value.get(C.source),m=t.value.get(C.target);df({sourcePos:v.computedPosition||{x:0,y:0},targetPos:m.computedPosition||{x:0,y:0},sourceWidth:v.dimensions.width,sourceHeight:v.dimensions.height,targetWidth:m.dimensions.width,targetHeight:m.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&_.push(C)}return _}return e.edges}),u=Y(()=>[...a.value,...s.value]),c=Y(()=>{const _=[];for(const C of e.nodes)C.selected&&_.push(C);return _}),d=Y(()=>{const _=[];for(const C of e.edges)C.selected&&_.push(C);return _}),f=Y(()=>[...c.value,...d.value]),p=Y(()=>{const _=[];for(const C of e.nodes)C.dimensions.width&&C.dimensions.height&&C.handleBounds!==void 0&&_.push(C);return _}),$=Y(()=>a.value.length>0&&p.value.length===a.value.length);return{getNode:o,getEdge:i,getElements:u,getEdgeTypes:r,getNodeTypes:l,getEdges:s,getNodes:a,getSelectedElements:f,getSelectedNodes:c,getSelectedEdges:d,getNodesInitialized:p,areNodesInitialized:$}}class Dt{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=(t=rn())==null?void 0:t.appContext.app,o=(n==null?void 0:n.config.globalProperties.$vueFlowStorage)??Dt.instance;return Dt.instance=o??new Dt,n&&(n.config.globalProperties.$vueFlowStorage=Dt.instance),Dt.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=Ca(),i=ps(o),r={};for(const[f,p]of Object.entries(i.hooks)){const $=`on${f.charAt(0).toUpperCase()+f.slice(1)}`;r[$]=p.on}const l={};for(const[f,p]of Object.entries(i.hooks))l[f]=p.trigger;const a=Y(()=>{const f=new Map;for(const p of i.nodes)f.set(p.id,p);return f}),s=Y(()=>{const f=new Map;for(const p of i.edges)f.set(p.id,p);return f}),u=gh(i,a,s),c=Lf(i,a,s);c.setState({...i,...n});const d={...r,...u,...c,...lu(i),nodeLookup:a,edgeLookup:s,emits:l,id:t,vueFlowVersion:"1.48.1",$destroy:()=>{this.remove(t)}};return this.set(t,d),d}getId(){return`vue-flow-${this.currentId++}`}}function Ce(e){const t=Dt.getInstance(),n=Sl(),o=typeof e=="object",i=o?e:{id:e},r=i.id,l=r??(n==null?void 0:n.vueFlowId);let a;if(n){const s=Yt(Fr,null);typeof s<"u"&&s!==null&&(!l||s.id===l)&&(a=s)}if(a||l&&(a=t.get(l)),!a||l&&a.id!==l){const s=r??t.getId(),u=t.create(s,i);a=u,(n??$l(!0)).run(()=>{xe(u.applyDefault,(d,f,p)=>{const $=C=>{u.applyNodeChanges(C)},_=C=>{u.applyEdgeChanges(C)};d?(u.onNodesChange($),u.onEdgesChange(_)):(u.hooks.value.nodesChange.off($),u.hooks.value.edgesChange.off(_)),p(()=>{u.hooks.value.nodesChange.off($),u.hooks.value.edgesChange.off(_)})},{immediate:!0}),$n(()=>{if(a){const d=t.get(a.id);d?d.$destroy():Vn(`No store instance found for id ${a.id} in storage.`)}})})}else o&&a.setState(i);if(n&&(Ot(Fr,a),n.vueFlowId=a.id),o){const s=rn();(s==null?void 0:s.type.name)!=="VueFlow"&&a.emits.error(new Ae(De.USEVUEFLOW_OPTIONS))}return a}function mh(e){const{emits:t,dimensions:n}=Ce();let o;Ve(()=>{const i=()=>{var r,l;if(!e.value||!(((l=(r=e.value).checkVisibility)==null?void 0:l.call(r))??!0))return;const a=Oo(e.value);(a.width===0||a.height===0)&&t.error(new Ae(De.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:a.width||500,height:a.height||500}};i(),window.addEventListener("resize",i),e.value&&(o=new ResizeObserver(()=>i()),o.observe(e.value)),El(()=>{window.removeEventListener("resize",i),o&&e.value&&o.unobserve(e.value)})})}const yh={name:"UserSelection",compatConfig:{MODE:3}},vh=ve({...yh,props:{userSelectionRect:{}},setup(e){return(t,n)=>(G(),ee("div",{class:"vue-flow__selection vue-flow__container",style:de({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}}),bh=["tabIndex"],wh={name:"NodesSelection",compatConfig:{MODE:3}},xh=ve({...wh,setup(e){const{emits:t,viewport:n,getSelectedNodes:o,noPanClassName:i,disableKeyboardA11y:r,userSelectionActive:l}=Ce(),a=ka(),s=fe(null),u=$a({el:s,onStart($){t.selectionDragStart($),t.nodeDragStart($)},onDrag($){t.selectionDrag($),t.nodeDrag($)},onStop($){t.selectionDragStop($),t.nodeDragStop($)}});Ve(()=>{var $;r.value||($=s.value)==null||$.focus({preventScroll:!0})});const c=Y(()=>Gi(o.value)),d=Y(()=>({width:`${c.value.width}px`,height:`${c.value.height}px`,top:`${c.value.y}px`,left:`${c.value.x}px`}));function f($){t.selectionContextMenu({event:$,nodes:o.value})}function p($){r.value||Kt[$.key]&&($.preventDefault(),a({x:Kt[$.key].x,y:Kt[$.key].y},$.shiftKey))}return($,_)=>!B(l)&&c.value.width&&c.value.height?(G(),ee("div",{key:0,class:Se(["vue-flow__nodesselection vue-flow__container",B(i)]),style:de({transform:`translate(${B(n).x}px,${B(n).y}px) scale(${B(n).zoom})`})},[E("div",{ref_key:"el",ref:s,class:Se([{dragging:B(u)},"vue-flow__nodesselection-rect"]),style:de(d.value),tabIndex:B(r)?void 0:-1,onContextmenu:f,onKeydown:p},null,46,bh)],6)):ye("",!0)}});function _h(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const Sh={name:"Pane",compatConfig:{MODE:3}},$h=ve({...Sh,props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:o,emits:i,userSelectionActive:r,removeSelectedElements:l,userSelectionRect:a,elementsSelectable:s,nodesSelectionActive:u,getSelectedEdges:c,getSelectedNodes:d,removeNodes:f,removeEdges:p,selectionMode:$,deleteKeyCode:_,multiSelectionKeyCode:C,multiSelectionActive:v,edgeLookup:m,nodeLookup:g,connectionLookup:w,defaultEdgeOptions:z,connectionStartHandle:I,panOnDrag:q}=Ce(),j=Et(null),te=Et(new Set),W=Et(new Set),O=Et(null),y=Ee(()=>s.value&&(e.isSelecting||r.value)),U=Ee(()=>I.value!==null);let h=!1,T=!1;const b=xn(_,{actInsideInputWithModifier:!1}),R=xn(C);xe(b,J=>{J&&(f(d.value),p(c.value),u.value=!1)}),xe(R,J=>{v.value=J});function S(J,P){return L=>{L.target===P&&(J==null||J(L))}}function A(J){if(h||U.value){h=!1;return}i.paneClick(J),l(),u.value=!1}function D(J){var P;if(Array.isArray(q.value)&&((P=q.value)!=null&&P.includes(2))){J.preventDefault();return}i.paneContextMenu(J)}function H(J){i.paneScroll(J)}function V(J){var P,L,K;if(O.value=((P=t.value)==null?void 0:P.getBoundingClientRect())??null,!s.value||!e.isSelecting||J.button!==0||J.target!==j.value||!O.value)return;(K=(L=J.target)==null?void 0:L.setPointerCapture)==null||K.call(L,J.pointerId);const{x:Q,y:oe}=_h(J,O.value);T=!0,h=!1,l(),a.value={width:0,height:0,startX:Q,startY:oe,x:Q,y:oe},i.selectionStart(J)}function X(J){var P;if(!O.value||!a.value)return;h=!0;const{x:L,y:K}=nt(J,O.value),{startX:Q=0,startY:oe=0}=a.value,ie={startX:Q,startY:oe,x:L<Q?L:Q,y:K<oe?K:oe,width:Math.abs(L-Q),height:Math.abs(K-oe)},ce=te.value,ge=W.value;te.value=new Set(ga(n.value,ie,o.value,$.value===Xi.Partial,!0).map(x=>x.id)),W.value=new Set;const N=((P=z.value)==null?void 0:P.selectable)??!0;for(const x of te.value){const M=w.value.get(x);if(M)for(const{edgeId:k}of M.values()){const Z=m.value.get(k);Z&&(Z.selectable??N)&&W.value.add(k)}}if(!Lr(ce,te.value)){const x=St(g.value,te.value,!0);i.nodesChange(x)}if(!Lr(ge,W.value)){const x=St(m.value,W.value);i.edgesChange(x)}a.value=ie,r.value=!0,u.value=!1}function F(J){var P;J.button!==0||!T||((P=J.target)==null||P.releasePointerCapture(J.pointerId),!r.value&&a.value&&J.target===j.value&&A(J),r.value=!1,a.value=null,u.value=te.value.size>0,i.selectionEnd(J),e.selectionKeyPressed&&(h=!1),T=!1)}return(J,P)=>(G(),ee("div",{ref_key:"container",ref:j,class:Se(["vue-flow__pane vue-flow__container",{selection:J.isSelecting}]),onClick:P[0]||(P[0]=L=>y.value?void 0:S(A,j.value)(L)),onContextmenu:P[1]||(P[1]=L=>S(D,j.value)(L)),onWheelPassive:P[2]||(P[2]=L=>S(H,j.value)(L)),onPointerenter:P[3]||(P[3]=L=>y.value?void 0:B(i).paneMouseEnter(L)),onPointerdown:P[4]||(P[4]=L=>y.value?V(L):B(i).paneMouseMove(L)),onPointermove:P[5]||(P[5]=L=>y.value?X(L):B(i).paneMouseMove(L)),onPointerup:P[6]||(P[6]=L=>y.value?F(L):void 0),onPointerleave:P[7]||(P[7]=L=>B(i).paneMouseLeave(L))},[Te(J.$slots,"default"),B(r)&&B(a)?(G(),_e(vh,{key:0,"user-selection-rect":B(a)},null,8,["user-selection-rect"])):ye("",!0),B(u)&&B(d).length?(G(),_e(xh,{key:1})):ye("",!0)],34))}}),Nh={name:"Transform",compatConfig:{MODE:3}},Eh=ve({...Nh,setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:o}=Ce(),i=Y(()=>n.value?!o.value:!1),r=Y(()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`);return(l,a)=>(G(),ee("div",{class:"vue-flow__transformationpane vue-flow__container",style:de({transform:r.value,opacity:i.value?0:void 0})},[Te(l.$slots,"default")],4))}}),kh={name:"Viewport",compatConfig:{MODE:3}},Ch=ve({...kh,setup(e){const{minZoom:t,maxZoom:n,defaultViewport:o,translateExtent:i,zoomActivationKeyCode:r,selectionKeyCode:l,panActivationKeyCode:a,panOnScroll:s,panOnScrollMode:u,panOnScrollSpeed:c,panOnDrag:d,zoomOnDoubleClick:f,zoomOnPinch:p,zoomOnScroll:$,preventScrolling:_,noWheelClassName:C,noPanClassName:v,emits:m,connectionStartHandle:g,userSelectionActive:w,paneDragging:z,d3Zoom:I,d3Selection:q,d3ZoomHandler:j,viewport:te,viewportRef:W,paneClickDistance:O}=Ce();mh(W);const y=Et(!1),U=Et(!1);let h=null,T=!1,b=0,R={x:0,y:0,zoom:0};const S=xn(a),A=xn(l),D=xn(r),H=Ee(()=>(!A.value||A.value&&l.value===!0)&&(S.value||d.value)),V=Ee(()=>S.value||s.value),X=Ee(()=>A.value||l.value===!0&&H.value!==!0),F=Ee(()=>g.value!==null);Ve(()=>{if(!W.value){Vn("Viewport element is missing");return}const Q=W.value,oe=Q.getBoundingClientRect(),ie=Xp().clickDistance(O.value).scaleExtent([t.value,n.value]).translateExtent(i.value),ce=Ue(Q).call(ie),ge=ce.on("wheel.zoom"),N=en.translate(o.value.x??0,o.value.y??0).scale(Ft(o.value.zoom??1,t.value,n.value)),x=[[0,0],[oe.width,oe.height]],M=ie.constrain()(N,x,i.value);ie.transform(ce,M),ie.wheelDelta(Si),I.value=ie,q.value=ce,j.value=ge,te.value={x:M.x,y:M.y,zoom:M.k},ie.on("start",k=>{var Z;if(!k.sourceEvent)return null;b=k.sourceEvent.button,y.value=!0;const ae=L(k.transform);((Z=k.sourceEvent)==null?void 0:Z.type)==="mousedown"&&(z.value=!0),R=ae,m.viewportChangeStart(ae),m.moveStart({event:k,flowTransform:ae})}),ie.on("end",k=>{if(!k.sourceEvent)return null;if(y.value=!1,z.value=!1,J(H.value,b??0)&&!T&&m.paneContextMenu(k.sourceEvent),T=!1,P(R,k.transform)){const Z=L(k.transform);R=Z,m.viewportChangeEnd(Z),m.moveEnd({event:k,flowTransform:Z})}}),ie.filter(k=>{var Z;const ae=D.value||$.value,se=p.value&&k.ctrlKey,le=k.button,ue=k.type==="wheel";if(le===1&&k.type==="mousedown"&&(K(k,"vue-flow__node")||K(k,"vue-flow__edge")))return!0;if(!H.value&&!ae&&!V.value&&!f.value&&!p.value||w.value||F.value&&!ue||!f.value&&k.type==="dblclick"||K(k,C.value)&&ue||K(k,v.value)&&(!ue||V.value&&ue&&!D.value)||!p.value&&k.ctrlKey&&ue||!ae&&!V.value&&!se&&ue)return!1;if(!p&&k.type==="touchstart"&&((Z=k.touches)==null?void 0:Z.length)>1)return k.preventDefault(),!1;if(!H.value&&(k.type==="mousedown"||k.type==="touchstart")||l.value===!0&&Array.isArray(d.value)&&d.value.includes(0)&&le===0||Array.isArray(d.value)&&!d.value.includes(le)&&(k.type==="mousedown"||k.type==="touchstart"))return!1;const me=Array.isArray(d.value)&&d.value.includes(le)||l.value===!0&&Array.isArray(d.value)&&!d.value.includes(0)||!le||le<=1;return(!k.ctrlKey||S.value||ue)&&me}),xe([w,H],()=>{w.value&&!y.value?ie.on("zoom",null):w.value||ie.on("zoom",k=>{te.value={x:k.transform.x,y:k.transform.y,zoom:k.transform.k};const Z=L(k.transform);T=J(H.value,b??0),m.viewportChange(Z),m.move({event:k,flowTransform:Z})})},{immediate:!0}),xe([w,V,u,D,p,_,C],()=>{V.value&&!D.value&&!w.value?ce.on("wheel.zoom",k=>{if(K(k,C.value))return!1;const Z=D.value||$.value,ae=p.value&&k.ctrlKey;if(!(!_.value||V.value||Z||ae))return!1;k.preventDefault(),k.stopImmediatePropagation();const le=ce.property("__zoom").k||1,ue=Dn();if(!S.value&&k.ctrlKey&&p.value&&ue){const ln=et(k),ss=Si(k),us=le*2**ss;ie.scaleTo(ce,us,ln,k);return}const me=k.deltaMode===1?20:1;let we=u.value===wn.Vertical?0:k.deltaX*me,$e=u.value===wn.Horizontal?0:k.deltaY*me;!ue&&k.shiftKey&&u.value!==wn.Vertical&&!we&&$e&&(we=$e,$e=0),ie.translateBy(ce,-(we/le)*c.value,-($e/le)*c.value);const Qe=L(ce.property("__zoom"));h&&clearTimeout(h),U.value?(m.move({event:k,flowTransform:Qe}),m.viewportChange(Qe),h=setTimeout(()=>{m.moveEnd({event:k,flowTransform:Qe}),m.viewportChangeEnd(Qe),U.value=!1},150)):(U.value=!0,m.moveStart({event:k,flowTransform:Qe}),m.viewportChangeStart(Qe))},{passive:!1}):typeof ge<"u"&&ce.on("wheel.zoom",function(k,Z){const ae=!_.value&&k.type==="wheel"&&!k.ctrlKey,se=D.value||$.value,le=p.value&&k.ctrlKey;if(!se&&!s.value&&!le&&k.type==="wheel"||ae||K(k,C.value))return null;k.preventDefault(),ge.call(this,k,Z)},{passive:!1})},{immediate:!0})});function J(Q,oe){return oe===2&&Array.isArray(Q)&&Q.includes(2)}function P(Q,oe){return Q.x!==oe.x&&!Number.isNaN(oe.x)||Q.y!==oe.y&&!Number.isNaN(oe.y)||Q.zoom!==oe.k&&!Number.isNaN(oe.k)}function L(Q){return{x:Q.x,y:Q.y,zoom:Q.k}}function K(Q,oe){return Q.target.closest(`.${oe}`)}return(Q,oe)=>(G(),ee("div",{ref_key:"viewportRef",ref:W,class:"vue-flow__viewport vue-flow__container"},[pe($h,{"is-selecting":X.value,"selection-key-pressed":B(A),class:Se({connecting:F.value,dragging:B(z),draggable:B(d)===!0||Array.isArray(B(d))&&B(d).includes(0)})},{default:Xe(()=>[pe(Eh,null,{default:Xe(()=>[Te(Q.$slots,"default")]),_:3})]),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),Mh=["id"],Th=["id"],Ih=["id"],Dh={name:"A11yDescriptions",compatConfig:{MODE:3}},Ph=ve({...Dh,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=Ce();return(i,r)=>(G(),ee(Pe,null,[E("div",{id:`${B(la)}-${B(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+Ne(B(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Mh),E("div",{id:`${B(aa)}-${B(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,Th),B(n)?ye("",!0):(G(),ee("div",{key:0,id:`${B(Kp)}-${B(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},Ne(B(o)),9,Ih))],64))}});function Ah(){const e=Ce();xe(()=>e.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{e.emits.init(e),e.emits.paneReady(e)},1)})}function zh(e,t,n){return n===ne.Left?e-t:n===ne.Right?e+t:e}function Rh(e,t,n){return n===ne.Top?e-t:n===ne.Bottom?e+t:e}const qi=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=ne.Top,type:i}){return ke("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${i}`,cx:zh(t,e,o),cy:Rh(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};qi.props=["radius","centerX","centerY","position","type"];qi.compatConfig={MODE:3};const Ur=qi,Bh=ve({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:i,emits:r,nodesSelectionActive:l,noPanClassName:a,getEdgeTypes:s,removeSelectedEdges:u,findEdge:c,findNode:d,isValidConnection:f,multiSelectionActive:p,disableKeyboardA11y:$,elementsSelectable:_,edgesUpdatable:C,edgesFocusable:v,hooks:m}=Ce(),g=Y(()=>c(e.id)),{emit:w,on:z}=kf(g.value,r),I=Yt(Lo),q=rn(),j=fe(!1),te=fe(!1),W=fe(""),O=fe(null),y=fe("source"),U=fe(null),h=Ee(()=>typeof g.value.selectable>"u"?_.value:g.value.selectable),T=Ee(()=>typeof g.value.updatable>"u"?C.value:g.value.updatable),b=Ee(()=>typeof g.value.focusable>"u"?v.value:g.value.focusable);Ot($f,e.id),Ot(Nf,U);const R=Y(()=>g.value.class instanceof Function?g.value.class(g.value):g.value.class),S=Y(()=>g.value.style instanceof Function?g.value.style(g.value):g.value.style),A=Y(()=>{const x=g.value.type||"default",M=I==null?void 0:I[`edge-${x}`];if(M)return M;let k=g.value.template??s.value[x];if(typeof k=="string"&&q){const Z=Object.keys(q.appContext.components);Z&&Z.includes(x)&&(k=kl(x,!1))}return k&&typeof k!="string"?k:(r.error(new Ae(De.EDGE_TYPE_MISSING,k)),!1)}),{handlePointerDown:D}=Na({nodeId:W,handleId:O,type:y,isValidConnection:f,edgeUpdaterType:y,onEdgeUpdate:X,onEdgeUpdateEnd:F});return()=>{const x=d(g.value.source),M=d(g.value.target),k="pathOptions"in g.value?g.value.pathOptions:{};if(!x&&!M)return r.error(new Ae(De.EDGE_SOURCE_TARGET_MISSING,g.value.id,g.value.source,g.value.target)),null;if(!x)return r.error(new Ae(De.EDGE_SOURCE_MISSING,g.value.id,g.value.source)),null;if(!M)return r.error(new Ae(De.EDGE_TARGET_MISSING,g.value.id,g.value.target)),null;if(!g.value||g.value.hidden||x.hidden||M.hidden)return null;let Z;o.value===kt.Strict?Z=x.handleBounds.source:Z=[...x.handleBounds.source||[],...x.handleBounds.target||[]];const ae=Ar(Z,g.value.sourceHandle);let se;o.value===kt.Strict?se=M.handleBounds.target:se=[...M.handleBounds.target||[],...M.handleBounds.source||[]];const le=Ar(se,g.value.targetHandle),ue=(ae==null?void 0:ae.position)||ne.Bottom,me=(le==null?void 0:le.position)||ne.Top,{x:we,y:$e}=tn(x,ae,ue),{x:Qe,y:ln}=tn(M,le,me);return g.value.sourceX=we,g.value.sourceY=$e,g.value.targetX=Qe,g.value.targetY=ln,ke("g",{ref:U,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${A.value===!1?"default":g.value.type||"default"}`,a.value,R.value,{updating:j.value,selected:g.value.selected,animated:g.value.animated,inactive:!h.value&&!m.value.edgeClick.hasListeners()}],tabIndex:b.value?0:void 0,"aria-label":g.value.ariaLabel===null?void 0:g.value.ariaLabel??`Edge from ${g.value.source} to ${g.value.target}`,"aria-describedby":b.value?`${aa}-${t}`:void 0,"aria-roledescription":"edge",role:b.value?"group":"img",...g.value.domAttributes,onClick:P,onContextmenu:L,onDblclick:K,onMouseenter:Q,onMousemove:oe,onMouseleave:ie,onKeyDown:b.value?N:void 0},[te.value?null:ke(A.value===!1?s.value.default:A.value,{id:e.id,sourceNode:x,targetNode:M,source:g.value.source,target:g.value.target,type:g.value.type,updatable:T.value,selected:g.value.selected,animated:g.value.animated,label:g.value.label,labelStyle:g.value.labelStyle,labelShowBg:g.value.labelShowBg,labelBgStyle:g.value.labelBgStyle,labelBgPadding:g.value.labelBgPadding,labelBgBorderRadius:g.value.labelBgBorderRadius,data:g.value.data,events:{...g.value.events,...z},style:S.value,markerStart:`url('#${In(g.value.markerStart,t)}')`,markerEnd:`url('#${In(g.value.markerEnd,t)}')`,sourcePosition:ue,targetPosition:me,sourceX:we,sourceY:$e,targetX:Qe,targetY:ln,sourceHandleId:g.value.sourceHandle,targetHandleId:g.value.targetHandle,interactionWidth:g.value.interactionWidth,...k}),[T.value==="source"||T.value===!0?[ke("g",{onMousedown:ce,onMouseenter:H,onMouseout:V},ke(Ur,{position:ue,centerX:we,centerY:$e,radius:i.value,type:"source","data-type":"source"}))]:null,T.value==="target"||T.value===!0?[ke("g",{onMousedown:ge,onMouseenter:H,onMouseout:V},ke(Ur,{position:me,centerX:Qe,centerY:ln,radius:i.value,type:"target","data-type":"target"}))]:null]])};function H(){j.value=!0}function V(){j.value=!1}function X(x,M){w.update({event:x,edge:g.value,connection:M})}function F(x){w.updateEnd({event:x,edge:g.value}),te.value=!1}function J(x,M){x.button===0&&(te.value=!0,W.value=M?g.value.target:g.value.source,O.value=(M?g.value.targetHandle:g.value.sourceHandle)??null,y.value=M?"target":"source",w.updateStart({event:x,edge:g.value}),D(x))}function P(x){var M;const k={event:x,edge:g.value};h.value&&(l.value=!1,g.value.selected&&p.value?(u([g.value]),(M=U.value)==null||M.blur()):n([g.value])),w.click(k)}function L(x){w.contextMenu({event:x,edge:g.value})}function K(x){w.doubleClick({event:x,edge:g.value})}function Q(x){w.mouseEnter({event:x,edge:g.value})}function oe(x){w.mouseMove({event:x,edge:g.value})}function ie(x){w.mouseLeave({event:x,edge:g.value})}function ce(x){J(x,!0)}function ge(x){J(x,!1)}function N(x){var M;!$.value&&sa.includes(x.key)&&h.value&&(x.key==="Escape"?((M=U.value)==null||M.blur(),u([c(e.id)])):n([c(e.id)]))}}}),Oh=Bh,Vh=ve({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:o,connectionEndHandle:i,connectionPosition:r,connectionLineType:l,connectionLineStyle:a,connectionLineOptions:s,connectionStatus:u,viewport:c,findNode:d}=Ce(),f=(e=Yt(Lo))==null?void 0:e["connection-line"],p=Y(()=>{var m;return d((m=o.value)==null?void 0:m.nodeId)}),$=Y(()=>{var m;return d((m=i.value)==null?void 0:m.nodeId)??null}),_=Y(()=>({x:(r.value.x-c.value.x)/c.value.zoom,y:(r.value.y-c.value.y)/c.value.zoom})),C=Y(()=>s.value.markerStart?`url(#${In(s.value.markerStart,t)})`:""),v=Y(()=>s.value.markerEnd?`url(#${In(s.value.markerEnd,t)})`:"");return()=>{var m,g,w;if(!p.value||!o.value)return null;const z=o.value.id,I=o.value.type,q=p.value.handleBounds;let j=(q==null?void 0:q[I])??[];if(n.value===kt.Loose){const S=(q==null?void 0:q[I==="source"?"target":"source"])??[];j=[...j,...S]}if(!j)return null;const te=(z?j.find(S=>S.id===z):j[0])??null,W=(te==null?void 0:te.position)??ne.Top,{x:O,y}=tn(p.value,te,W);let U=null;$.value&&(n.value===kt.Strict?U=((m=$.value.handleBounds[I==="source"?"target":"source"])==null?void 0:m.find(S=>{var A;return S.id===((A=i.value)==null?void 0:A.id)}))||null:U=((g=[...$.value.handleBounds.source??[],...$.value.handleBounds.target??[]])==null?void 0:g.find(S=>{var A;return S.id===((A=i.value)==null?void 0:A.id)}))||null);const h=((w=i.value)==null?void 0:w.position)??(W?$i[W]:null);if(!W||!h)return null;const T=l.value??s.value.type??Tt.Bezier;let b="";const R={sourceX:O,sourceY:y,sourcePosition:W,targetX:_.value.x,targetY:_.value.y,targetPosition:h};return T===Tt.Bezier?[b]=Ia(R):T===Tt.Step?[b]=ko({...R,borderRadius:0}):T===Tt.SmoothStep?[b]=ko(R):T===Tt.SimpleBezier?[b]=Da(R):b=`M${O},${y} ${_.value.x},${_.value.y}`,ke("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},ke("g",{class:"vue-flow__connection"},f?ke(f,{sourceX:O,sourceY:y,sourcePosition:W,targetX:_.value.x,targetY:_.value.y,targetPosition:h,sourceNode:p.value,sourceHandle:te,targetNode:$.value,targetHandle:U,markerEnd:v.value,markerStart:C.value,connectionStatus:u.value}):ke("path",{d:b,class:[s.value.class,u.value,"vue-flow__connection-path"],style:{...a.value,...s.value.style},"marker-end":v.value,"marker-start":C.value})))}}}),Lh=Vh,Fh=["id","markerWidth","markerHeight","markerUnits","orient"],Hh={name:"MarkerType",compatConfig:{MODE:3}},Yh=ve({...Hh,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(G(),ee("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===B(xi).ArrowClosed?(G(),ee("polyline",{key:0,style:de({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):ye("",!0),t.type===B(xi).Arrow?(G(),ee("polyline",{key:1,style:de({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):ye("",!0)],8,Fh))}}),Xh={class:"vue-flow__marker vue-flow__container","aria-hidden":"true"},Gh={name:"MarkerDefinitions",compatConfig:{MODE:3}},Uh=ve({...Gh,setup(e){const{id:t,edges:n,connectionLineOptions:o,defaultMarkerColor:i}=Ce(),r=Y(()=>{const l=new Set,a=[],s=u=>{if(u){const c=In(u,t);l.has(c)||(typeof u=="object"?a.push({...u,id:c,color:u.color||i.value}):a.push({id:c,color:i.value,type:u}),l.add(c))}};for(const u of[o.value.markerEnd,o.value.markerStart])s(u);for(const u of n.value)for(const c of[u.markerStart,u.markerEnd])s(c);return a.sort((u,c)=>u.id.localeCompare(c.id))});return(l,a)=>(G(),ee("svg",Xh,[E("defs",null,[(G(!0),ee(Pe,null,ft(r.value,s=>(G(),_e(Yh,{id:s.id,key:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,"stroke-width":s.strokeWidth,orient:s.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))])]))}}),Zh={name:"Edges",compatConfig:{MODE:3}},qh=ve({...Zh,setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:o}=Ce();return(i,r)=>(G(),ee(Pe,null,[pe(Uh),(G(!0),ee(Pe,null,ft(B(n),l=>(G(),ee("svg",{key:l.id,class:"vue-flow__edges vue-flow__container",style:de({zIndex:B(pf)(l,B(t),B(o))})},[pe(B(Oh),{id:l.id},null,8,["id"])],4))),128)),pe(B(Lh))],64))}}),Wh=ve({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:o,nodesSelectionActive:i,multiSelectionActive:r,emits:l,removeSelectedNodes:a,addSelectedNodes:s,updateNodeDimensions:u,onUpdateNodeInternals:c,getNodeTypes:d,nodeExtent:f,elevateNodesOnSelect:p,disableKeyboardA11y:$,ariaLiveMessage:_,snapToGrid:C,snapGrid:v,nodeDragThreshold:m,nodesDraggable:g,elementsSelectable:w,nodesConnectable:z,nodesFocusable:I,hooks:q}=Ce(),j=fe(null);Ot(Sa,j),Ot(_a,e.id);const te=Yt(Lo),W=rn(),O=ka(),{node:y,parentNode:U}=Ea(e.id),{emit:h,on:T}=If(y,l),b=Ee(()=>typeof y.draggable>"u"?g.value:y.draggable),R=Ee(()=>typeof y.selectable>"u"?w.value:y.selectable),S=Ee(()=>typeof y.connectable>"u"?z.value:y.connectable),A=Ee(()=>typeof y.focusable>"u"?I.value:y.focusable),D=Y(()=>R.value||b.value||q.value.nodeClick.hasListeners()||q.value.nodeDoubleClick.hasListeners()||q.value.nodeMouseEnter.hasListeners()||q.value.nodeMouseMove.hasListeners()||q.value.nodeMouseLeave.hasListeners()),H=Ee(()=>!!y.dimensions.width&&!!y.dimensions.height),V=Y(()=>{const M=y.type||"default",k=te==null?void 0:te[`node-${M}`];if(k)return k;let Z=y.template||d.value[M];if(typeof Z=="string"&&W){const ae=Object.keys(W.appContext.components);ae&&ae.includes(M)&&(Z=kl(M,!1))}return Z&&typeof Z!="string"?Z:(l.error(new Ae(De.NODE_TYPE_MISSING,Z)),!1)}),X=$a({id:e.id,el:j,disabled:()=>!b.value,selectable:R,dragHandle:()=>y.dragHandle,onStart(M){h.dragStart(M)},onDrag(M){h.drag(M)},onStop(M){h.dragStop(M)},onClick(M){N(M)}}),F=Y(()=>y.class instanceof Function?y.class(y):y.class),J=Y(()=>{const M=(y.style instanceof Function?y.style(y):y.style)||{},k=y.width instanceof Function?y.width(y):y.width,Z=y.height instanceof Function?y.height(y):y.height;return!M.width&&k&&(M.width=typeof k=="string"?k:`${k}px`),!M.height&&Z&&(M.height=typeof Z=="string"?Z:`${Z}px`),M}),P=Ee(()=>Number(y.zIndex??J.value.zIndex??0));return c(M=>{(M.includes(e.id)||!M.length)&&K()}),Ve(()=>{xe(()=>y.hidden,(M=!1,k,Z)=>{!M&&j.value&&(e.resizeObserver.observe(j.value),Z(()=>{j.value&&e.resizeObserver.unobserve(j.value)}))},{immediate:!0,flush:"post"})}),xe([()=>y.type,()=>y.sourcePosition,()=>y.targetPosition],()=>{ot(()=>{u([{id:e.id,nodeElement:j.value,forceUpdate:!0}])})}),xe([()=>y.position.x,()=>y.position.y,()=>{var M;return(M=U.value)==null?void 0:M.computedPosition.x},()=>{var M;return(M=U.value)==null?void 0:M.computedPosition.y},()=>{var M;return(M=U.value)==null?void 0:M.computedPosition.z},P,()=>y.selected,()=>y.dimensions.height,()=>y.dimensions.width,()=>{var M;return(M=U.value)==null?void 0:M.dimensions.height},()=>{var M;return(M=U.value)==null?void 0:M.dimensions.width}],([M,k,Z,ae,se,le])=>{const ue={x:M,y:k,z:le+(p.value&&y.selected?1e3:0)};typeof Z<"u"&&typeof ae<"u"?y.computedPosition=lf({x:Z,y:ae,z:se},ue):y.computedPosition=ue},{flush:"post",immediate:!0}),xe([()=>y.extent,f],([M,k],[Z,ae])=>{(M!==Z||k!==ae)&&L()}),y.extent==="parent"||typeof y.extent=="object"&&"range"in y.extent&&y.extent.range==="parent"?pi(()=>H).toBe(!0).then(L):L(),()=>y.hidden?null:ke("div",{ref:j,"data-id":y.id,class:["vue-flow__node",`vue-flow__node-${V.value===!1?"default":y.type||"default"}`,{[n.value]:b.value,dragging:X==null?void 0:X.value,draggable:b.value,selected:y.selected,selectable:R.value,parent:y.isParent},F.value],style:{visibility:H.value?"visible":"hidden",zIndex:y.computedPosition.z??P.value,transform:`translate(${y.computedPosition.x}px,${y.computedPosition.y}px)`,pointerEvents:D.value?"all":"none",...J.value},tabIndex:A.value?0:void 0,role:A.value?"group":void 0,"aria-describedby":$.value?void 0:`${la}-${t}`,"aria-label":y.ariaLabel,"aria-roledescription":"node",...y.domAttributes,onMouseenter:Q,onMousemove:oe,onMouseleave:ie,onContextmenu:ce,onClick:N,onDblclick:ge,onKeydown:x},[ke(V.value===!1?d.value.default:V.value,{id:y.id,type:y.type,data:y.data,events:{...y.events,...T},selected:y.selected,resizing:y.resizing,dragging:X.value,connectable:S.value,position:y.computedPosition,dimensions:y.dimensions,isValidTargetPos:y.isValidTargetPos,isValidSourcePos:y.isValidSourcePos,parent:y.parentNode,parentNodeId:y.parentNode,zIndex:y.computedPosition.z??P.value,targetPosition:y.targetPosition,sourcePosition:y.sourcePosition,label:y.label,dragHandle:y.dragHandle,onUpdateNodeInternals:K})]);function L(){const M=y.computedPosition,{computedPosition:k,position:Z}=Ui(y,C.value?Vo(M,v.value):M,l.error,f.value,U.value);(y.computedPosition.x!==k.x||y.computedPosition.y!==k.y)&&(y.computedPosition={...y.computedPosition,...k}),(y.position.x!==Z.x||y.position.y!==Z.y)&&(y.position=Z)}function K(){j.value&&u([{id:e.id,nodeElement:j.value,forceUpdate:!0}])}function Q(M){X!=null&&X.value||h.mouseEnter({event:M,node:y})}function oe(M){X!=null&&X.value||h.mouseMove({event:M,node:y})}function ie(M){X!=null&&X.value||h.mouseLeave({event:M,node:y})}function ce(M){return h.contextMenu({event:M,node:y})}function ge(M){return h.doubleClick({event:M,node:y})}function N(M){R.value&&(!o.value||!b.value||m.value>0)&&Ni(y,r.value,s,a,i,!1,j.value),h.click({event:M,node:y})}function x(M){if(!(_i(M)||$.value))if(sa.includes(M.key)&&R.value){const k=M.key==="Escape";Ni(y,r.value,s,a,i,k,j.value)}else b.value&&y.selected&&Kt[M.key]&&(M.preventDefault(),_.value=`Moved selected node ${M.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~y.position.x}, y: ${~~y.position.y}`,O({x:Kt[M.key].x,y:Kt[M.key].y},M.shiftKey))}}}),Kh=Wh;function jh(e={includeHiddenNodes:!1}){const{nodes:t}=Ce();return Y(()=>{if(t.value.length===0)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&((n==null?void 0:n.handleBounds)===void 0||n.dimensions.width===0||n.dimensions.height===0))return!1;return!0})}const Jh={class:"vue-flow__nodes vue-flow__container"},Qh={name:"Nodes",compatConfig:{MODE:3}},eg=ve({...Qh,setup(e){const{getNodes:t,updateNodeDimensions:n,emits:o}=Ce(),i=jh(),r=fe();return xe(i,l=>{l&&ot(()=>{o.nodesInitialized(t.value)})},{immediate:!0}),Ve(()=>{r.value=new ResizeObserver(l=>{const a=l.map(s=>({id:s.target.getAttribute("data-id"),nodeElement:s.target,forceUpdate:!0}));ot(()=>n(a))})}),El(()=>{var l;return(l=r.value)==null?void 0:l.disconnect()}),(l,a)=>(G(),ee("div",Jh,[r.value?(G(!0),ee(Pe,{key:0},ft(B(t),(s,u,c,d)=>{const f=[s.id];if(d&&d.key===s.id&&gs(d,f))return d;const p=(G(),_e(B(Kh),{id:s.id,key:s.id,"resize-observer":r.value},null,8,["id","resize-observer"]));return p.memo=f,p},a,0),128)):ye("",!0)]))}});function tg(){const{emits:e}=Ce();Ve(()=>{if(xa()){const t=document.querySelector(".vue-flow__pane");t&&window.getComputedStyle(t).zIndex!=="1"&&e.error(new Ae(De.MISSING_STYLES))}})}const ng=E("div",{class:"vue-flow__edge-labels"},null,-1),og={name:"VueFlow",compatConfig:{MODE:3}},ig=ve({...og,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{type:[Boolean,null],default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","paneReady","init","updateNodeInternals","error","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeUpdate","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdateEnd","nodeContextMenu","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeDoubleClick","nodeClick","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,i=Nl(),r=Wo(o,"modelValue",n),l=Wo(o,"nodes",n),a=Wo(o,"edges",n),s=Ce(o),u=zf({modelValue:r,nodes:l,edges:a},o,s);return Bf(n,s.hooks),Ah(),tg(),Ot(Lo,i),Mt(u),t(s),(c,d)=>(G(),ee("div",{ref:B(s).vueFlowRef,class:"vue-flow"},[pe(Ch,null,{default:Xe(()=>[pe(qh),ng,pe(eg),Te(c.$slots,"zoom-pane")]),_:3}),Te(c.$slots,"default"),pe(Ph)],512))}}),rg={name:"Panel",compatConfig:{MODE:3}},Wi=ve({...rg,props:{position:{}},setup(e){const t=e,{userSelectionActive:n}=Ce(),o=Y(()=>`${t.position}`.split("-"));return(i,r)=>(G(),ee("div",{class:Se(["vue-flow__panel",o.value]),style:de({pointerEvents:B(n)?"none":"all"})},[Te(i.$slots,"default")],6))}});var gt=(e=>(e.Lines="lines",e.Dots="dots",e))(gt||{});const Aa=function({dimensions:e,size:t,color:n}){return ke("path",{stroke:n,"stroke-width":t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})},za=function({radius:e,color:t}){return ke("circle",{cx:e,cy:e,r:e,fill:t})};gt.Lines+"",gt.Dots+"";const lg={[gt.Dots]:"#81818a",[gt.Lines]:"#eee"},ag=["id","x","y","width","height","patternTransform"],sg={key:2,height:"100",width:"100"},ug=["fill"],cg=["x","y","fill"],dg={name:"Background",compatConfig:{MODE:3}},pg=ve({...dg,props:{id:{},variant:{default:()=>gt.Dots},gap:{default:20},size:{default:1},lineWidth:{default:1},patternColor:{},color:{},bgColor:{},height:{default:100},width:{default:100},x:{default:0},y:{default:0},offset:{default:0}},setup(e){const{id:t,viewport:n}=Ce(),o=Y(()=>{const l=n.value.zoom,[a,s]=Array.isArray(e.gap)?e.gap:[e.gap,e.gap],u=[a*l||1,s*l||1],c=e.size*l,[d,f]=Array.isArray(e.offset)?e.offset:[e.offset,e.offset],p=[d*l||1+u[0]/2,f*l||1+u[1]/2];return{scaledGap:u,offset:p,size:c}}),i=Ee(()=>`pattern-${t}${e.id?`-${e.id}`:""}`),r=Ee(()=>e.color||e.patternColor||lg[e.variant||gt.Dots]);return(l,a)=>(G(),ee("svg",{class:"vue-flow__background vue-flow__container",style:de({height:`${l.height>100?100:l.height}%`,width:`${l.width>100?100:l.width}%`})},[Te(l.$slots,"pattern-container",{id:i.value},()=>[E("pattern",{id:i.value,x:B(n).x%o.value.scaledGap[0],y:B(n).y%o.value.scaledGap[1],width:o.value.scaledGap[0],height:o.value.scaledGap[1],patternTransform:`translate(-${o.value.offset[0]},-${o.value.offset[1]})`,patternUnits:"userSpaceOnUse"},[Te(l.$slots,"pattern",{},()=>[l.variant===B(gt).Lines?(G(),_e(B(Aa),{key:0,size:l.lineWidth,color:r.value,dimensions:o.value.scaledGap},null,8,["size","color","dimensions"])):l.variant===B(gt).Dots?(G(),_e(B(za),{key:1,color:r.value,radius:o.value.size/2},null,8,["color","radius"])):ye("",!0),l.bgColor?(G(),ee("svg",sg,[E("rect",{width:"100%",height:"100%",fill:l.bgColor},null,8,ug)])):ye("",!0)])],8,ag)]),E("rect",{x:l.x,y:l.y,width:"100%",height:"100%",fill:`url(#${i.value})`},null,8,cg),Te(l.$slots,"default",{id:i.value})],4))}}),fg={name:"ControlButton",compatConfig:{MODE:3}},hg=(e,t)=>{const n=e.__vccOpts||e;for(const[o,i]of t)n[o]=i;return n},gg={type:"button",class:"vue-flow__controls-button"};function mg(e,t,n,o,i,r){return G(),ee("button",gg,[Te(e.$slots,"default")])}const Jn=hg(fg,[["render",mg]]),yg={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},vg=E("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1),bg=[vg];function wg(e,t){return G(),ee("svg",yg,bg)}const xg={render:wg},_g={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},Sg=E("path",{d:"M0 0h32v4.2H0z"},null,-1),$g=[Sg];function Ng(e,t){return G(),ee("svg",_g,$g)}const Eg={render:Ng},kg={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},Cg=E("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1),Mg=[Cg];function Tg(e,t){return G(),ee("svg",kg,Mg)}const Ig={render:Tg},Dg={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Pg=E("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1),Ag=[Pg];function zg(e,t){return G(),ee("svg",Dg,Ag)}const Rg={render:zg},Bg={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Og=E("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1),Vg=[Og];function Lg(e,t){return G(),ee("svg",Bg,Vg)}const Fg={render:Lg},Hg={name:"Controls",compatConfig:{MODE:3}},Yg=ve({...Hg,props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:{},position:{default:()=>ra.BottomLeft}},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(e,{emit:t}){const{nodesDraggable:n,nodesConnectable:o,elementsSelectable:i,setInteractive:r,zoomIn:l,zoomOut:a,fitView:s,viewport:u,minZoom:c,maxZoom:d}=Ce(),f=Ee(()=>n.value||o.value||i.value),p=Ee(()=>u.value.zoom<=c.value),$=Ee(()=>u.value.zoom>=d.value);function _(){l(),t("zoomIn")}function C(){a(),t("zoomOut")}function v(){s(e.fitViewParams),t("fitView")}function m(){r(!f.value),t("interactionChange",!f.value)}return(g,w)=>(G(),_e(B(Wi),{class:"vue-flow__controls",position:g.position},{default:Xe(()=>[Te(g.$slots,"top"),g.showZoom?(G(),ee(Pe,{key:0},[Te(g.$slots,"control-zoom-in",{},()=>[pe(Jn,{class:"vue-flow__controls-zoomin",disabled:$.value,onClick:_},{default:Xe(()=>[Te(g.$slots,"icon-zoom-in",{},()=>[(G(),_e(dt(B(xg))))])]),_:3},8,["disabled"])]),Te(g.$slots,"control-zoom-out",{},()=>[pe(Jn,{class:"vue-flow__controls-zoomout",disabled:p.value,onClick:C},{default:Xe(()=>[Te(g.$slots,"icon-zoom-out",{},()=>[(G(),_e(dt(B(Eg))))])]),_:3},8,["disabled"])])],64)):ye("",!0),g.showFitView?Te(g.$slots,"control-fit-view",{key:1},()=>[pe(Jn,{class:"vue-flow__controls-fitview",onClick:v},{default:Xe(()=>[Te(g.$slots,"icon-fit-view",{},()=>[(G(),_e(dt(B(Ig))))])]),_:3})]):ye("",!0),g.showInteractive?Te(g.$slots,"control-interactive",{key:2},()=>[g.showInteractive?(G(),_e(Jn,{key:0,class:"vue-flow__controls-interactive",onClick:m},{default:Xe(()=>[f.value?Te(g.$slots,"icon-unlock",{key:0},()=>[(G(),_e(dt(B(Fg))))]):ye("",!0),f.value?ye("",!0):Te(g.$slots,"icon-lock",{key:1},()=>[(G(),_e(dt(B(Rg))))])]),_:3})):ye("",!0)]):ye("",!0),Te(g.$slots,"default")]),_:3},8,["position"]))}});var Xg={value:()=>{}};function Ki(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new co(n)}function co(e){this._=e}function Gg(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}co.prototype=Ki.prototype={constructor:co,on:function(e,t){var n=this._,o=Gg(e+"",n),i,r=-1,l=o.length;if(arguments.length<2){for(;++r<l;)if((i=(e=o[r]).type)&&(i=Ug(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++r<l;)if(i=(e=o[r]).type)n[i]=Zr(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Zr(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new co(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,r;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)}};function Ug(e,t){for(var n=0,o=e.length,i;n<o;++n)if((i=e[n]).name===t)return i.value}function Zr(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=Xg,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ei="http://www.w3.org/1999/xhtml";const qr={svg:"http://www.w3.org/2000/svg",xhtml:Ei,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Xo(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),qr.hasOwnProperty(t)?{space:qr[t],local:e}:e}function Zg(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ei&&t.documentElement.namespaceURI===Ei?t.createElement(e):t.createElementNS(n,e)}}function qg(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ra(e){var t=Xo(e);return(t.local?qg:Zg)(t)}function Wg(){}function ji(e){return e==null?Wg:function(){return this.querySelector(e)}}function Kg(e){typeof e!="function"&&(e=ji(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],l=r.length,a=o[i]=new Array(l),s,u,c=0;c<l;++c)(s=r[c])&&(u=e.call(s,s.__data__,c,r))&&("__data__"in s&&(u.__data__=s.__data__),a[c]=u);return new Ye(o,this._parents)}function jg(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Jg(){return[]}function Ba(e){return e==null?Jg:function(){return this.querySelectorAll(e)}}function Qg(e){return function(){return jg(e.apply(this,arguments))}}function em(e){typeof e=="function"?e=Qg(e):e=Ba(e);for(var t=this._groups,n=t.length,o=[],i=[],r=0;r<n;++r)for(var l=t[r],a=l.length,s,u=0;u<a;++u)(s=l[u])&&(o.push(e.call(s,s.__data__,u,l)),i.push(s));return new Ye(o,i)}function Oa(e){return function(){return this.matches(e)}}function Va(e){return function(t){return t.matches(e)}}var tm=Array.prototype.find;function nm(e){return function(){return tm.call(this.children,e)}}function om(){return this.firstElementChild}function im(e){return this.select(e==null?om:nm(typeof e=="function"?e:Va(e)))}var rm=Array.prototype.filter;function lm(){return Array.from(this.children)}function am(e){return function(){return rm.call(this.children,e)}}function sm(e){return this.selectAll(e==null?lm:am(typeof e=="function"?e:Va(e)))}function um(e){typeof e!="function"&&(e=Oa(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],l=r.length,a=o[i]=[],s,u=0;u<l;++u)(s=r[u])&&e.call(s,s.__data__,u,r)&&a.push(s);return new Ye(o,this._parents)}function La(e){return new Array(e.length)}function cm(){return new Ye(this._enter||this._groups.map(La),this._parents)}function Co(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Co.prototype={constructor:Co,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function dm(e){return function(){return e}}function pm(e,t,n,o,i,r){for(var l=0,a,s=t.length,u=r.length;l<u;++l)(a=t[l])?(a.__data__=r[l],o[l]=a):n[l]=new Co(e,r[l]);for(;l<s;++l)(a=t[l])&&(i[l]=a)}function fm(e,t,n,o,i,r,l){var a,s,u=new Map,c=t.length,d=r.length,f=new Array(c),p;for(a=0;a<c;++a)(s=t[a])&&(f[a]=p=l.call(s,s.__data__,a,t)+"",u.has(p)?i[a]=s:u.set(p,s));for(a=0;a<d;++a)p=l.call(e,r[a],a,r)+"",(s=u.get(p))?(o[a]=s,s.__data__=r[a],u.delete(p)):n[a]=new Co(e,r[a]);for(a=0;a<c;++a)(s=t[a])&&u.get(f[a])===s&&(i[a]=s)}function hm(e){return e.__data__}function gm(e,t){if(!arguments.length)return Array.from(this,hm);var n=t?fm:pm,o=this._parents,i=this._groups;typeof e!="function"&&(e=dm(e));for(var r=i.length,l=new Array(r),a=new Array(r),s=new Array(r),u=0;u<r;++u){var c=o[u],d=i[u],f=d.length,p=mm(e.call(c,c&&c.__data__,u,o)),$=p.length,_=a[u]=new Array($),C=l[u]=new Array($),v=s[u]=new Array(f);n(c,d,_,C,v,p,t);for(var m=0,g=0,w,z;m<$;++m)if(w=_[m]){for(m>=g&&(g=m+1);!(z=C[g])&&++g<$;);w._next=z||null}}return l=new Ye(l,o),l._enter=a,l._exit=s,l}function mm(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ym(){return new Ye(this._exit||this._groups.map(La),this._parents)}function vm(e,t,n){var o=this.enter(),i=this,r=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?r.remove():n(r),o&&i?o.merge(i).order():i}function bm(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,r=o.length,l=Math.min(i,r),a=new Array(i),s=0;s<l;++s)for(var u=n[s],c=o[s],d=u.length,f=a[s]=new Array(d),p,$=0;$<d;++$)(p=u[$]||c[$])&&(f[$]=p);for(;s<i;++s)a[s]=n[s];return new Ye(a,this._parents)}function wm(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],i=o.length-1,r=o[i],l;--i>=0;)(l=o[i])&&(r&&l.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(l,r),r=l);return this}function xm(e){e||(e=_m);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,o=n.length,i=new Array(o),r=0;r<o;++r){for(var l=n[r],a=l.length,s=i[r]=new Array(a),u,c=0;c<a;++c)(u=l[c])&&(s[c]=u);s.sort(t)}return new Ye(i,this._parents).order()}function _m(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Sm(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function $m(){return Array.from(this)}function Nm(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length;i<r;++i){var l=o[i];if(l)return l}return null}function Em(){let e=0;for(const t of this)++e;return e}function km(){return!this.node()}function Cm(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i=t[n],r=0,l=i.length,a;r<l;++r)(a=i[r])&&e.call(a,a.__data__,r,i);return this}function Mm(e){return function(){this.removeAttribute(e)}}function Tm(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Im(e,t){return function(){this.setAttribute(e,t)}}function Dm(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Pm(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Am(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function zm(e,t){var n=Xo(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?Tm:Mm:typeof t=="function"?n.local?Am:Pm:n.local?Dm:Im)(n,t))}function Fa(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Rm(e){return function(){this.style.removeProperty(e)}}function Bm(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Om(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Vm(e,t,n){return arguments.length>1?this.each((t==null?Rm:typeof t=="function"?Om:Bm)(e,t,n??"")):nn(this.node(),e)}function nn(e,t){return e.style.getPropertyValue(t)||Fa(e).getComputedStyle(e,null).getPropertyValue(t)}function Lm(e){return function(){delete this[e]}}function Fm(e,t){return function(){this[e]=t}}function Hm(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ym(e,t){return arguments.length>1?this.each((t==null?Lm:typeof t=="function"?Hm:Fm)(e,t)):this.node()[e]}function Ha(e){return e.trim().split(/^|\s+/)}function Ji(e){return e.classList||new Ya(e)}function Ya(e){this._node=e,this._names=Ha(e.getAttribute("class")||"")}Ya.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Xa(e,t){for(var n=Ji(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function Ga(e,t){for(var n=Ji(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function Xm(e){return function(){Xa(this,e)}}function Gm(e){return function(){Ga(this,e)}}function Um(e,t){return function(){(t.apply(this,arguments)?Xa:Ga)(this,e)}}function Zm(e,t){var n=Ha(e+"");if(arguments.length<2){for(var o=Ji(this.node()),i=-1,r=n.length;++i<r;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Um:t?Xm:Gm)(n,t))}function qm(){this.textContent=""}function Wm(e){return function(){this.textContent=e}}function Km(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function jm(e){return arguments.length?this.each(e==null?qm:(typeof e=="function"?Km:Wm)(e)):this.node().textContent}function Jm(){this.innerHTML=""}function Qm(e){return function(){this.innerHTML=e}}function ey(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ty(e){return arguments.length?this.each(e==null?Jm:(typeof e=="function"?ey:Qm)(e)):this.node().innerHTML}function ny(){this.nextSibling&&this.parentNode.appendChild(this)}function oy(){return this.each(ny)}function iy(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ry(){return this.each(iy)}function ly(e){var t=typeof e=="function"?e:Ra(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ay(){return null}function sy(e,t){var n=typeof e=="function"?e:Ra(e),o=t==null?ay:typeof t=="function"?t:ji(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function uy(){var e=this.parentNode;e&&e.removeChild(this)}function cy(){return this.each(uy)}function dy(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function py(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function fy(e){return this.select(e?py:dy)}function hy(e){return arguments.length?this.property("__data__",e):this.node().__data__}function gy(e){return function(t){e.call(this,t,this.__data__)}}function my(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function yy(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,i=t.length,r;n<i;++n)r=t[n],(!e.type||r.type===e.type)&&r.name===e.name?this.removeEventListener(r.type,r.listener,r.options):t[++o]=r;++o?t.length=o:delete this.__on}}}function vy(e,t,n){return function(){var o=this.__on,i,r=gy(t);if(o){for(var l=0,a=o.length;l<a;++l)if((i=o[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=r,i.options=n),i.value=t;return}}this.addEventListener(e.type,r,n),i={type:e.type,name:e.name,value:t,listener:r,options:n},o?o.push(i):this.__on=[i]}}function by(e,t,n){var o=my(e+""),i,r=o.length,l;if(arguments.length<2){var a=this.node().__on;if(a){for(var s=0,u=a.length,c;s<u;++s)for(i=0,c=a[s];i<r;++i)if((l=o[i]).type===c.type&&l.name===c.name)return c.value}return}for(a=t?vy:yy,i=0;i<r;++i)this.each(a(o[i],t,n));return this}function Ua(e,t,n){var o=Fa(e),i=o.CustomEvent;typeof i=="function"?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function wy(e,t){return function(){return Ua(this,e,t)}}function xy(e,t){return function(){return Ua(this,e,t.apply(this,arguments))}}function _y(e,t){return this.each((typeof t=="function"?xy:wy)(e,t))}function*Sy(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length,l;i<r;++i)(l=o[i])&&(yield l)}var Za=[null];function Ye(e,t){this._groups=e,this._parents=t}function Fn(){return new Ye([[document.documentElement]],Za)}function $y(){return this}Ye.prototype=Fn.prototype={constructor:Ye,select:Kg,selectAll:em,selectChild:im,selectChildren:sm,filter:um,data:gm,enter:cm,exit:ym,join:vm,merge:bm,selection:$y,order:wm,sort:xm,call:Sm,nodes:$m,node:Nm,size:Em,empty:km,each:Cm,attr:zm,style:Vm,property:Ym,classed:Zm,text:jm,html:ty,raise:oy,lower:ry,append:ly,insert:sy,remove:cy,clone:fy,datum:hy,on:by,dispatch:_y,[Symbol.iterator]:Sy};function Nt(e){return typeof e=="string"?new Ye([[document.querySelector(e)]],[document.documentElement]):new Ye([[e]],Za)}function Ny(e){let t;for(;t=e.sourceEvent;)e=t;return e}function _t(e,t){if(e=Ny(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const ki={capture:!0,passive:!1};function Ci(e){e.preventDefault(),e.stopImmediatePropagation()}function Ey(e){var t=e.document.documentElement,n=Nt(e).on("dragstart.drag",Ci,ki);"onselectstart"in t?n.on("selectstart.drag",Ci,ki):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ky(e,t){var n=e.document.documentElement,o=Nt(e).on("dragstart.drag",null);t&&(o.on("click.drag",Ci,ki),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Qi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function qa(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Hn(){}var Pn=.7,Mo=1/Pn,jt="\\s*([+-]?\\d+)\\s*",An="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Cy=/^#([0-9a-f]{3,8})$/,My=new RegExp(`^rgb\\(${jt},${jt},${jt}\\)$`),Ty=new RegExp(`^rgb\\(${rt},${rt},${rt}\\)$`),Iy=new RegExp(`^rgba\\(${jt},${jt},${jt},${An}\\)$`),Dy=new RegExp(`^rgba\\(${rt},${rt},${rt},${An}\\)$`),Py=new RegExp(`^hsl\\(${An},${rt},${rt}\\)$`),Ay=new RegExp(`^hsla\\(${An},${rt},${rt},${An}\\)$`),Wr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Qi(Hn,zn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Kr,formatHex:Kr,formatHex8:zy,formatHsl:Ry,formatRgb:jr,toString:jr});function Kr(){return this.rgb().formatHex()}function zy(){return this.rgb().formatHex8()}function Ry(){return Wa(this).formatHsl()}function jr(){return this.rgb().formatRgb()}function zn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Cy.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Jr(t):n===3?new Fe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Qn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Qn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=My.exec(e))?new Fe(t[1],t[2],t[3],1):(t=Ty.exec(e))?new Fe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Iy.exec(e))?Qn(t[1],t[2],t[3],t[4]):(t=Dy.exec(e))?Qn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Py.exec(e))?tl(t[1],t[2]/100,t[3]/100,1):(t=Ay.exec(e))?tl(t[1],t[2]/100,t[3]/100,t[4]):Wr.hasOwnProperty(e)?Jr(Wr[e]):e==="transparent"?new Fe(NaN,NaN,NaN,0):null}function Jr(e){return new Fe(e>>16&255,e>>8&255,e&255,1)}function Qn(e,t,n,o){return o<=0&&(e=t=n=NaN),new Fe(e,t,n,o)}function By(e){return e instanceof Hn||(e=zn(e)),e?(e=e.rgb(),new Fe(e.r,e.g,e.b,e.opacity)):new Fe}function Mi(e,t,n,o){return arguments.length===1?By(e):new Fe(e,t,n,o??1)}function Fe(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Qi(Fe,Mi,qa(Hn,{brighter(e){return e=e==null?Mo:Math.pow(Mo,e),new Fe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Pn:Math.pow(Pn,e),new Fe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Fe(Bt(this.r),Bt(this.g),Bt(this.b),To(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Qr,formatHex:Qr,formatHex8:Oy,formatRgb:el,toString:el}));function Qr(){return`#${At(this.r)}${At(this.g)}${At(this.b)}`}function Oy(){return`#${At(this.r)}${At(this.g)}${At(this.b)}${At((isNaN(this.opacity)?1:this.opacity)*255)}`}function el(){const e=To(this.opacity);return`${e===1?"rgb(":"rgba("}${Bt(this.r)}, ${Bt(this.g)}, ${Bt(this.b)}${e===1?")":`, ${e})`}`}function To(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Bt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function At(e){return e=Bt(e),(e<16?"0":"")+e.toString(16)}function tl(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new qe(e,t,n,o)}function Wa(e){if(e instanceof qe)return new qe(e.h,e.s,e.l,e.opacity);if(e instanceof Hn||(e=zn(e)),!e)return new qe;if(e instanceof qe)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),r=Math.max(t,n,o),l=NaN,a=r-i,s=(r+i)/2;return a?(t===r?l=(n-o)/a+(n<o)*6:n===r?l=(o-t)/a+2:l=(t-n)/a+4,a/=s<.5?r+i:2-r-i,l*=60):a=s>0&&s<1?0:l,new qe(l,a,s,e.opacity)}function Vy(e,t,n,o){return arguments.length===1?Wa(e):new qe(e,t,n,o??1)}function qe(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Qi(qe,Vy,qa(Hn,{brighter(e){return e=e==null?Mo:Math.pow(Mo,e),new qe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Pn:Math.pow(Pn,e),new qe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new Fe(li(e>=240?e-240:e+120,i,o),li(e,i,o),li(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new qe(nl(this.h),eo(this.s),eo(this.l),To(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=To(this.opacity);return`${e===1?"hsl(":"hsla("}${nl(this.h)}, ${eo(this.s)*100}%, ${eo(this.l)*100}%${e===1?")":`, ${e})`}`}}));function nl(e){return e=(e||0)%360,e<0?e+360:e}function eo(e){return Math.max(0,Math.min(1,e||0))}function li(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ka=e=>()=>e;function Ly(e,t){return function(n){return e+n*t}}function Fy(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Hy(e){return(e=+e)==1?ja:function(t,n){return n-t?Fy(t,n,e):Ka(isNaN(t)?n:t)}}function ja(e,t){var n=t-e;return n?Ly(e,n):Ka(isNaN(e)?t:e)}const ol=function e(t){var n=Hy(t);function o(i,r){var l=n((i=Mi(i)).r,(r=Mi(r)).r),a=n(i.g,r.g),s=n(i.b,r.b),u=ja(i.opacity,r.opacity);return function(c){return i.r=l(c),i.g=a(c),i.b=s(c),i.opacity=u(c),i+""}}return o.gamma=e,o}(1);function $t(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Ti=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ai=new RegExp(Ti.source,"g");function Yy(e){return function(){return e}}function Xy(e){return function(t){return e(t)+""}}function Gy(e,t){var n=Ti.lastIndex=ai.lastIndex=0,o,i,r,l=-1,a=[],s=[];for(e=e+"",t=t+"";(o=Ti.exec(e))&&(i=ai.exec(t));)(r=i.index)>n&&(r=t.slice(n,r),a[l]?a[l]+=r:a[++l]=r),(o=o[0])===(i=i[0])?a[l]?a[l]+=i:a[++l]=i:(a[++l]=null,s.push({i:l,x:$t(o,i)})),n=ai.lastIndex;return n<t.length&&(r=t.slice(n),a[l]?a[l]+=r:a[++l]=r),a.length<2?s[0]?Xy(s[0].x):Yy(t):(t=s.length,function(u){for(var c=0,d;c<t;++c)a[(d=s[c]).i]=d.x(u);return a.join("")})}var il=180/Math.PI,Ii={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ja(e,t,n,o,i,r){var l,a,s;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(s=e*n+t*o)&&(n-=e*s,o-=t*s),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,s/=a),e*o<t*n&&(e=-e,t=-t,s=-s,l=-l),{translateX:i,translateY:r,rotate:Math.atan2(t,e)*il,skewX:Math.atan(s)*il,scaleX:l,scaleY:a}}var to;function Uy(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ii:Ja(t.a,t.b,t.c,t.d,t.e,t.f)}function Zy(e){return e==null||(to||(to=document.createElementNS("http://www.w3.org/2000/svg","g")),to.setAttribute("transform",e),!(e=to.transform.baseVal.consolidate()))?Ii:(e=e.matrix,Ja(e.a,e.b,e.c,e.d,e.e,e.f))}function Qa(e,t,n,o){function i(u){return u.length?u.pop()+" ":""}function r(u,c,d,f,p,$){if(u!==d||c!==f){var _=p.push("translate(",null,t,null,n);$.push({i:_-4,x:$t(u,d)},{i:_-2,x:$t(c,f)})}else(d||f)&&p.push("translate("+d+t+f+n)}function l(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(i(d)+"rotate(",null,o)-2,x:$t(u,c)})):c&&d.push(i(d)+"rotate("+c+o)}function a(u,c,d,f){u!==c?f.push({i:d.push(i(d)+"skewX(",null,o)-2,x:$t(u,c)}):c&&d.push(i(d)+"skewX("+c+o)}function s(u,c,d,f,p,$){if(u!==d||c!==f){var _=p.push(i(p)+"scale(",null,",",null,")");$.push({i:_-4,x:$t(u,d)},{i:_-2,x:$t(c,f)})}else(d!==1||f!==1)&&p.push(i(p)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),r(u.translateX,u.translateY,c.translateX,c.translateY,d,f),l(u.rotate,c.rotate,d,f),a(u.skewX,c.skewX,d,f),s(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(p){for(var $=-1,_=f.length,C;++$<_;)d[(C=f[$]).i]=C.x(p);return d.join("")}}}var qy=Qa(Uy,"px, ","px)","deg)"),Wy=Qa(Zy,", ",")",")"),Ky=1e-12;function rl(e){return((e=Math.exp(e))+1/e)/2}function jy(e){return((e=Math.exp(e))-1/e)/2}function Jy(e){return((e=Math.exp(2*e))-1)/(e+1)}const Qy=function e(t,n,o){function i(r,l){var a=r[0],s=r[1],u=r[2],c=l[0],d=l[1],f=l[2],p=c-a,$=d-s,_=p*p+$*$,C,v;if(_<Ky)v=Math.log(f/u)/t,C=function(q){return[a+q*p,s+q*$,u*Math.exp(t*q*v)]};else{var m=Math.sqrt(_),g=(f*f-u*u+o*_)/(2*u*n*m),w=(f*f-u*u-o*_)/(2*f*n*m),z=Math.log(Math.sqrt(g*g+1)-g),I=Math.log(Math.sqrt(w*w+1)-w);v=(I-z)/t,C=function(q){var j=q*v,te=rl(z),W=u/(n*m)*(te*Jy(t*j+z)-jy(z));return[a+W*p,s+W*$,u*te/rl(t*j+z)]}}return C.duration=v*1e3*t/Math.SQRT2,C}return i.rho=function(r){var l=Math.max(.001,+r),a=l*l,s=a*a;return e(l,a,s)},i}(Math.SQRT2,2,4);var on=0,gn=0,un=0,es=1e3,Io,mn,Do=0,Ht=0,Go=0,Rn=typeof performance=="object"&&performance.now?performance:Date,ts=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function er(){return Ht||(ts(ev),Ht=Rn.now()+Go)}function ev(){Ht=0}function Po(){this._call=this._time=this._next=null}Po.prototype=ns.prototype={constructor:Po,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?er():+n)+(t==null?0:+t),!this._next&&mn!==this&&(mn?mn._next=this:Io=this,mn=this),this._call=e,this._time=n,Di()},stop:function(){this._call&&(this._call=null,this._time=1/0,Di())}};function ns(e,t,n){var o=new Po;return o.restart(e,t,n),o}function tv(){er(),++on;for(var e=Io,t;e;)(t=Ht-e._time)>=0&&e._call.call(void 0,t),e=e._next;--on}function ll(){Ht=(Do=Rn.now())+Go,on=gn=0;try{tv()}finally{on=0,ov(),Ht=0}}function nv(){var e=Rn.now(),t=e-Do;t>es&&(Go-=t,Do=e)}function ov(){for(var e,t=Io,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Io=n);mn=e,Di(o)}function Di(e){if(!on){gn&&(gn=clearTimeout(gn));var t=e-Ht;t>24?(e<1/0&&(gn=setTimeout(ll,e-Rn.now()-Go)),un&&(un=clearInterval(un))):(un||(Do=Rn.now(),un=setInterval(nv,es)),on=1,ts(ll))}}function al(e,t,n){var o=new Po;return t=t==null?0:+t,o.restart(i=>{o.stop(),e(i+t)},t,n),o}var iv=Ki("start","end","cancel","interrupt"),rv=[],os=0,sl=1,Pi=2,po=3,ul=4,Ai=5,fo=6;function Uo(e,t,n,o,i,r){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;lv(e,n,{name:t,index:o,group:i,on:iv,tween:rv,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:os})}function tr(e,t){var n=Je(e,t);if(n.state>os)throw new Error("too late; already scheduled");return n}function st(e,t){var n=Je(e,t);if(n.state>po)throw new Error("too late; already running");return n}function Je(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function lv(e,t,n){var o=e.__transition,i;o[t]=n,n.timer=ns(r,0,n.time);function r(u){n.state=sl,n.timer.restart(l,n.delay,n.time),n.delay<=u&&l(u-n.delay)}function l(u){var c,d,f,p;if(n.state!==sl)return s();for(c in o)if(p=o[c],p.name===n.name){if(p.state===po)return al(l);p.state===ul?(p.state=fo,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete o[c]):+c<t&&(p.state=fo,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete o[c])}if(al(function(){n.state===po&&(n.state=ul,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Pi,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Pi){for(n.state=po,i=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=p);i.length=d+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=Ai,1),d=-1,f=i.length;++d<f;)i[d].call(e,c);n.state===Ai&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=fo,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function ho(e,t){var n=e.__transition,o,i,r=!0,l;if(n){t=t==null?null:t+"";for(l in n){if((o=n[l]).name!==t){r=!1;continue}i=o.state>Pi&&o.state<Ai,o.state=fo,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[l]}r&&delete e.__transition}}function av(e){return this.each(function(){ho(this,e)})}function sv(e,t){var n,o;return function(){var i=st(this,e),r=i.tween;if(r!==n){o=n=r;for(var l=0,a=o.length;l<a;++l)if(o[l].name===t){o=o.slice(),o.splice(l,1);break}}i.tween=o}}function uv(e,t,n){var o,i;if(typeof n!="function")throw new Error;return function(){var r=st(this,e),l=r.tween;if(l!==o){i=(o=l).slice();for(var a={name:t,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===t){i[s]=a;break}s===u&&i.push(a)}r.tween=i}}function cv(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Je(this.node(),n).tween,i=0,r=o.length,l;i<r;++i)if((l=o[i]).name===e)return l.value;return null}return this.each((t==null?sv:uv)(n,e,t))}function nr(e,t,n){var o=e._id;return e.each(function(){var i=st(this,o);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Je(i,o).value[t]}}function is(e,t){var n;return(typeof t=="number"?$t:t instanceof zn?ol:(n=zn(t))?(t=n,ol):Gy)(e,t)}function dv(e){return function(){this.removeAttribute(e)}}function pv(e){return function(){this.removeAttributeNS(e.space,e.local)}}function fv(e,t,n){var o,i=n+"",r;return function(){var l=this.getAttribute(e);return l===i?null:l===o?r:r=t(o=l,n)}}function hv(e,t,n){var o,i=n+"",r;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===o?r:r=t(o=l,n)}}function gv(e,t,n){var o,i,r;return function(){var l,a=n(this),s;return a==null?void this.removeAttribute(e):(l=this.getAttribute(e),s=a+"",l===s?null:l===o&&s===i?r:(i=s,r=t(o=l,a)))}}function mv(e,t,n){var o,i,r;return function(){var l,a=n(this),s;return a==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),s=a+"",l===s?null:l===o&&s===i?r:(i=s,r=t(o=l,a)))}}function yv(e,t){var n=Xo(e),o=n==="transform"?Wy:is;return this.attrTween(e,typeof t=="function"?(n.local?mv:gv)(n,o,nr(this,"attr."+e,t)):t==null?(n.local?pv:dv)(n):(n.local?hv:fv)(n,o,t))}function vv(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function bv(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function wv(e,t){var n,o;function i(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&bv(e,r)),n}return i._value=t,i}function xv(e,t){var n,o;function i(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&vv(e,r)),n}return i._value=t,i}function _v(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Xo(e);return this.tween(n,(o.local?wv:xv)(o,t))}function Sv(e,t){return function(){tr(this,e).delay=+t.apply(this,arguments)}}function $v(e,t){return t=+t,function(){tr(this,e).delay=t}}function Nv(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Sv:$v)(t,e)):Je(this.node(),t).delay}function Ev(e,t){return function(){st(this,e).duration=+t.apply(this,arguments)}}function kv(e,t){return t=+t,function(){st(this,e).duration=t}}function Cv(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ev:kv)(t,e)):Je(this.node(),t).duration}function Mv(e,t){if(typeof t!="function")throw new Error;return function(){st(this,e).ease=t}}function Tv(e){var t=this._id;return arguments.length?this.each(Mv(t,e)):Je(this.node(),t).ease}function Iv(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;st(this,e).ease=n}}function Dv(e){if(typeof e!="function")throw new Error;return this.each(Iv(this._id,e))}function Pv(e){typeof e!="function"&&(e=Oa(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],l=r.length,a=o[i]=[],s,u=0;u<l;++u)(s=r[u])&&e.call(s,s.__data__,u,r)&&a.push(s);return new vt(o,this._parents,this._name,this._id)}function Av(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,r=Math.min(o,i),l=new Array(o),a=0;a<r;++a)for(var s=t[a],u=n[a],c=s.length,d=l[a]=new Array(c),f,p=0;p<c;++p)(f=s[p]||u[p])&&(d[p]=f);for(;a<o;++a)l[a]=t[a];return new vt(l,this._parents,this._name,this._id)}function zv(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Rv(e,t,n){var o,i,r=zv(t)?tr:st;return function(){var l=r(this,e),a=l.on;a!==o&&(i=(o=a).copy()).on(t,n),l.on=i}}function Bv(e,t){var n=this._id;return arguments.length<2?Je(this.node(),n).on.on(e):this.each(Rv(n,e,t))}function Ov(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Vv(){return this.on("end.remove",Ov(this._id))}function Lv(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ji(e));for(var o=this._groups,i=o.length,r=new Array(i),l=0;l<i;++l)for(var a=o[l],s=a.length,u=r[l]=new Array(s),c,d,f=0;f<s;++f)(c=a[f])&&(d=e.call(c,c.__data__,f,a))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,Uo(u[f],t,n,f,u,Je(c,n)));return new vt(r,this._parents,t,n)}function Fv(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ba(e));for(var o=this._groups,i=o.length,r=[],l=[],a=0;a<i;++a)for(var s=o[a],u=s.length,c,d=0;d<u;++d)if(c=s[d]){for(var f=e.call(c,c.__data__,d,s),p,$=Je(c,n),_=0,C=f.length;_<C;++_)(p=f[_])&&Uo(p,t,n,_,f,$);r.push(f),l.push(c)}return new vt(r,l,t,n)}var Hv=Fn.prototype.constructor;function Yv(){return new Hv(this._groups,this._parents)}function Xv(e,t){var n,o,i;return function(){var r=nn(this,e),l=(this.style.removeProperty(e),nn(this,e));return r===l?null:r===n&&l===o?i:i=t(n=r,o=l)}}function rs(e){return function(){this.style.removeProperty(e)}}function Gv(e,t,n){var o,i=n+"",r;return function(){var l=nn(this,e);return l===i?null:l===o?r:r=t(o=l,n)}}function Uv(e,t,n){var o,i,r;return function(){var l=nn(this,e),a=n(this),s=a+"";return a==null&&(s=a=(this.style.removeProperty(e),nn(this,e))),l===s?null:l===o&&s===i?r:(i=s,r=t(o=l,a))}}function Zv(e,t){var n,o,i,r="style."+t,l="end."+r,a;return function(){var s=st(this,e),u=s.on,c=s.value[r]==null?a||(a=rs(t)):void 0;(u!==n||i!==c)&&(o=(n=u).copy()).on(l,i=c),s.on=o}}function qv(e,t,n){var o=(e+="")=="transform"?qy:is;return t==null?this.styleTween(e,Xv(e,o)).on("end.style."+e,rs(e)):typeof t=="function"?this.styleTween(e,Uv(e,o,nr(this,"style."+e,t))).each(Zv(this._id,e)):this.styleTween(e,Gv(e,o,t),n).on("end.style."+e,null)}function Wv(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Kv(e,t,n){var o,i;function r(){var l=t.apply(this,arguments);return l!==i&&(o=(i=l)&&Wv(e,l,n)),o}return r._value=t,r}function jv(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Kv(e,t,n??""))}function Jv(e){return function(){this.textContent=e}}function Qv(e){return function(){var t=e(this);this.textContent=t??""}}function e0(e){return this.tween("text",typeof e=="function"?Qv(nr(this,"text",e)):Jv(e==null?"":e+""))}function t0(e){return function(t){this.textContent=e.call(this,t)}}function n0(e){var t,n;function o(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&t0(i)),t}return o._value=e,o}function o0(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,n0(e))}function i0(){for(var e=this._name,t=this._id,n=ls(),o=this._groups,i=o.length,r=0;r<i;++r)for(var l=o[r],a=l.length,s,u=0;u<a;++u)if(s=l[u]){var c=Je(s,t);Uo(s,e,n,u,l,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new vt(o,this._parents,e,n)}function r0(){var e,t,n=this,o=n._id,i=n.size();return new Promise(function(r,l){var a={value:l},s={value:function(){--i===0&&r()}};n.each(function(){var u=st(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(s)),u.on=t}),i===0&&r()})}var l0=0;function vt(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function ls(){return++l0}var ct=Fn.prototype;vt.prototype={constructor:vt,select:Lv,selectAll:Fv,selectChild:ct.selectChild,selectChildren:ct.selectChildren,filter:Pv,merge:Av,selection:Yv,transition:i0,call:ct.call,nodes:ct.nodes,node:ct.node,size:ct.size,empty:ct.empty,each:ct.each,on:Bv,attr:yv,attrTween:_v,style:qv,styleTween:jv,text:e0,textTween:o0,remove:Vv,tween:cv,delay:Nv,duration:Cv,ease:Tv,easeVarying:Dv,end:r0,[Symbol.iterator]:ct[Symbol.iterator]};function a0(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var s0={time:null,delay:0,duration:250,ease:a0};function u0(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function c0(e){var t,n;e instanceof vt?(t=e._id,e=e._name):(t=ls(),(n=s0).time=er(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,r=0;r<i;++r)for(var l=o[r],a=l.length,s,u=0;u<a;++u)(s=l[u])&&Uo(s,e,t,u,l,n||u0(s,t));return new vt(o,this._parents,e,t)}Fn.prototype.interrupt=av;Fn.prototype.transition=c0;const no=e=>()=>e;function d0(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function mt(e,t,n){this.k=e,this.x=t,this.y=n}mt.prototype={constructor:mt,scale:function(e){return e===1?this:new mt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new mt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var or=new mt(1,0,0);mt.prototype;function si(e){e.stopImmediatePropagation()}function cn(e){e.preventDefault(),e.stopImmediatePropagation()}function p0(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function f0(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function cl(){return this.__zoom||or}function h0(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function g0(){return navigator.maxTouchPoints||"ontouchstart"in this}function m0(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],r=e.invertY(t[0][1])-n[0][1],l=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),l>r?(r+l)/2:Math.min(0,r)||Math.max(0,l))}function y0(){var e=p0,t=f0,n=m0,o=h0,i=g0,r=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],a=250,s=Qy,u=Ki("start","zoom","end"),c,d,f,p=500,$=150,_=0,C=10;function v(h){h.property("__zoom",cl).on("wheel.zoom",j,{passive:!1}).on("mousedown.zoom",te).on("dblclick.zoom",W).filter(i).on("touchstart.zoom",O).on("touchmove.zoom",y).on("touchend.zoom touchcancel.zoom",U).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(h,T,b,R){var S=h.selection?h.selection():h;S.property("__zoom",cl),h!==S?z(h,T,b,R):S.interrupt().each(function(){I(this,arguments).event(R).start().zoom(null,typeof T=="function"?T.apply(this,arguments):T).end()})},v.scaleBy=function(h,T,b,R){v.scaleTo(h,function(){var S=this.__zoom.k,A=typeof T=="function"?T.apply(this,arguments):T;return S*A},b,R)},v.scaleTo=function(h,T,b,R){v.transform(h,function(){var S=t.apply(this,arguments),A=this.__zoom,D=b==null?w(S):typeof b=="function"?b.apply(this,arguments):b,H=A.invert(D),V=typeof T=="function"?T.apply(this,arguments):T;return n(g(m(A,V),D,H),S,l)},b,R)},v.translateBy=function(h,T,b,R){v.transform(h,function(){return n(this.__zoom.translate(typeof T=="function"?T.apply(this,arguments):T,typeof b=="function"?b.apply(this,arguments):b),t.apply(this,arguments),l)},null,R)},v.translateTo=function(h,T,b,R,S){v.transform(h,function(){var A=t.apply(this,arguments),D=this.__zoom,H=R==null?w(A):typeof R=="function"?R.apply(this,arguments):R;return n(or.translate(H[0],H[1]).scale(D.k).translate(typeof T=="function"?-T.apply(this,arguments):-T,typeof b=="function"?-b.apply(this,arguments):-b),A,l)},R,S)};function m(h,T){return T=Math.max(r[0],Math.min(r[1],T)),T===h.k?h:new mt(T,h.x,h.y)}function g(h,T,b){var R=T[0]-b[0]*h.k,S=T[1]-b[1]*h.k;return R===h.x&&S===h.y?h:new mt(h.k,R,S)}function w(h){return[(+h[0][0]+ +h[1][0])/2,(+h[0][1]+ +h[1][1])/2]}function z(h,T,b,R){h.on("start.zoom",function(){I(this,arguments).event(R).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(R).end()}).tween("zoom",function(){var S=this,A=arguments,D=I(S,A).event(R),H=t.apply(S,A),V=b==null?w(H):typeof b=="function"?b.apply(S,A):b,X=Math.max(H[1][0]-H[0][0],H[1][1]-H[0][1]),F=S.__zoom,J=typeof T=="function"?T.apply(S,A):T,P=s(F.invert(V).concat(X/F.k),J.invert(V).concat(X/J.k));return function(L){if(L===1)L=J;else{var K=P(L),Q=X/K[2];L=new mt(Q,V[0]-K[0]*Q,V[1]-K[1]*Q)}D.zoom(null,L)}})}function I(h,T,b){return!b&&h.__zooming||new q(h,T)}function q(h,T){this.that=h,this.args=T,this.active=0,this.sourceEvent=null,this.extent=t.apply(h,T),this.taps=0}q.prototype={event:function(h){return h&&(this.sourceEvent=h),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(h,T){return this.mouse&&h!=="mouse"&&(this.mouse[1]=T.invert(this.mouse[0])),this.touch0&&h!=="touch"&&(this.touch0[1]=T.invert(this.touch0[0])),this.touch1&&h!=="touch"&&(this.touch1[1]=T.invert(this.touch1[0])),this.that.__zoom=T,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(h){var T=Nt(this.that).datum();u.call(h,this.that,new d0(h,{sourceEvent:this.sourceEvent,target:v,transform:this.that.__zoom,dispatch:u}),T)}};function j(h,...T){if(!e.apply(this,arguments))return;var b=I(this,T).event(h),R=this.__zoom,S=Math.max(r[0],Math.min(r[1],R.k*Math.pow(2,o.apply(this,arguments)))),A=_t(h);if(b.wheel)(b.mouse[0][0]!==A[0]||b.mouse[0][1]!==A[1])&&(b.mouse[1]=R.invert(b.mouse[0]=A)),clearTimeout(b.wheel);else{if(R.k===S)return;b.mouse=[A,R.invert(A)],ho(this),b.start()}cn(h),b.wheel=setTimeout(D,$),b.zoom("mouse",n(g(m(R,S),b.mouse[0],b.mouse[1]),b.extent,l));function D(){b.wheel=null,b.end()}}function te(h,...T){if(f||!e.apply(this,arguments))return;var b=h.currentTarget,R=I(this,T,!0).event(h),S=Nt(h.view).on("mousemove.zoom",V,!0).on("mouseup.zoom",X,!0),A=_t(h,b),D=h.clientX,H=h.clientY;Ey(h.view),si(h),R.mouse=[A,this.__zoom.invert(A)],ho(this),R.start();function V(F){if(cn(F),!R.moved){var J=F.clientX-D,P=F.clientY-H;R.moved=J*J+P*P>_}R.event(F).zoom("mouse",n(g(R.that.__zoom,R.mouse[0]=_t(F,b),R.mouse[1]),R.extent,l))}function X(F){S.on("mousemove.zoom mouseup.zoom",null),ky(F.view,R.moved),cn(F),R.event(F).end()}}function W(h,...T){if(e.apply(this,arguments)){var b=this.__zoom,R=_t(h.changedTouches?h.changedTouches[0]:h,this),S=b.invert(R),A=b.k*(h.shiftKey?.5:2),D=n(g(m(b,A),R,S),t.apply(this,T),l);cn(h),a>0?Nt(this).transition().duration(a).call(z,D,R,h):Nt(this).call(v.transform,D,R,h)}}function O(h,...T){if(e.apply(this,arguments)){var b=h.touches,R=b.length,S=I(this,T,h.changedTouches.length===R).event(h),A,D,H,V;for(si(h),D=0;D<R;++D)H=b[D],V=_t(H,this),V=[V,this.__zoom.invert(V),H.identifier],S.touch0?!S.touch1&&S.touch0[2]!==V[2]&&(S.touch1=V,S.taps=0):(S.touch0=V,A=!0,S.taps=1+!!c);c&&(c=clearTimeout(c)),A&&(S.taps<2&&(d=V[0],c=setTimeout(function(){c=null},p)),ho(this),S.start())}}function y(h,...T){if(this.__zooming){var b=I(this,T).event(h),R=h.changedTouches,S=R.length,A,D,H,V;for(cn(h),A=0;A<S;++A)D=R[A],H=_t(D,this),b.touch0&&b.touch0[2]===D.identifier?b.touch0[0]=H:b.touch1&&b.touch1[2]===D.identifier&&(b.touch1[0]=H);if(D=b.that.__zoom,b.touch1){var X=b.touch0[0],F=b.touch0[1],J=b.touch1[0],P=b.touch1[1],L=(L=J[0]-X[0])*L+(L=J[1]-X[1])*L,K=(K=P[0]-F[0])*K+(K=P[1]-F[1])*K;D=m(D,Math.sqrt(L/K)),H=[(X[0]+J[0])/2,(X[1]+J[1])/2],V=[(F[0]+P[0])/2,(F[1]+P[1])/2]}else if(b.touch0)H=b.touch0[0],V=b.touch0[1];else return;b.zoom("touch",n(g(D,H,V),b.extent,l))}}function U(h,...T){if(this.__zooming){var b=I(this,T).event(h),R=h.changedTouches,S=R.length,A,D;for(si(h),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),A=0;A<S;++A)D=R[A],b.touch0&&b.touch0[2]===D.identifier?delete b.touch0:b.touch1&&b.touch1[2]===D.identifier&&delete b.touch1;if(b.touch1&&!b.touch0&&(b.touch0=b.touch1,delete b.touch1),b.touch0)b.touch0[1]=this.__zoom.invert(b.touch0[0]);else if(b.end(),b.taps===2&&(D=_t(D,this),Math.hypot(d[0]-D[0],d[1]-D[1])<C)){var H=Nt(this).on("dblclick.zoom");H&&H.apply(this,arguments)}}}return v.wheelDelta=function(h){return arguments.length?(o=typeof h=="function"?h:no(+h),v):o},v.filter=function(h){return arguments.length?(e=typeof h=="function"?h:no(!!h),v):e},v.touchable=function(h){return arguments.length?(i=typeof h=="function"?h:no(!!h),v):i},v.extent=function(h){return arguments.length?(t=typeof h=="function"?h:no([[+h[0][0],+h[0][1]],[+h[1][0],+h[1][1]]]),v):t},v.scaleExtent=function(h){return arguments.length?(r[0]=+h[0],r[1]=+h[1],v):[r[0],r[1]]},v.translateExtent=function(h){return arguments.length?(l[0][0]=+h[0][0],l[1][0]=+h[1][0],l[0][1]=+h[0][1],l[1][1]=+h[1][1],v):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},v.constrain=function(h){return arguments.length?(n=h,v):n},v.duration=function(h){return arguments.length?(a=+h,v):a},v.interpolate=function(h){return arguments.length?(s=h,v):s},v.on=function(){var h=u.on.apply(u,arguments);return h===u?v:h},v.clickDistance=function(h){return arguments.length?(_=(h=+h)*h,v):Math.sqrt(_)},v.tapDistance=function(h){return arguments.length?(C=+h,v):C},v}const as=Symbol("MiniMapSlots"),v0=["id","x","y","rx","ry","width","height","fill","stroke","stroke-width","shape-rendering"],b0={name:"MiniMapNode",compatConfig:{MODE:3},inheritAttrs:!1},w0=ve({...b0,props:{id:{},type:{},selected:{type:Boolean},dragging:{type:Boolean},position:{},dimensions:{},borderRadius:{},color:{},shapeRendering:{},strokeColor:{},strokeWidth:{},hidden:{type:Boolean}},emits:["click","dblclick","mouseenter","mousemove","mouseleave"],setup(e,{emit:t}){const n=e,o=Yt(as),i=zi(),r=Ee(()=>i.style??{});function l(d){t("click",d)}function a(d){t("dblclick",d)}function s(d){t("mouseenter",d)}function u(d){t("mousemove",d)}function c(d){t("mouseleave",d)}return(d,f)=>!d.hidden&&d.dimensions.width!==0&&d.dimensions.height!==0?(G(),ee(Pe,{key:0},[B(o)[`node-${n.type}`]?(G(),_e(dt(B(o)[`node-${n.type}`]),ws(go({key:0},{...n,...d.$attrs})),null,16)):(G(),ee("rect",go({key:1,id:d.id},d.$attrs,{class:["vue-flow__minimap-node",{selected:d.selected,dragging:d.dragging}],x:d.position.x,y:d.position.y,rx:d.borderRadius,ry:d.borderRadius,width:d.dimensions.width,height:d.dimensions.height,fill:d.color||r.value.background||r.value.backgroundColor,stroke:d.strokeColor,"stroke-width":d.strokeWidth,"shape-rendering":d.shapeRendering,onClick:l,onDblclick:a,onMouseenter:s,onMousemove:u,onMouseleave:c}),null,16,v0))],64)):ye("",!0)}}),x0=["width","height","viewBox","aria-labelledby"],_0=["id"],S0=["d","fill","stroke","stroke-width"],$0={name:"MiniMap",compatConfig:{MODE:3}},N0=ve({...$0,props:{nodeColor:{type:[String,Function],default:"#e2e2e2"},nodeStrokeColor:{type:[String,Function],default:"transparent"},nodeClassName:{type:[String,Function]},nodeBorderRadius:{default:5},nodeStrokeWidth:{default:2},maskColor:{default:"rgb(240, 240, 240, 0.6)"},maskStrokeColor:{default:"none"},maskStrokeWidth:{default:1},position:{default:"bottom-right"},pannable:{type:Boolean,default:!1},zoomable:{type:Boolean,default:!1},width:{},height:{},ariaLabel:{default:"Vue Flow mini map"},inversePan:{type:Boolean,default:!1},zoomStep:{default:1},offsetScale:{default:5},maskBorderRadius:{default:0}},emits:["click","nodeClick","nodeDblclick","nodeMouseenter","nodeMousemove","nodeMouseleave"],setup(e,{emit:t}){const n=Nl(),o=zi(),i=200,r=150,{id:l,edges:a,viewport:s,translateExtent:u,dimensions:c,emits:d,d3Selection:f,d3Zoom:p,getNodesInitialized:$}=Ce(),_=fe();Ot(as,n);const C=Ee(()=>{var S;return e.width??((S=o.style)==null?void 0:S.width)??i}),v=Ee(()=>{var S;return e.height??((S=o.style)==null?void 0:S.height)??r}),m=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",g=Y(()=>typeof e.nodeColor=="string"?()=>e.nodeColor:e.nodeColor),w=Y(()=>typeof e.nodeStrokeColor=="string"?()=>e.nodeStrokeColor:e.nodeStrokeColor),z=Y(()=>typeof e.nodeClassName=="string"?()=>e.nodeClassName:typeof e.nodeClassName=="function"?e.nodeClassName:()=>""),I=Y(()=>Gi($.value.filter(S=>!S.hidden))),q=Y(()=>({x:-s.value.x/s.value.zoom,y:-s.value.y/s.value.zoom,width:c.value.width/s.value.zoom,height:c.value.height/s.value.zoom})),j=Y(()=>$.value&&$.value.length?nf(I.value,q.value):q.value),te=Y(()=>{const S=j.value.width/C.value,A=j.value.height/v.value;return Math.max(S,A)}),W=Y(()=>{const S=te.value*C.value,A=te.value*v.value,D=e.offsetScale*te.value;return{offset:D,x:j.value.x-(S-j.value.width)/2-D,y:j.value.y-(A-j.value.height)/2-D,width:S+D*2,height:A+D*2}}),O=Y(()=>!W.value.x||!W.value.y?"":`
    M${W.value.x-W.value.offset},${W.value.y-W.value.offset}
    h${W.value.width+W.value.offset*2}
    v${W.value.height+W.value.offset*2}
    h${-W.value.width-W.value.offset*2}z
    M${q.value.x+e.maskBorderRadius},${q.value.y}
    h${q.value.width-2*e.maskBorderRadius}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 ${e.maskBorderRadius},${e.maskBorderRadius}
    v${q.value.height-2*e.maskBorderRadius}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 -${e.maskBorderRadius},${e.maskBorderRadius}
    h${-(q.value.width-2*e.maskBorderRadius)}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 -${e.maskBorderRadius},-${e.maskBorderRadius}
    v${-(q.value.height-2*e.maskBorderRadius)}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 ${e.maskBorderRadius},-${e.maskBorderRadius}z`);bs(S=>{if(_.value){const A=Nt(_.value),D=X=>{if(X.sourceEvent.type!=="wheel"||!f.value||!p.value)return;const F=X.sourceEvent.ctrlKey&&Dn()?10:1,J=-X.sourceEvent.deltaY*(X.sourceEvent.deltaMode===1?.05:X.sourceEvent.deltaMode?1:.002)*e.zoomStep,P=s.value.zoom*2**(J*F);p.value.scaleTo(f.value,P)},H=X=>{if(X.sourceEvent.type!=="mousemove"||!f.value||!p.value)return;const F=te.value*Math.max(1,s.value.zoom)*(e.inversePan?-1:1),J={x:s.value.x-X.sourceEvent.movementX*F,y:s.value.y-X.sourceEvent.movementY*F},P=[[0,0],[c.value.width,c.value.height]],L=or.translate(J.x,J.y).scale(s.value.zoom),K=p.value.constrain()(L,P,u.value);p.value.transform(f.value,K)},V=y0().wheelDelta(X=>Si(X)*(e.zoomStep/10)).on("zoom",e.pannable?H:()=>{}).on("zoom.wheel",e.zoomable?D:()=>{});A.call(V),S(()=>{A.on("zoom",null)})}},{flush:"post"});function y(S){const[A,D]=_t(S);t("click",{event:S,position:{x:A,y:D}})}function U(S,A){const D={event:S,node:A,connectedEdges:It([A],a.value)};d.miniMapNodeClick(D),t("nodeClick",D)}function h(S,A){const D={event:S,node:A,connectedEdges:It([A],a.value)};d.miniMapNodeDoubleClick(D),t("nodeDblclick",D)}function T(S,A){const D={event:S,node:A,connectedEdges:It([A],a.value)};d.miniMapNodeMouseEnter(D),t("nodeMouseenter",D)}function b(S,A){const D={event:S,node:A,connectedEdges:It([A],a.value)};d.miniMapNodeMouseMove(D),t("nodeMousemove",D)}function R(S,A){const D={event:S,node:A,connectedEdges:It([A],a.value)};d.miniMapNodeMouseLeave(D),t("nodeMouseleave",D)}return(S,A)=>(G(),_e(B(Wi),{position:S.position,class:Se(["vue-flow__minimap",{pannable:S.pannable,zoomable:S.zoomable}])},{default:Xe(()=>[(G(),ee("svg",{ref_key:"el",ref:_,width:C.value,height:v.value,viewBox:[W.value.x,W.value.y,W.value.width,W.value.height].join(" "),role:"img","aria-labelledby":`vue-flow__minimap-${B(l)}`,onClick:y},[S.ariaLabel?(G(),ee("title",{key:0,id:`vue-flow__minimap-${B(l)}`},Ne(S.ariaLabel),9,_0)):ye("",!0),(G(!0),ee(Pe,null,ft(B($),D=>(G(),_e(w0,{id:D.id,key:D.id,f:"",position:D.computedPosition,dimensions:D.dimensions,selected:D.selected,dragging:D.dragging,style:de(D.style),class:Se(z.value(D)),color:g.value(D),"border-radius":S.nodeBorderRadius,"stroke-color":w.value(D),"stroke-width":S.nodeStrokeWidth,"shape-rendering":B(m),type:D.type,hidden:D.hidden,onClick:H=>U(H,D),onDblclick:H=>h(H,D),onMouseenter:H=>T(H,D),onMousemove:H=>b(H,D),onMouseleave:H=>R(H,D)},null,8,["id","position","dimensions","selected","dragging","style","class","color","border-radius","stroke-color","stroke-width","shape-rendering","type","hidden","onClick","onDblclick","onMouseenter","onMousemove","onMouseleave"]))),128)),E("path",{class:"vue-flow__minimap-mask",d:O.value,fill:S.maskColor,stroke:S.maskStrokeColor,"stroke-width":S.maskStrokeWidth,"fill-rule":"evenodd"},null,8,S0)],8,x0))]),_:1},8,["position","class"]))}}),E0=["d"],k0=["d"],C0=["d","stroke"],M0=["d","stroke"],T0=["d","stroke"],I0=ve({__name:"AnimatedEdge",props:{id:{},sourceNode:{},targetNode:{},source:{},target:{},type:{},label:{type:[String,Object,Function]},style:{},selected:{type:Boolean},sourcePosition:{},targetPosition:{},sourceHandleId:{},targetHandleId:{},animated:{type:Boolean},updatable:{type:Boolean},markerStart:{},markerEnd:{},curvature:{},interactionWidth:{},data:{},events:{},labelStyle:{},labelShowBg:{type:Boolean},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{},sourceX:{},sourceY:{},targetX:{},targetY:{}},setup(e){const t=e,n=Xt(),o=We(),i=Y(()=>ko({sourceX:t.sourceX,sourceY:t.sourceY,sourcePosition:t.sourcePosition,targetX:t.targetX,targetY:t.targetY,targetPosition:t.targetPosition,borderRadius:8})),r=Y(()=>{var _,C;const f=(C=(_=t.sourceNode)==null?void 0:_.data)==null?void 0:C.nodeType;if(!f)return"any";const p=o.getDefinition(f);if(!p)return"any";const $=p.outputs.find(v=>v.id===t.sourceHandleId);return($==null?void 0:$.type)??"any"}),l=Y(()=>{const f=Ge[r.value];return(f==null?void 0:f.color)??"#D4D4D4"}),a=Y(()=>{var f,p;return((f=t.sourceNode)==null?void 0:f.selected)||((p=t.targetNode)==null?void 0:p.selected)}),s=Y(()=>{var f,p;return((f=t.targetNode)==null?void 0:f.selected)&&!((p=t.sourceNode)!=null&&p.selected)}),u=Y(()=>{var f,p;return((f=t.sourceNode)==null?void 0:f.selected)&&!((p=t.targetNode)!=null&&p.selected)}),c=Y(()=>n.isRunning),d=Y(()=>t.selected);return(f,p)=>(G(),ee("g",{class:Se(["edge-group",{selected:d.value,"connected-selected":a.value}])},[E("path",{d:i.value[0],fill:"none",stroke:"transparent","stroke-width":"20",class:"edge-interaction-area"},null,8,E0),d.value?(G(),ee("path",{key:0,d:i.value[0],fill:"none",stroke:"var(--color-primary-300)","stroke-width":"6","stroke-linecap":"round",class:"edge-selection"},null,8,k0)):ye("",!0),pe(B(Ln),{id:e.id,path:i.value[0],"marker-end":e.markerEnd,style:de({stroke:l.value,strokeWidth:d.value?3:2})},null,8,["id","path","marker-end","style"]),a.value&&!d.value?(G(),ee("path",{key:1,d:i.value[0],fill:"none",stroke:l.value,"stroke-width":"10","stroke-linecap":"round","stroke-dasharray":"12 24",class:Se(["edge-chase-glow",{"chase-incoming":s.value,"chase-outgoing":u.value,"chase-both":!s.value&&!u.value}])},null,10,C0)):ye("",!0),a.value&&!d.value?(G(),ee("path",{key:2,d:i.value[0],fill:"none",stroke:l.value,"stroke-width":"4","stroke-linecap":"round","stroke-dasharray":"12 24",class:Se(["edge-chase",{"chase-incoming":s.value,"chase-outgoing":u.value,"chase-both":!s.value&&!u.value}])},null,10,M0)):ye("",!0),c.value?(G(),ee("path",{key:3,d:i.value[0],fill:"none",stroke:l.value,"stroke-width":"4","stroke-linecap":"round",class:"edge-animation",style:{opacity:.6}},null,8,T0)):ye("",!0)],2))}}),D0=Ke(I0,[["__scopeId","data-v-fd62e63f"]]),P0={any:["any","trigger","number","string","boolean","audio","video","texture","data","array","scene3d","object3d","geometry3d","material3d","camera3d","light3d","transform3d"],trigger:["trigger","any"],number:["number","string","boolean","any"],string:["string","any"],boolean:["boolean","number","string","any"],audio:["audio","any"],video:["video","any"],texture:["texture","any"],data:["data","string","any"],array:["array","data","any"],scene3d:["scene3d","any"],object3d:["object3d","any"],geometry3d:["geometry3d","any"],material3d:["material3d","any"],camera3d:["camera3d","any"],light3d:["light3d","object3d","any"],transform3d:["transform3d","data","any"]};function A0(e,t){return t==="any"?!0:(P0[e]??[]).includes(t)}function dl(e,t,n,o){if(!e)return;if(e.id==="trigger"&&n==="output"&&t==="trigger"){const l=o==null?void 0:o.outputType;return l&&["boolean","number","string","json","timestamp"].includes(l)?l==="json"?"data":l==="timestamp"?"number":l:"trigger"}const r=(n==="input"?e.inputs:e.outputs).find(l=>l.id===t);return r==null?void 0:r.type}function z0(e,t,n){var _,C;const{source:o,sourceHandle:i,target:r,targetHandle:l}=e;if(!o||!r||!i||!l)return{valid:!1,reason:"Missing connection data"};if(o===r)return{valid:!1,reason:"Cannot connect node to itself"};const a=n(o),s=n(r);if(!a||!s)return{valid:!1,reason:"Node data not found"};const u=a.nodeType,c=s.nodeType,d=t(u),f=t(c);if(!d||!f)return{valid:!0};const p=dl(d,i,"output",a),$=dl(f,l,"input",s);if(!p||!$)return{valid:!0};if(d.id==="trigger"&&$==="trigger")return{valid:!0};if(!A0(p,$)){const v=((_=Ge[p])==null?void 0:_.label)??p,m=((C=Ge[$])==null?void 0:C.label)??$;return{valid:!1,reason:`Cannot connect ${v} to ${m}`}}return{valid:!0}}const R0=xs("history",{state:()=>({undoStacks:new Map,redoStacks:new Map,maxHistorySize:50,isUndoingOrRedoing:!1}),getters:{canUndo:e=>t=>{const n=e.undoStacks.get(t);return n?n.length>0:!1},canRedo:e=>t=>{const n=e.redoStacks.get(t);return n?n.length>0:!1},undoStackSize:e=>t=>{var n;return((n=e.undoStacks.get(t))==null?void 0:n.length)??0},redoStackSize:e=>t=>{var n;return((n=e.redoStacks.get(t))==null?void 0:n.length)??0},lastUndoDescription:e=>t=>{const n=e.undoStacks.get(t);return!n||n.length===0?null:n[n.length-1].description},lastRedoDescription:e=>t=>{const n=e.redoStacks.get(t);return!n||n.length===0?null:n[n.length-1].description}},actions:{recordChange(e,t,n,o){if(this.isUndoingOrRedoing)return;let i=this.undoStacks.get(e);i||(i=[],this.undoStacks.set(e,i));const r={flowId:e,before:t,after:n,description:o};i.push(r),i.length>this.maxHistorySize&&i.shift(),this.redoStacks.set(e,[])},undo(e){const t=this.undoStacks.get(e);if(!t||t.length===0)return null;const n=t.pop();let o=this.redoStacks.get(e);return o||(o=[],this.redoStacks.set(e,o)),o.push(n),n.before},redo(e){const t=this.redoStacks.get(e);if(!t||t.length===0)return null;const n=t.pop();let o=this.undoStacks.get(e);return o||(o=[],this.undoStacks.set(e,o)),o.push(n),n.after},setUndoingOrRedoing(e){this.isUndoingOrRedoing=e},clearHistory(e){this.undoStacks.delete(e),this.redoStacks.delete(e)},clearAllHistory(){this.undoStacks.clear(),this.redoStacks.clear()}}});function pl(e,t){return{nodes:JSON.parse(JSON.stringify(e)),edges:JSON.parse(JSON.stringify(t)),timestamp:Date.now()}}function B0(){const e=bt(),t=R0(),n=Y(()=>{const p=e.activeFlowId;return p?t.canUndo(p):!1}),o=Y(()=>{const p=e.activeFlowId;return p?t.canRedo(p):!1}),i=Y(()=>{const p=e.activeFlowId;return p?t.lastUndoDescription(p):null}),r=Y(()=>{const p=e.activeFlowId;return p?t.lastRedoDescription(p):null});function l(){return e.activeFlow?pl(e.activeFlow.nodes,e.activeFlow.edges):null}function a(p,$){if(!p||!e.activeFlow||!e.activeFlowId)return;const _=pl(e.activeFlow.nodes,e.activeFlow.edges);JSON.stringify(p)!==JSON.stringify(_)&&t.recordChange(e.activeFlowId,p,_,$)}function s(p,$){const _=l(),C=$();return a(_,p),C}function u(){if(!e.activeFlow||!e.activeFlowId)return!1;const p=t.undo(e.activeFlowId);if(!p)return!1;t.setUndoingOrRedoing(!0);try{e.activeFlow.nodes=JSON.parse(JSON.stringify(p.nodes)),e.activeFlow.edges=JSON.parse(JSON.stringify(p.edges))}finally{t.setUndoingOrRedoing(!1)}return!0}function c(){if(!e.activeFlow||!e.activeFlowId)return!1;const p=t.redo(e.activeFlowId);if(!p)return!1;t.setUndoingOrRedoing(!0);try{e.activeFlow.nodes=JSON.parse(JSON.stringify(p.nodes)),e.activeFlow.edges=JSON.parse(JSON.stringify(p.edges))}finally{t.setUndoingOrRedoing(!1)}return!0}function d(){return l()}function f(p,$){a(p,$)}return{canUndo:n,canRedo:o,undoDescription:i,redoDescription:r,beforeAction:l,afterAction:a,withHistory:s,undo:u,redo:c,startBatch:d,endBatch:f}}const fl=["debug","inputs","outputs","math","logic","audio","video","visual","shaders","data","ai","code","3d","connectivity","subflows","custom"],hl=["trigger","number","string","boolean","audio","video","texture","data","array","any"],gl=["web","electron"],ml=["number","text","toggle","slider","select","code","color"];class Be extends Error{constructor(t,n,o){super(t),this.field=n,this.value=o,this.name="ValidationError"}}function ze(e,t,n=1){if(typeof e!="string")throw new Be(`${t} must be a string`,t,e);if(e.length<n)throw new Be(`${t} must be at least ${n} character(s)`,t,e);return e}function dn(e,t){if(!Array.isArray(e))throw new Be(`${t} must be an array`,t,e);return e}function yl(e,t,n){if(typeof e!="object"||e===null)throw new Be(`${n}s[${t}] must be an object`,`${n}s[${t}]`,e);const o=e,i=ze(o.id,`${n}s[${t}].id`),r=ze(o.label,`${n}s[${t}].label`),l=ze(o.type,`${n}s[${t}].type`);if(!hl.includes(l))throw new Be(`${n}s[${t}].type must be one of: ${hl.join(", ")}`,`${n}s[${t}].type`,l);const a={id:i,type:l,label:r};return o.description!==void 0&&(a.description=ze(o.description,`${n}s[${t}].description`,0)),o.required!==void 0&&(a.required=!!o.required),o.multiple!==void 0&&(a.multiple=!!o.multiple),o.default!==void 0&&(a.default=o.default),a}function O0(e,t){if(typeof e!="object"||e===null)throw new Be(`controls[${t}] must be an object`,`controls[${t}]`,e);const n=e,o=ze(n.id,`controls[${t}].id`),i=ze(n.label,`controls[${t}].label`),r=ze(n.type,`controls[${t}].type`);if(!ml.includes(r))throw new Be(`controls[${t}].type must be one of: ${ml.join(", ")}`,`controls[${t}].type`,r);const l={id:o,type:r,label:i};if(n.description!==void 0&&(l.description=ze(n.description,`controls[${t}].description`,0)),n.default!==void 0&&(l.default=n.default),n.exposable!==void 0&&(l.exposable=!!n.exposable),n.bindable!==void 0&&(l.bindable=!!n.bindable),n.props!==void 0){if(typeof n.props!="object"||n.props===null)throw new Be(`controls[${t}].props must be an object`,`controls[${t}].props`,n.props);l.props=n.props}return l}function vl(e){if(typeof e!="object"||e===null)throw new Be("Definition must be an object");const t=e,n=ze(t.id,"id"),o=ze(t.name,"name"),i=ze(t.version,"version"),r=ze(t.description,"description",0),l=ze(t.icon,"icon"),a=ze(t.category,"category");if(!fl.includes(a))throw new Be(`category must be one of: ${fl.join(", ")}`,"category",a);const s=dn(t.platforms,"platforms");if(s.length===0)throw new Be("platforms must contain at least one platform","platforms",s);const u=s.map((w,z)=>{const I=ze(w,`platforms[${z}]`);if(!gl.includes(I))throw new Be(`platforms[${z}] must be one of: ${gl.join(", ")}`,`platforms[${z}]`,I);return I}),d=dn(t.inputs,"inputs").map((w,z)=>yl(w,z,"input")),p=dn(t.outputs,"outputs").map((w,z)=>yl(w,z,"output")),_=dn(t.controls,"controls").map((w,z)=>O0(w,z));if(new Set(d.map(w=>w.id)).size!==d.length)throw new Be("Duplicate input port IDs found","inputs");if(new Set(p.map(w=>w.id)).size!==p.length)throw new Be("Duplicate output port IDs found","outputs");if(new Set(_.map(w=>w.id)).size!==_.length)throw new Be("Duplicate control IDs found","controls");const g={id:n,name:o,version:i,category:a,description:r,icon:l,platforms:u,inputs:d,outputs:p,controls:_};if(t.color!==void 0&&(g.color=ze(t.color,"color")),t.webFallback!==void 0&&(g.webFallback=ze(t.webFallback,"webFallback")),t.tags!==void 0){const w=dn(t.tags,"tags");g.tags=w.map((z,I)=>ze(z,`tags[${I}]`))}return g}class yn extends Error{constructor(t,n){super(t),this.originalError=n,this.name="CompilationError"}}function bl(e,t){let n=e.trim();if(n=n.replace(/export\s+default\s+function\s*\w*\s*\(/,"return function("),n=n.replace(/export\s+default\s+(\([^)]*\)|[a-zA-Z_$][a-zA-Z0-9_$]*)\s*=>/,"return $1 =>"),!n.startsWith("return"))if(n.match(/^function\s*\w*\s*\(/))n="return "+n;else if(n.match(/^\([^)]*\)\s*=>/)||n.match(/^[a-zA-Z_$][a-zA-Z0-9_$]*\s*=>/))n="return "+n;else throw new yn(`Invalid executor format for node "${t}". Expected "export default function(ctx) { ... }" or "export default (ctx) => { ... }"`);try{const i=new Function(n)();if(typeof i!="function")throw new yn(`Executor for node "${t}" must export a function`);return async l=>{try{const a=await i(l);return a instanceof Map?a:typeof a=="object"&&a!==null&&!Array.isArray(a)?new Map(Object.entries(a)):(console.warn(`Executor for node "${t}" returned ${typeof a}, expected Map. Returning empty output.`),new Map)}catch(a){return console.error(`Error in custom executor "${t}":`,a),new Map}}}catch(o){throw o instanceof yn?o:new yn(`Failed to compile executor for node "${t}": ${o instanceof Error?o.message:String(o)}`,o instanceof Error?o:void 0)}}class V0{constructor(){Gt(this,"loadedNodes",new Map);Gt(this,"loadErrors",[]);Gt(this,"watcherCleanup",null);Gt(this,"initialized",!1);Gt(this,"onReloadCallbacks",new Set)}isElectron(){var t;return typeof window<"u"&&!!((t=window.electronAPI)!=null&&t.isElectron)}async initialize(){if(this.initialized){console.warn("CustomNodeLoader already initialized");return}if(this.initialized=!0,!this.isElectron()){console.log("CustomNodeLoader: Running in web mode, file-based custom nodes disabled");return}await this.loadAllNodes(),await this.startWatching()}async loadAllNodes(){if(!this.isElectron())return[];const t=window.electronAPI.customNodes;this.loadErrors=[];const n=await t.scanDirectory();if(!n.success)return console.warn("Failed to scan custom-nodes directory:",n.error),[];const o=[];for(const i of n.packages)try{const r=await this.loadNode(i);r&&o.push(r)}catch(r){console.error(`Failed to load custom node "${i}":`,r)}return console.log(`CustomNodeLoader: Loaded ${o.length} custom nodes`),o}async loadNode(t){if(!this.isElectron())throw new Error("Custom node loading only supported in Electron");const n=window.electronAPI.customNodes,o=await n.readDefinition(t);if(!o.success||!o.definition)return this.recordError(t,o.error??"Failed to read definition","load"),null;let i;try{i=vl(o.definition)}catch(c){const d=c instanceof Be?c.message:String(c);return this.recordError(t,d,"validation"),null}const r=await n.readExecutor(t);if(!r.success||!r.code)return this.recordError(t,r.error??"Failed to read executor","load"),null;let l;try{l=bl(r.code,i.id)}catch(c){const d=c instanceof yn?c.message:String(c);return this.recordError(t,d,"compilation"),null}this.loadedNodes.has(i.id)&&this.unloadNode(i.id),We().register(i),io().registerExecutor(i.id,l);const u={packageName:t,definition:i,executor:l,loadedAt:Date.now()};return this.loadedNodes.set(i.id,u),console.log(`CustomNodeLoader: Loaded "${i.name}" (${i.id})`),u}unloadNode(t){if(!this.loadedNodes.get(t))return;We().unregister(t),io().unregisterExecutor(t),this.loadedNodes.delete(t),console.log(`CustomNodeLoader: Unloaded "${t}"`)}async reloadNode(t){console.log(`CustomNodeLoader: Reloading "${t}"`);for(const[o,i]of this.loadedNodes)if(i.packageName===t){this.unloadNode(o);break}this.loadErrors=this.loadErrors.filter(o=>o.packageName!==t),await this.loadNode(t)&&this.notifyReload(t)}async startWatching(){if(!this.isElectron())return;const t=window.electronAPI.customNodes,n=await t.watchDirectory();if(!n.success){console.warn("Failed to start custom-nodes watcher:",n.error);return}this.watcherCleanup=t.onFileChange(async o=>{const i=`reload:${o.packageName}`;this[i]||(this[i]=!0,setTimeout(async()=>{this[i]=!1,await this.reloadNode(o.packageName)},300))}),console.log("CustomNodeLoader: File watcher started")}async stopWatching(){this.watcherCleanup&&(this.watcherCleanup(),this.watcherCleanup=null),this.isElectron()&&await window.electronAPI.customNodes.stopWatching()}recordError(t,n,o){this.loadErrors.push({packageName:t,error:n,type:o})}getLoadedNodes(){return Array.from(this.loadedNodes.values())}getLoadErrors(){return[...this.loadErrors]}isCustomNode(t){return this.loadedNodes.has(t)}onReload(t){return this.onReloadCallbacks.add(t),()=>{this.onReloadCallbacks.delete(t)}}notifyReload(t){for(const n of this.onReloadCallbacks)n(t)}loadFromCode(t,n){let o;try{o=JSON.parse(t)}catch{throw new Be("Invalid JSON in definition")}const i=vl(o),r=bl(n,i.id);this.loadedNodes.has(i.id)&&this.unloadNode(i.id),We().register(i),io().registerExecutor(i.id,r);const s={packageName:`web:${i.id}`,definition:i,executor:r,loadedAt:Date.now()};return this.loadedNodes.set(i.id,s),s}async dispose(){await this.stopWatching();for(const t of this.loadedNodes.keys())this.unloadNode(t);this.initialized=!1}}let ui=null;function L0(){return ui||(ui=new V0),ui}const F0={id:"constant",name:"Constant",version:"1.0.0",category:"inputs",description:"Output a constant value",icon:"hash",platforms:["web","electron"],inputs:[],outputs:[{id:"value",type:"number",label:"Value"}],controls:[{id:"value",type:"number",label:"Value",default:0,exposable:!0}]},H0={id:"slider",name:"Slider",version:"1.0.0",category:"inputs",description:"Slider control (0-1)",icon:"sliders-horizontal",platforms:["web","electron"],inputs:[],outputs:[{id:"value",type:"number",label:"Value"}],controls:[{id:"value",type:"slider",label:"Value",default:.5,exposable:!0,props:{min:0,max:1,step:.01}}]},Y0={id:"audio-input",name:"Audio Input",version:"1.0.0",category:"audio",description:"Capture audio from microphone",icon:"mic",platforms:["web","electron"],inputs:[],outputs:[{id:"audio",type:"audio",label:"Audio"},{id:"level",type:"number",label:"Level"},{id:"beat",type:"trigger",label:"Beat"}],controls:[{id:"source",type:"select",label:"Source",default:"default"}]},X0={id:"trigger",name:"Trigger",version:"1.0.0",category:"inputs",description:"Manual trigger button with various output types",icon:"zap",platforms:["web","electron"],inputs:[],outputs:[{id:"trigger",type:"trigger",label:"Trigger"}],controls:[{id:"outputType",type:"select",label:"Type",default:"boolean",props:{options:["boolean","number","string","json","timestamp"]}},{id:"value",type:"toggle",label:"Value",default:!1},{id:"stringValue",type:"text",label:"String Value",default:""},{id:"jsonValue",type:"text",label:"JSON Value",default:"{}"}]},G0={class:"node-body"},U0={class:"control-row"},Z0={key:0,class:"control-row"},q0={class:"value-toggle"},W0={key:1,class:"control-row control-row-full"},K0={key:2,class:"control-row control-row-full"},j0={key:3,class:"control-row"},J0={class:"output-row"},Q0=ve({__name:"TriggerNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=bt(),o=Xt(),i=We(),r=fe(!1),l=Y(()=>{var m,g;const v=((m=t.data)==null?void 0:m.nodeType)??"trigger";return i.getDefinition(v)??((g=t.data)==null?void 0:g.definition)??null}),a=Y(()=>{var v;return l.value?((v=lt[l.value.category])==null?void 0:v.color)??"var(--color-neutral-400)":"var(--color-neutral-400)"}),s=Y({get:()=>{var v;return((v=t.data)==null?void 0:v.outputType)??"boolean"},set:v=>{n.updateNodeData(t.id,{outputType:v})}}),u=Y({get:()=>{var v;return((v=t.data)==null?void 0:v.value)??!1},set:v=>{n.updateNodeData(t.id,{value:v})}}),c=Y({get:()=>{var v;return((v=t.data)==null?void 0:v.stringValue)??""},set:v=>{n.updateNodeData(t.id,{stringValue:v})}}),d=Y({get:()=>{var v;return((v=t.data)==null?void 0:v.jsonValue)??"{}"},set:v=>{n.updateNodeData(t.id,{jsonValue:v})}}),f=Y(()=>{var m;const v=o.nodeMetrics.get(t.id);return(m=v==null?void 0:v.outputValues)==null?void 0:m.trigger}),p=Y(()=>{switch(s.value){case"boolean":return u.value?"true":"false";case"number":return u.value?"1":"0";case"string":return c.value||"(empty)";case"json":return d.value.slice(0,20)+(d.value.length>20?"...":"");case"timestamp":return"now()";default:return String(f.value??u.value)}});function $(){const v=!u.value;n.updateNodeData(t.id,{value:v}),setTimeout(()=>{n.updateNodeData(t.id,{value:!v})},100)}function _(){r.value=!r.value}function C(v){var m;return((m=Ge[v])==null?void 0:m.color)??"var(--color-neutral-400)"}return(v,m)=>r.value?(G(),ee("div",{key:0,class:Se(["trigger-node trigger-node-collapsed",{selected:t.selected}])},[E("button",{class:"trigger-btn-large",onClick:he($,["stop"]),onMousedown:m[0]||(m[0]=he(()=>{},["stop"]))},[pe(B(Zo),{size:20}),m[12]||(m[12]=E("span",null,"TRIGGER",-1))],32),pe(B(Me),{id:"trigger",type:"source",position:B(ne).Right,style:de({background:C("trigger")}),class:"port-handle port-handle-collapsed"},null,8,["position","style"]),E("button",{class:"expand-btn",onClick:he(_,["stop"])},[pe(B(_n),{size:12})])],2)):(G(),ee("div",{key:1,class:Se(["trigger-node",{selected:t.selected}])},[E("div",{class:"node-header",style:de({borderLeftColor:a.value})},[pe(B(Zo),{size:14,class:"header-icon"}),m[13]||(m[13]=E("span",{class:"node-title"},"Trigger",-1)),E("button",{class:"node-collapse-btn",onClick:he(_,["stop"])},[pe(B(Sn),{size:14})])],4),E("div",G0,[E("div",U0,[m[15]||(m[15]=E("label",{class:"control-label"},"TYPE",-1)),vn(E("select",{"onUpdate:modelValue":m[1]||(m[1]=g=>s.value=g),class:"type-select",onMousedown:m[2]||(m[2]=he(()=>{},["stop"]))},[...m[14]||(m[14]=[Ss('<option value="boolean" data-v-e8c803e2> Boolean </option><option value="number" data-v-e8c803e2> Number </option><option value="string" data-v-e8c803e2> String </option><option value="json" data-v-e8c803e2> JSON </option><option value="timestamp" data-v-e8c803e2> Timestamp </option>',5)])],544),[[_s,s.value]])]),s.value==="boolean"||s.value==="number"?(G(),ee("div",Z0,[m[16]||(m[16]=E("label",{class:"control-label"},"VALUE",-1)),E("div",q0,[E("button",{class:Se(["value-btn",{active:!u.value,"false-btn":!0}]),onClick:m[3]||(m[3]=he(g=>u.value=!1,["stop"])),onMousedown:m[4]||(m[4]=he(()=>{},["stop"]))},Ne(s.value==="number"?"0":"FALSE"),35),E("button",{class:Se(["value-btn",{active:u.value,"true-btn":!0}]),onClick:m[5]||(m[5]=he(g=>u.value=!0,["stop"])),onMousedown:m[6]||(m[6]=he(()=>{},["stop"]))},Ne(s.value==="number"?"1":"TRUE"),35)])])):s.value==="string"?(G(),ee("div",W0,[m[17]||(m[17]=E("label",{class:"control-label"},"VALUE",-1)),vn(E("input",{"onUpdate:modelValue":m[7]||(m[7]=g=>c.value=g),type:"text",class:"string-input",placeholder:"Enter string...",onMousedown:m[8]||(m[8]=he(()=>{},["stop"]))},null,544),[[mo,c.value]])])):s.value==="json"?(G(),ee("div",K0,[m[18]||(m[18]=E("label",{class:"control-label"},"JSON",-1)),vn(E("textarea",{"onUpdate:modelValue":m[9]||(m[9]=g=>d.value=g),class:"json-input",placeholder:'{"key": "value"}',rows:"2",onMousedown:m[10]||(m[10]=he(()=>{},["stop"]))},null,544),[[mo,d.value]])])):s.value==="timestamp"?(G(),ee("div",j0,[...m[19]||(m[19]=[E("label",{class:"control-label"},"VALUE",-1),E("span",{class:"timestamp-info"},"Current timestamp on trigger",-1)])])):ye("",!0),E("button",{class:"trigger-btn",onClick:he($,["stop"]),onMousedown:m[11]||(m[11]=he(()=>{},["stop"]))},[pe(B(Zo),{size:16}),m[20]||(m[20]=E("span",null,"TRIGGER",-1))],32),E("div",J0,[m[21]||(m[21]=E("span",{class:"output-label"},"Output:",-1)),E("span",{class:Se(["output-value",{"value-true":u.value&&(s.value==="boolean"||s.value==="number")}])},Ne(p.value),3),pe(B(Me),{id:"trigger",type:"source",position:B(ne).Right,style:de({background:C("trigger")}),class:"port-handle"},null,8,["position","style"])])])],2))}}),eb=Ke(Q0,[["__scopeId","data-v-e8c803e2"]]),tb={id:"xy-pad",name:"XY Pad",version:"1.0.0",category:"inputs",description:"2D position controller with X/Y outputs",icon:"move",platforms:["web","electron"],inputs:[],outputs:[{id:"rawX",type:"number",label:"Raw X"},{id:"rawY",type:"number",label:"Raw Y"},{id:"normX",type:"number",label:"0-1 X"},{id:"normY",type:"number",label:"0-1 Y"}],controls:[{id:"normalizedX",type:"number",label:"X",default:.5,exposable:!0},{id:"normalizedY",type:"number",label:"Y",default:.5,exposable:!0},{id:"minX",type:"number",label:"Min X",default:0},{id:"maxX",type:"number",label:"Max X",default:1},{id:"minY",type:"number",label:"Min Y",default:0},{id:"maxY",type:"number",label:"Max Y",default:1}]},nb={class:"handles-column handles-right"},ob={class:"node-content"},ib={key:0,class:"node-body"},rb={class:"value-display"},lb={class:"value-item"},ab={class:"value-number"},sb={class:"value-item"},ub={class:"value-number"},cb={class:"range-section"},db={key:0,class:"range-controls"},pb={class:"range-row"},fb=["value"],hb=["value"],gb={class:"range-row"},mb=["value"],yb=["value"],vb=ve({__name:"XYPadNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=bt(),o=We(),i=fe(!1),r=fe(!1),l=fe(null),a=fe(!1),s=fe(null),u=Y(()=>{var y,U;const O=((y=t.data)==null?void 0:y.nodeType)??"xy-pad";return o.getDefinition(O)??((U=t.data)==null?void 0:U.definition)??null}),c=Y(()=>{var O;return u.value?((O=lt[u.value.category])==null?void 0:O.color)??"var(--color-neutral-400)":"var(--color-neutral-400)"}),d=Y({get:()=>{var O;return((O=t.data)==null?void 0:O.normalizedX)??.5},set:O=>{n.updateNodeData(t.id,{normalizedX:Math.max(0,Math.min(1,O))})}}),f=Y({get:()=>{var O;return((O=t.data)==null?void 0:O.normalizedY)??.5},set:O=>{n.updateNodeData(t.id,{normalizedY:Math.max(0,Math.min(1,O))})}}),p=Y({get:()=>{var O;return((O=t.data)==null?void 0:O.minX)??0},set:O=>{n.updateNodeData(t.id,{minX:O})}}),$=Y({get:()=>{var O;return((O=t.data)==null?void 0:O.maxX)??1},set:O=>{n.updateNodeData(t.id,{maxX:O})}}),_=Y({get:()=>{var O;return((O=t.data)==null?void 0:O.minY)??0},set:O=>{n.updateNodeData(t.id,{minY:O})}}),C=Y({get:()=>{var O;return((O=t.data)==null?void 0:O.maxY)??1},set:O=>{n.updateNodeData(t.id,{maxY:O})}}),v=Y(()=>p.value+d.value*($.value-p.value)),m=Y(()=>_.value+f.value*(C.value-_.value)),g=Y(()=>({left:`${d.value*100}%`,top:`${(1-f.value)*100}%`}));function w(O){j(O)}function z(O){a.value=!0,j(O),window.addEventListener("mousemove",I),window.addEventListener("mouseup",q)}function I(O){a.value&&j(O)}function q(){a.value=!1,window.removeEventListener("mousemove",I),window.removeEventListener("mouseup",q)}function j(O){if(!l.value)return;const y=l.value.getBoundingClientRect(),U=(O.clientX-y.left)/y.width,h=1-(O.clientY-y.top)/y.height;d.value=Math.max(0,Math.min(1,U)),f.value=Math.max(0,Math.min(1,h))}function te(){i.value=!i.value}function W(O){var y;return((y=Ge[O])==null?void 0:y.color)??"var(--color-neutral-400)"}return Mt(()=>{window.removeEventListener("mousemove",I),window.removeEventListener("mouseup",q)}),(O,y)=>(G(),ee("div",{class:Se(["xypad-node",{selected:t.selected,collapsed:i.value}])},[E("div",nb,[E("div",{class:"handle-slot",onMouseenter:y[0]||(y[0]=U=>s.value="rawX"),onMouseleave:y[1]||(y[1]=U=>s.value=null)},[pe(B(Me),{id:"rawX",type:"source",position:B(ne).Right,style:de({background:W("number")}),class:"port-handle"},null,8,["position","style"]),E("div",{class:Se(["port-label port-label-right",{visible:s.value==="rawX"||t.selected}])},[y[18]||(y[18]=E("span",{class:"label-text"},"X",-1)),E("span",{class:"label-type",style:de({color:W("number")})},"raw",4)],2)],32),E("div",{class:"handle-slot",onMouseenter:y[2]||(y[2]=U=>s.value="rawY"),onMouseleave:y[3]||(y[3]=U=>s.value=null)},[pe(B(Me),{id:"rawY",type:"source",position:B(ne).Right,style:de({background:W("number")}),class:"port-handle"},null,8,["position","style"]),E("div",{class:Se(["port-label port-label-right",{visible:s.value==="rawY"||t.selected}])},[y[19]||(y[19]=E("span",{class:"label-text"},"Y",-1)),E("span",{class:"label-type",style:de({color:W("number")})},"raw",4)],2)],32),E("div",{class:"handle-slot",onMouseenter:y[4]||(y[4]=U=>s.value="normX"),onMouseleave:y[5]||(y[5]=U=>s.value=null)},[pe(B(Me),{id:"normX",type:"source",position:B(ne).Right,style:de({background:W("number")}),class:"port-handle"},null,8,["position","style"]),E("div",{class:Se(["port-label port-label-right",{visible:s.value==="normX"||t.selected}])},[y[20]||(y[20]=E("span",{class:"label-text"},"nX",-1)),E("span",{class:"label-type",style:de({color:W("number")})},"01",4)],2)],32),E("div",{class:"handle-slot",onMouseenter:y[6]||(y[6]=U=>s.value="normY"),onMouseleave:y[7]||(y[7]=U=>s.value=null)},[pe(B(Me),{id:"normY",type:"source",position:B(ne).Right,style:de({background:W("number")}),class:"port-handle"},null,8,["position","style"]),E("div",{class:Se(["port-label port-label-right",{visible:s.value==="normY"||t.selected}])},[y[21]||(y[21]=E("span",{class:"label-text"},"nY",-1)),E("span",{class:"label-type",style:de({color:W("number")})},"01",4)],2)],32)]),E("div",ob,[E("div",{class:"node-header",style:de({borderLeftColor:c.value})},[pe(B(Ps),{size:14,class:"header-icon"}),y[22]||(y[22]=E("span",{class:"node-title"},"XY-Pad",-1)),E("button",{class:"node-collapse-btn",onClick:he(te,["stop"])},[i.value?(G(),_e(B(_n),{key:1,size:14})):(G(),_e(B(Sn),{key:0,size:14}))])],4),i.value?ye("",!0):(G(),ee("div",ib,[E("div",{ref_key:"padRef",ref:l,class:"pad-area",onMousedown:he(z,["stop"]),onClick:he(w,["stop"])},[y[23]||(y[23]=E("div",{class:"pad-grid"},[E("div",{class:"grid-line-h"}),E("div",{class:"grid-line-v"})],-1)),E("div",{class:"pad-point",style:de(g.value)},null,4)],544),E("div",rb,[E("div",lb,[y[24]||(y[24]=E("span",{class:"value-label"},"X:",-1)),E("span",ab,Ne(v.value.toFixed(2)),1)]),E("div",sb,[y[25]||(y[25]=E("span",{class:"value-label"},"Y:",-1)),E("span",ub,Ne(m.value.toFixed(2)),1)])]),E("div",cb,[E("button",{class:"range-toggle",onClick:y[8]||(y[8]=he(U=>r.value=!r.value,["stop"])),onMousedown:y[9]||(y[9]=he(()=>{},["stop"]))},[r.value?(G(),_e(B(Sn),{key:1,size:12})):(G(),_e(B(_n),{key:0,size:12})),y[26]||(y[26]=E("span",null,"RANGE",-1))],32),r.value?(G(),ee("div",db,[E("div",pb,[y[27]||(y[27]=E("label",null,"X Min",-1)),E("input",{type:"number",value:p.value,onInput:y[10]||(y[10]=U=>p.value=parseFloat(U.target.value)||0),onMousedown:y[11]||(y[11]=he(()=>{},["stop"]))},null,40,fb),y[28]||(y[28]=E("label",null,"Max",-1)),E("input",{type:"number",value:$.value,onInput:y[12]||(y[12]=U=>$.value=parseFloat(U.target.value)||1),onMousedown:y[13]||(y[13]=he(()=>{},["stop"]))},null,40,hb)]),E("div",gb,[y[29]||(y[29]=E("label",null,"Y Min",-1)),E("input",{type:"number",value:_.value,onInput:y[14]||(y[14]=U=>_.value=parseFloat(U.target.value)||0),onMousedown:y[15]||(y[15]=he(()=>{},["stop"]))},null,40,mb),y[30]||(y[30]=E("label",null,"Max",-1)),E("input",{type:"number",value:C.value,onInput:y[16]||(y[16]=U=>C.value=parseFloat(U.target.value)||1),onMousedown:y[17]||(y[17]=he(()=>{},["stop"]))},null,40,yb)])])):ye("",!0)])]))])],2))}}),bb=Ke(vb,[["__scopeId","data-v-2ddb69db"]]),wb={id:"textbox",name:"Textbox",version:"1.0.0",category:"inputs",description:"Resizable text input that outputs a string",icon:"type",platforms:["web","electron"],inputs:[{id:"trigger",type:"trigger",label:"Trigger"}],outputs:[{id:"text",type:"string",label:"Text"}],controls:[{id:"text",type:"text",label:"Text",default:""},{id:"height",type:"number",label:"Height",default:100}]},xb={class:"collapsed-content"},_b={class:"collapsed-text"},Sb={class:"node-body"},$b={class:"input-row"},Nb={class:"output-row"},Eb={class:"output-value"},kb=ve({__name:"TextboxNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=bt(),o=We(),i=fe(!1),r=fe(!1),l=fe(100),a=fe(0),s=Y(()=>{var g;const m=((g=t.data)==null?void 0:g.nodeType)??"textbox";return o.getDefinition(m)??null}),u=Y(()=>{var m;return s.value?((m=lt[s.value.category])==null?void 0:m.color)??"var(--color-neutral-400)":"var(--color-neutral-400)"}),c=Y({get:()=>{var m;return((m=t.data)==null?void 0:m.text)??""},set:m=>{n.updateNodeData(t.id,{text:m})}}),d=Y({get:()=>{var m;return((m=t.data)==null?void 0:m.height)??100},set:m=>{n.updateNodeData(t.id,{height:Math.max(60,Math.min(400,m))})}});function f(){i.value=!i.value}function p(m){var g;return((g=Ge[m])==null?void 0:g.color)??"var(--color-neutral-400)"}function $(m){m.preventDefault(),m.stopPropagation(),r.value=!0,l.value=d.value,a.value=m.clientY,document.addEventListener("mousemove",_),document.addEventListener("mouseup",C)}function _(m){if(!r.value)return;const g=m.clientY-a.value;d.value=l.value+g}function C(){r.value=!1,document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",C)}const v=Y(()=>{const m=c.value;return m?m.length>30?m.slice(0,30)+"...":m:"(empty)"});return(m,g)=>i.value?(G(),ee("div",{key:0,class:Se(["textbox-node textbox-node-collapsed",{selected:t.selected}])},[E("div",xb,[pe(B(ir),{size:14,class:"collapsed-icon"}),E("span",_b,Ne(v.value),1)]),pe(B(Me),{id:"text",type:"source",position:B(ne).Right,style:de({background:p("string")}),class:"port-handle"},null,8,["position","style"]),pe(B(Me),{id:"trigger",type:"target",position:B(ne).Left,style:de({background:p("trigger")}),class:"port-handle"},null,8,["position","style"]),E("button",{class:"expand-btn",onClick:he(f,["stop"])},[pe(B(_n),{size:12})])],2)):(G(),ee("div",{key:1,class:Se(["textbox-node",{selected:t.selected,resizing:r.value}])},[E("div",{class:"node-header",style:de({borderLeftColor:u.value})},[pe(B(ir),{size:14,class:"header-icon"}),g[2]||(g[2]=E("span",{class:"node-title"},"Textbox",-1)),E("button",{class:"node-collapse-btn",onClick:he(f,["stop"])},[pe(B(Sn),{size:14})])],4),E("div",Sb,[E("div",$b,[pe(B(Me),{id:"trigger",type:"target",position:B(ne).Left,style:de({background:p("trigger")}),class:"port-handle"},null,8,["position","style"]),g[3]||(g[3]=E("span",{class:"port-label"},"Trigger",-1))]),E("div",{class:"textarea-wrapper",style:de({height:d.value+"px"})},[vn(E("textarea",{"onUpdate:modelValue":g[0]||(g[0]=w=>c.value=w),class:"text-input",placeholder:"Enter text...",onMousedown:g[1]||(g[1]=he(()=>{},["stop"]))},null,544),[[mo,c.value]])],4),E("div",{class:"resize-handle",onMousedown:$},[...g[4]||(g[4]=[E("div",{class:"resize-grip"},null,-1)])],32),E("div",Nb,[g[5]||(g[5]=E("span",{class:"output-label"},"Output:",-1)),E("span",Eb,Ne(v.value),1),pe(B(Me),{id:"text",type:"source",position:B(ne).Right,style:de({background:p("string")}),class:"port-handle"},null,8,["position","style"])])])],2))}}),Cb=Ke(kb,[["__scopeId","data-v-885536a0"]]),Mb=[F0,H0,Y0,X0,tb,wb],Tb={id:"console",name:"Console",version:"1.0.0",category:"debug",description:"Log value to console",icon:"terminal",platforms:["web","electron"],inputs:[{id:"value",type:"any",label:"Value"}],outputs:[],controls:[{id:"label",type:"text",label:"Label",default:"Log"},{id:"logOnChange",type:"toggle",label:"On Change",default:!0}]},Ib={id:"monitor",name:"Monitor",version:"1.0.0",category:"debug",description:"Display input values",icon:"eye",platforms:["web","electron"],inputs:[{id:"value",type:"any",label:"Value"}],outputs:[{id:"value",type:"any",label:"Pass"}],controls:[]},Db={class:"handle-left"},Pb={class:"handle-right"},Ab={class:"node-content"},zb={class:"monitor-value"},Rb=ve({__name:"MonitorNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=Xt(),o=Y(()=>{var s;return((s=lt.debug)==null?void 0:s.color)??"var(--color-neutral-400)"}),i=Y(()=>{var d,f;const s=n.nodeMetrics.get(t.id),u=(d=s==null?void 0:s.outputValues)==null?void 0:d.display,c=(f=s==null?void 0:s.outputValues)==null?void 0:f.value;return u??c??null}),r=Y(()=>{const s=i.value;return s==null?"":typeof s=="number"?Number.isInteger(s)?s.toString():s.toFixed(4):typeof s=="boolean"?s?"true":"false":typeof s=="string"?s:Array.isArray(s)?JSON.stringify(s,null,1):s instanceof WebGLTexture?"[Texture]":typeof s=="object"?JSON.stringify(s,null,1):String(s)}),l=Y(()=>{const s=i.value;return s==null?"null":typeof s=="number"?"number":typeof s=="boolean"?"boolean":typeof s=="string"?"string":Array.isArray(s)?"array":s instanceof WebGLTexture?"texture":typeof s=="object"?"object":"unknown"});function a(s){var u;return((u=Ge[s])==null?void 0:u.color)??"var(--color-neutral-400)"}return(s,u)=>(G(),ee("div",{class:Se(["monitor-node",{selected:t.selected}])},[E("div",Db,[pe(B(Me),{id:"value",type:"target",position:B(ne).Left,style:de({background:a("any")}),class:"port-handle"},null,8,["position","style"])]),E("div",Pb,[pe(B(Me),{id:"value",type:"source",position:B(ne).Right,style:de({background:a("any")}),class:"port-handle"},null,8,["position","style"])]),E("div",Ab,[E("div",{class:"node-header",style:de({borderLeftColor:o.value})},[pe(B(Cl),{size:14,class:"node-icon",style:de({color:o.value})},null,8,["style"]),u[0]||(u[0]=E("span",{class:"node-title"},"Monitor",-1))],4),E("div",{class:Se(["monitor-display",l.value])},[E("pre",zb,Ne(r.value),1)],2)])],2))}}),Bb=Ke(Rb,[["__scopeId","data-v-5b612de7"]]),Ob={id:"oscilloscope",name:"Oscilloscope",version:"1.0.0",category:"debug",description:"Visualize signal waveform over time",icon:"activity",platforms:["web","electron"],inputs:[{id:"signal",type:"number",label:"Signal"},{id:"audio",type:"audio",label:"Audio"}],outputs:[],controls:[{id:"timeScale",type:"slider",label:"Time Scale",default:1,props:{min:.25,max:4,step:.25}},{id:"amplitude",type:"slider",label:"Amplitude",default:1,props:{min:.1,max:2,step:.1}}]},Vb={class:"handles-column handles-left"},Lb={class:"handle-slot"},Fb={class:"handle-slot"},Hb={class:"node-content"},Yb={class:"scope-display"},Xb={class:"scope-controls"},Gb={class:"control-row"},Ub=["value"],Zb={class:"control-row"},qb=["value"],wl=128,Wb=ve({__name:"OscilloscopeNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=Xt(),o=bt(),i=Y(()=>{var v;return((v=lt.debug)==null?void 0:v.color)??"var(--color-neutral-400)"}),r=fe(null),l=fe(null),a=fe([]),s=Y(()=>{var v;return((v=t.data)==null?void 0:v.timeScale)??1}),u=Y(()=>{var v;return((v=t.data)==null?void 0:v.amplitude)??1});function c(v){o.updateNodeData(t.id,{timeScale:v})}function d(v){o.updateNodeData(t.id,{amplitude:v})}let f=null;function p(){var j,te,W;if(!r.value||!l.value)return;const v=r.value.width,m=r.value.height,g=l.value;g.fillStyle="#0a0a0a",g.fillRect(0,0,v,m),g.strokeStyle="#1a3a1a",g.lineWidth=1,g.beginPath(),g.moveTo(0,m/2),g.lineTo(v,m/2),g.stroke();for(let O=0;O<8;O++){const y=v/8*O;g.beginPath(),g.moveTo(y,0),g.lineTo(y,m),g.stroke()}const w=n.nodeMetrics.get(t.id),z=((j=w==null?void 0:w.outputValues)==null?void 0:j._mode)??"signal",I=(te=w==null?void 0:w.outputValues)==null?void 0:te._input_waveform,q=((W=w==null?void 0:w.outputValues)==null?void 0:W._input_signal)??0;if(z==="audio"&&I&&I.length>0){g.strokeStyle="#22c55e",g.lineWidth=2,g.beginPath();const O=v/I.length;for(let y=0;y<I.length;y++){const U=y*O,h=m/2-I[y]*u.value*(m/2-10);y===0?g.moveTo(U,h):g.lineTo(U,h)}g.stroke(),g.shadowColor="#22c55e",g.shadowBlur=4,g.stroke(),g.shadowBlur=0,g.fillStyle="#22c55e",g.font="10px monospace",g.fillText("AUDIO",4,12)}else{if(a.value.push(q),a.value.length>wl&&a.value.shift(),a.value.length>1){g.strokeStyle="#22c55e",g.lineWidth=2,g.beginPath();const O=a.value,y=v/(wl*s.value);for(let U=0;U<O.length;U++){const h=U*y,T=m/2-O[U]*u.value*(m/2-10);U===0?g.moveTo(h,T):g.lineTo(h,T)}g.stroke(),g.shadowColor="#22c55e",g.shadowBlur=4,g.stroke(),g.shadowBlur=0}g.fillStyle="#22c55e",g.font="10px monospace",g.fillText(`${q.toFixed(3)}`,4,12)}f=requestAnimationFrame(p)}function $(){f===null&&p()}function _(){f!==null&&(cancelAnimationFrame(f),f=null)}xe(()=>n.isRunning,v=>{v?$():_()},{immediate:!0}),Ve(()=>{r.value&&(l.value=r.value.getContext("2d"),n.isRunning?$():l.value&&(l.value.fillStyle="#0a0a0a",l.value.fillRect(0,0,r.value.width,r.value.height),l.value.fillStyle="#333",l.value.font="10px monospace",l.value.fillText("NO SIGNAL",50,50)))}),Mt(()=>{_()});function C(v){var m;return((m=Ge[v])==null?void 0:m.color)??"var(--color-neutral-400)"}return(v,m)=>(G(),ee("div",{class:Se(["oscilloscope-node",{selected:t.selected}])},[E("div",Vb,[E("div",Lb,[pe(B(Me),{id:"signal",type:"target",position:B(ne).Left,style:de({background:C("number")}),class:"port-handle"},null,8,["position","style"]),m[4]||(m[4]=E("span",{class:"port-label"},"SIG",-1))]),E("div",Fb,[pe(B(Me),{id:"audio",type:"target",position:B(ne).Left,style:de({background:C("audio")}),class:"port-handle"},null,8,["position","style"]),m[5]||(m[5]=E("span",{class:"port-label"},"AUD",-1))])]),E("div",Hb,[E("div",{class:"node-header",style:de({borderLeftColor:i.value})},[pe(B(Cl),{size:14,class:"node-icon",style:de({color:i.value})},null,8,["style"]),m[6]||(m[6]=E("span",{class:"node-title"},"Scope",-1))],4),E("div",Yb,[E("canvas",{ref_key:"canvas",ref:r,width:"180",height:"100",class:"scope-canvas"},null,512)]),E("div",Xb,[E("div",Gb,[m[7]||(m[7]=E("label",null,"TIME",-1)),E("input",{type:"range",value:s.value,min:"0.25",max:"4",step:"0.25",onInput:m[0]||(m[0]=g=>c(parseFloat(g.target.value))),onMousedown:m[1]||(m[1]=he(()=>{},["stop"]))},null,40,Ub)]),E("div",Zb,[m[8]||(m[8]=E("label",null,"AMP",-1)),E("input",{type:"range",value:u.value,min:"0.1",max:"2",step:"0.1",onInput:m[2]||(m[2]=g=>d(parseFloat(g.target.value))),onMousedown:m[3]||(m[3]=he(()=>{},["stop"]))},null,40,qb)])])])],2))}}),Kb=Ke(Wb,[["__scopeId","data-v-e4c9663a"]]),jb={id:"graph",name:"Graph",version:"1.0.0",category:"debug",description:"Plot X/Y values with dynamic point inputs",icon:"line-chart",platforms:["web","electron"],inputs:[{id:"x0",type:"number",label:"X"},{id:"y0",type:"number",label:"Y"}],outputs:[],controls:[{id:"pointCount",type:"number",label:"Points",default:1,props:{min:1,max:8}},{id:"displayMode",type:"select",label:"Mode",default:"line",props:{options:["line","scatter"]}},{id:"showGrid",type:"toggle",label:"Grid",default:!0},{id:"autoScale",type:"toggle",label:"Auto Scale",default:!0}]},Jb={class:"handles-column handles-left"},Qb={class:"handle-slot"},e1={class:"port-label"},t1={class:"handle-slot"},n1={class:"port-label"},o1={class:"node-content"},i1={class:"point-controls"},r1=["disabled"],l1={class:"point-count"},a1=["disabled"],s1={class:"graph-display"},u1={class:"graph-controls"},c1={class:"control-row"},d1=["value"],p1={class:"control-row"},f1=["checked"],h1=["checked"],g1=50,m1=ve({__name:"GraphNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=Xt(),o=bt(),i=Y(()=>{var w;return((w=lt.debug)==null?void 0:w.color)??"var(--color-neutral-400)"}),r=fe(null),l=fe(null),a=Y(()=>{var w;return((w=t.data)==null?void 0:w.pointCount)??3}),s=Y(()=>{var w;return((w=t.data)==null?void 0:w.displayMode)??"line"}),u=Y(()=>{var w;return((w=t.data)==null?void 0:w.showGrid)??!0}),c=Y(()=>{var w;return((w=t.data)==null?void 0:w.autoScale)??!0}),d=fe(new Map);let f=null;function p(w,z){o.updateNodeData(t.id,{[w]:z})}function $(){a.value<8&&p("pointCount",a.value+1)}function _(){a.value>1&&(p("pointCount",a.value-1),d.value.delete(a.value-1))}function C(){var b,R;if(!r.value||!l.value)return;const w=r.value.width,z=r.value.height,I=l.value;I.fillStyle="#0f0f0f",I.fillRect(0,0,w,z);const q=n.nodeMetrics.get(t.id),j=[];for(let S=0;S<a.value;S++){const A=((b=q==null?void 0:q.outputValues)==null?void 0:b[`_point${S}_x`])??0,D=((R=q==null?void 0:q.outputValues)==null?void 0:R[`_point${S}_y`])??0;j.push({x:A,y:D,index:S}),d.value.has(S)||d.value.set(S,[]);const H=d.value.get(S);H.push({x:A,y:D}),H.length>g1&&H.shift()}let te=0,W=1,O=0,y=1;if(c.value&&j.length>0){const S=Array.from(d.value.values()).flat();if(S.length>0){te=Math.min(...S.map(H=>H.x)),W=Math.max(...S.map(H=>H.x)),O=Math.min(...S.map(H=>H.y)),y=Math.max(...S.map(H=>H.y));const A=(W-te)*.1||.5,D=(y-O)*.1||.5;te-=A,W+=A,O-=D,y+=D}}const U=S=>(S-te)/(W-te)*w,h=S=>z-(S-O)/(y-O)*z;if(u.value){I.strokeStyle="#1a2a1a",I.lineWidth=1;for(let S=0;S<=8;S++){const A=w/8*S;I.beginPath(),I.moveTo(A,0),I.lineTo(A,z),I.stroke()}for(let S=0;S<=6;S++){const A=z/6*S;I.beginPath(),I.moveTo(0,A),I.lineTo(w,A),I.stroke()}if(I.strokeStyle="#2a4a2a",I.lineWidth=1.5,te<=0&&W>=0){const S=U(0);I.beginPath(),I.moveTo(S,0),I.lineTo(S,z),I.stroke()}if(O<=0&&y>=0){const S=h(0);I.beginPath(),I.moveTo(0,S),I.lineTo(w,S),I.stroke()}}const T=["#22c55e","#3b82f6","#f59e0b","#ef4444","#8b5cf6","#ec4899","#14b8a6","#f97316"];if(s.value==="line")for(let S=0;S<a.value;S++){const A=d.value.get(S)??[];if(!(A.length<2)){I.strokeStyle=T[S%T.length],I.lineWidth=2,I.beginPath();for(let D=0;D<A.length;D++){const H=U(A[D].x),V=h(A[D].y);D===0?I.moveTo(H,V):I.lineTo(H,V)}I.stroke()}}else if(s.value==="scatter")for(let S=0;S<a.value;S++){const A=d.value.get(S)??[];I.fillStyle=T[S%T.length];for(let D=0;D<A.length;D++){const H=(D+1)/A.length;I.globalAlpha=H*.8;const V=U(A[D].x),X=h(A[D].y);I.beginPath(),I.arc(V,X,3,0,Math.PI*2),I.fill()}I.globalAlpha=1}for(let S=0;S<j.length;S++){const A=U(j[S].x),D=h(j[S].y);I.fillStyle=T[S%T.length],I.shadowColor=T[S%T.length],I.shadowBlur=8,I.beginPath(),I.arc(A,D,5,0,Math.PI*2),I.fill(),I.shadowBlur=0,I.fillStyle="#fff",I.beginPath(),I.arc(A,D,2,0,Math.PI*2),I.fill()}I.fillStyle="#666",I.font="9px monospace",I.fillText(`X: ${te.toFixed(1)}..${W.toFixed(1)}`,4,10),I.fillText(`Y: ${O.toFixed(1)}..${y.toFixed(1)}`,4,22),f=requestAnimationFrame(C)}function v(){f===null&&C()}function m(){f!==null&&(cancelAnimationFrame(f),f=null)}xe(()=>n.isRunning,w=>{w?v():m()},{immediate:!0}),Ve(()=>{r.value&&(l.value=r.value.getContext("2d"),n.isRunning?v():l.value&&(l.value.fillStyle="#0f0f0f",l.value.fillRect(0,0,r.value.width,r.value.height),l.value.fillStyle="#333",l.value.font="10px monospace",l.value.fillText("NO DATA",70,60)))}),Mt(()=>{m()});function g(w){var z;return((z=Ge[w])==null?void 0:z.color)??"var(--color-neutral-400)"}return(w,z)=>(G(),ee("div",{class:Se(["graph-node",{selected:t.selected}])},[E("div",Jb,[(G(!0),ee(Pe,null,ft(a.value,I=>(G(),ee(Pe,{key:`point-${I}`},[E("div",Qb,[pe(B(Me),{id:`x${I-1}`,type:"target",position:B(ne).Left,style:de({background:g("number")}),class:"port-handle"},null,8,["id","position","style"]),E("span",e1,"X"+Ne(I),1)]),E("div",t1,[pe(B(Me),{id:`y${I-1}`,type:"target",position:B(ne).Left,style:de({background:g("number")}),class:"port-handle"},null,8,["id","position","style"]),E("span",n1,"Y"+Ne(I),1)])],64))),128))]),E("div",o1,[E("div",{class:"node-header",style:de({borderLeftColor:i.value})},[pe(B(Ys),{size:14,class:"node-icon",style:de({color:i.value})},null,8,["style"]),z[8]||(z[8]=E("span",{class:"node-title"},"Graph",-1)),E("div",i1,[E("button",{class:"point-btn",disabled:a.value<=1,onClick:he(_,["stop"]),onMousedown:z[0]||(z[0]=he(()=>{},["stop"]))},[pe(B(Zs),{size:12})],40,r1),E("span",l1,Ne(a.value),1),E("button",{class:"point-btn",disabled:a.value>=8,onClick:he($,["stop"]),onMousedown:z[1]||(z[1]=he(()=>{},["stop"]))},[pe(B($s),{size:12})],40,a1)])],4),E("div",s1,[E("canvas",{ref_key:"canvas",ref:r,width:"200",height:"120",class:"graph-canvas"},null,512)]),E("div",u1,[E("div",c1,[z[10]||(z[10]=E("label",null,"MODE",-1)),E("select",{value:s.value,onChange:z[2]||(z[2]=I=>p("displayMode",I.target.value)),onMousedown:z[3]||(z[3]=he(()=>{},["stop"]))},[...z[9]||(z[9]=[E("option",{value:"line"}," Line ",-1),E("option",{value:"scatter"}," Scatter ",-1)])],40,d1)]),E("div",p1,[E("label",{class:"toggle-label",onMousedown:z[5]||(z[5]=he(()=>{},["stop"]))},[E("input",{type:"checkbox",checked:u.value,onChange:z[4]||(z[4]=I=>p("showGrid",I.target.checked))},null,40,f1),z[11]||(z[11]=ci(" Grid ",-1))],32),E("label",{class:"toggle-label",onMousedown:z[7]||(z[7]=he(()=>{},["stop"]))},[E("input",{type:"checkbox",checked:c.value,onChange:z[6]||(z[6]=I=>p("autoScale",I.target.checked))},null,40,h1),z[12]||(z[12]=ci(" Auto ",-1))],32)])])])],2))}}),y1=Ke(m1,[["__scopeId","data-v-abffbb02"]]),v1={id:"equalizer",name:"Equalizer",version:"1.0.0",category:"debug",description:"Visualize audio frequency spectrum as bars",icon:"bar-chart-3",platforms:["web","electron"],inputs:[{id:"audio",type:"audio",label:"Audio"}],outputs:[],controls:[{id:"barCount",type:"slider",label:"Bars",default:16,props:{min:8,max:32,step:4}},{id:"colorMode",type:"select",label:"Color",default:"gradient",props:{options:["gradient","spectrum","solid"]}},{id:"smoothing",type:"slider",label:"Smooth",default:.8,props:{min:0,max:.95,step:.05}}]},b1={class:"handles-column handles-left"},w1={class:"handle-slot"},x1={class:"node-content"},_1={class:"eq-display"},S1={class:"eq-controls"},$1={class:"control-row"},N1=["value"],E1={class:"value-label"},k1={class:"control-row"},C1=["value"],M1=ve({__name:"EqualizerNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=Xt(),o=bt(),i=Y(()=>{var m;return((m=lt.debug)==null?void 0:m.color)??"var(--color-neutral-400)"}),r=fe(null),l=fe(null),a=Y(()=>{var m;return((m=t.data)==null?void 0:m.barCount)??16}),s=Y(()=>{var m;return((m=t.data)==null?void 0:m.colorMode)??"gradient"}),u=Y(()=>{var m;return((m=t.data)==null?void 0:m.smoothing)??.8}),c=fe([]);let d=null;function f(m,g){o.updateNodeData(t.id,{[m]:g})}function p(){var O;if(!r.value||!l.value)return;const m=r.value.width,g=r.value.height,w=l.value;w.fillStyle="#0a0a0a",w.fillRect(0,0,m,g);const z=n.nodeMetrics.get(t.id),I=(O=z==null?void 0:z.outputValues)==null?void 0:O._fft_data;if(z&&!I&&console.log("[Equalizer] Metrics exist but no FFT data:",Object.keys(z.outputValues||{})),!I||I.length===0){w.fillStyle="#1a1a1a";const y=(m-(a.value+1)*2)/a.value;for(let U=0;U<a.value;U++){const h=2+U*(y+2);w.fillRect(h,g-10,y,8)}d=requestAnimationFrame(p);return}c.value.length!==a.value&&(c.value=new Array(a.value).fill(0));const q=Math.floor(I.length/a.value),j=[];for(let y=0;y<a.value;y++){let U=0;const h=y*q,T=Math.min(h+q,I.length);for(let b=h;b<T;b++){const R=(I[b]+100)/100;U+=Math.max(0,Math.min(1,R))}j.push(U/q)}for(let y=0;y<a.value;y++){const U=j[y]??0;c.value[y]=c.value[y]*u.value+U*(1-u.value)}const te=(m-(a.value+1)*2)/a.value,W=g-8;for(let y=0;y<a.value;y++){const U=c.value[y],h=Math.max(4,U*W),T=2+y*(te+2),b=g-h-2;if(s.value==="gradient"){const R=120-U*120;w.fillStyle=`hsl(${R}, 80%, 50%)`}else if(s.value==="spectrum"){const R=y/a.value*300;w.fillStyle=`hsl(${R}, 80%, 55%)`}else w.fillStyle="#22d3ee";w.beginPath(),w.roundRect(T,b,te,h,[2,2,0,0]),w.fill(),U>.5&&(w.shadowColor=w.fillStyle,w.shadowBlur=U*10,w.fill(),w.shadowBlur=0)}d=requestAnimationFrame(p)}function $(){d===null&&p()}function _(){d!==null&&(cancelAnimationFrame(d),d=null)}function C(){if(!r.value||!l.value)return;const m=r.value.width,g=r.value.height,w=l.value;w.fillStyle="#0a0a0a",w.fillRect(0,0,m,g),w.fillStyle="#1a1a1a";const z=(m-(a.value+1)*2)/a.value;for(let I=0;I<a.value;I++){const q=2+I*(z+2);w.fillRect(q,g-10,z,8)}w.fillStyle="#333",w.font="10px monospace",w.textAlign="center",w.fillText("NO SIGNAL",m/2,g/2),w.textAlign="left"}xe(()=>n.isRunning,m=>{l.value&&(_(),m?$():C())}),Ve(()=>{r.value&&(l.value=r.value.getContext("2d"),n.isRunning?$():C())}),Mt(()=>{_()});function v(m){var g;return((g=Ge[m])==null?void 0:g.color)??"var(--color-neutral-400)"}return(m,g)=>(G(),ee("div",{class:Se(["equalizer-node",{selected:t.selected}])},[E("div",b1,[E("div",w1,[pe(B(Me),{id:"audio",type:"target",position:B(ne).Left,style:de({background:v("audio")}),class:"port-handle"},null,8,["position","style"]),g[4]||(g[4]=E("span",{class:"port-label"},"IN",-1))])]),E("div",x1,[E("div",{class:"node-header",style:de({borderLeftColor:i.value})},[pe(B(zs),{size:14,class:"node-icon",style:de({color:i.value})},null,8,["style"]),g[5]||(g[5]=E("span",{class:"node-title"},"EQ",-1))],4),E("div",_1,[E("canvas",{ref_key:"canvas",ref:r,width:"180",height:"80",class:"eq-canvas"},null,512)]),E("div",S1,[E("div",$1,[g[6]||(g[6]=E("label",null,"BARS",-1)),E("input",{type:"range",value:a.value,min:"8",max:"32",step:"4",onInput:g[0]||(g[0]=w=>f("barCount",parseInt(w.target.value))),onMousedown:g[1]||(g[1]=he(()=>{},["stop"]))},null,40,N1),E("span",E1,Ne(a.value),1)]),E("div",k1,[g[8]||(g[8]=E("label",null,"COLOR",-1)),E("select",{value:s.value,onChange:g[2]||(g[2]=w=>f("colorMode",w.target.value)),onMousedown:g[3]||(g[3]=he(()=>{},["stop"]))},[...g[7]||(g[7]=[E("option",{value:"gradient"}," Gradient ",-1),E("option",{value:"spectrum"}," Spectrum ",-1),E("option",{value:"solid"}," Solid ",-1)])],40,C1)])])])],2))}}),T1=Ke(M1,[["__scopeId","data-v-771d07d1"]]),I1=[Tb,Ib,Ob,jb,v1],D1={id:"add",name:"Add",version:"1.0.0",category:"math",description:"Add two numbers",icon:"plus",platforms:["web","electron"],inputs:[{id:"a",type:"number",label:"A"},{id:"b",type:"number",label:"B"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[]},P1={id:"subtract",name:"Subtract",version:"1.0.0",category:"math",description:"Subtract two numbers",icon:"minus",platforms:["web","electron"],inputs:[{id:"a",type:"number",label:"A"},{id:"b",type:"number",label:"B"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[]},A1={id:"multiply",name:"Multiply",version:"1.0.0",category:"math",description:"Multiply two numbers",icon:"x",platforms:["web","electron"],inputs:[{id:"a",type:"number",label:"A"},{id:"b",type:"number",label:"B"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[]},z1={id:"divide",name:"Divide",version:"1.0.0",category:"math",description:"Divide two numbers",icon:"divide",platforms:["web","electron"],inputs:[{id:"a",type:"number",label:"A"},{id:"b",type:"number",label:"B"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[]},R1={id:"clamp",name:"Clamp",version:"1.0.0",category:"math",description:"Clamp a value between min and max",icon:"shrink",platforms:["web","electron"],inputs:[{id:"value",type:"number",label:"Value"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[{id:"min",type:"number",label:"Min",default:0},{id:"max",type:"number",label:"Max",default:1}]},B1={id:"abs",name:"Absolute",version:"1.0.0",category:"math",description:"Get absolute value",icon:"flip-horizontal",platforms:["web","electron"],inputs:[{id:"value",type:"number",label:"Value"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[]},O1={id:"random",name:"Random",version:"1.0.0",category:"math",description:"Generate random number",icon:"shuffle",platforms:["web","electron"],inputs:[{id:"seed",type:"number",label:"Seed"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[{id:"min",type:"number",label:"Min",default:0},{id:"max",type:"number",label:"Max",default:1}]},V1={id:"map-range",name:"Map Range",version:"1.0.0",category:"math",description:"Remap a value from one range to another",icon:"arrow-right-left",platforms:["web","electron"],inputs:[{id:"value",type:"number",label:"Value",required:!0}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[{id:"inMin",type:"number",label:"In Min",default:0},{id:"inMax",type:"number",label:"In Max",default:1},{id:"outMin",type:"number",label:"Out Min",default:0},{id:"outMax",type:"number",label:"Out Max",default:100}]},L1={id:"smooth",name:"Smooth",version:"1.0.0",category:"math",description:"Smooth value changes over time",icon:"trending-up",platforms:["web","electron"],inputs:[{id:"value",type:"number",label:"Value"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[{id:"factor",type:"slider",label:"Factor",default:.1,props:{min:.01,max:1,step:.01}}]},F1=[D1,P1,A1,z1,R1,B1,O1,V1,L1],H1={id:"time",name:"Time",version:"1.0.0",category:"timing",description:"Current time and frame info",icon:"clock",platforms:["web","electron"],inputs:[],outputs:[{id:"time",type:"number",label:"Time"},{id:"delta",type:"number",label:"Delta"},{id:"frame",type:"number",label:"Frame"}],controls:[]},Y1={id:"lfo",name:"LFO",version:"1.0.0",category:"timing",description:"Low frequency oscillator",icon:"waves",platforms:["web","electron"],inputs:[],outputs:[{id:"value",type:"number",label:"Value"}],controls:[{id:"frequency",type:"number",label:"Frequency",default:1},{id:"amplitude",type:"number",label:"Amplitude",default:1},{id:"offset",type:"number",label:"Offset",default:0},{id:"waveform",type:"select",label:"Waveform",default:"sine",props:{options:["sine","square","triangle","sawtooth"]}}]},X1={id:"start",name:"Start",version:"1.0.0",category:"timing",description:"Fires once when flow starts running",icon:"play",platforms:["web","electron"],inputs:[],outputs:[{id:"trigger",type:"trigger",label:"Trigger"}],controls:[]},G1={id:"interval",name:"Interval",version:"1.0.0",category:"timing",description:"Fires at regular intervals",icon:"timer",platforms:["web","electron"],inputs:[{id:"enabled",type:"boolean",label:"Enabled"}],outputs:[{id:"trigger",type:"trigger",label:"Trigger"}],controls:[{id:"interval",type:"number",label:"Interval (ms)",default:1e3,props:{min:10,max:6e4}},{id:"enabled",type:"toggle",label:"Enabled",default:!0}]},U1={id:"delay",name:"Delay",version:"1.0.0",category:"timing",description:"Delays a value by specified time",icon:"clock",platforms:["web","electron"],inputs:[{id:"value",type:"any",label:"Value"}],outputs:[{id:"value",type:"any",label:"Delayed"}],controls:[{id:"delay",type:"number",label:"Delay (ms)",default:500,props:{min:0,max:1e4}}]},Z1={id:"timer",name:"Timer",version:"1.0.0",category:"timing",description:"Stopwatch timer with start/stop/reset",icon:"timer",platforms:["web","electron"],inputs:[{id:"start",type:"trigger",label:"Start"},{id:"stop",type:"trigger",label:"Stop"},{id:"reset",type:"trigger",label:"Reset"}],outputs:[{id:"elapsed",type:"number",label:"Elapsed (s)"},{id:"running",type:"boolean",label:"Running"}],controls:[]},q1=[H1,Y1,X1,G1,U1,Z1],W1={id:"compare",name:"Compare",version:"1.0.0",category:"logic",description:"Compare two values",icon:"git-compare",platforms:["web","electron"],inputs:[{id:"a",type:"number",label:"A"},{id:"b",type:"number",label:"B"}],outputs:[{id:"result",type:"boolean",label:"Result"}],controls:[{id:"operator",type:"select",label:"Op",default:"==",props:{options:["==","!=",">",">=","<","<="]}}]},K1={id:"and",name:"And",version:"1.0.0",category:"logic",description:"Logical AND",icon:"circle-dot",platforms:["web","electron"],inputs:[{id:"a",type:"boolean",label:"A"},{id:"b",type:"boolean",label:"B"}],outputs:[{id:"result",type:"boolean",label:"Result"}],controls:[]},j1={id:"or",name:"Or",version:"1.0.0",category:"logic",description:"Logical OR",icon:"circle",platforms:["web","electron"],inputs:[{id:"a",type:"boolean",label:"A"},{id:"b",type:"boolean",label:"B"}],outputs:[{id:"result",type:"boolean",label:"Result"}],controls:[]},J1={id:"not",name:"Not",version:"1.0.0",category:"logic",description:"Logical NOT",icon:"circle-off",platforms:["web","electron"],inputs:[{id:"value",type:"boolean",label:"Value"}],outputs:[{id:"result",type:"boolean",label:"Result"}],controls:[]},Q1={id:"gate",name:"Gate",version:"1.0.0",category:"logic",description:"Pass or block value",icon:"door-open",platforms:["web","electron"],inputs:[{id:"value",type:"any",label:"Value"},{id:"gate",type:"boolean",label:"Gate"}],outputs:[{id:"result",type:"any",label:"Result"}],controls:[{id:"open",type:"toggle",label:"Open",default:!0}]},ew={id:"switch",name:"Switch",version:"1.0.0",category:"logic",description:"Select between two values",icon:"git-branch",platforms:["web","electron"],inputs:[{id:"condition",type:"boolean",label:"Condition"},{id:"true",type:"any",label:"True"},{id:"false",type:"any",label:"False"}],outputs:[{id:"result",type:"any",label:"Result"}],controls:[]},tw={id:"select",name:"Select",version:"1.0.0",category:"logic",description:"Select one of multiple inputs by index",icon:"list",platforms:["web","electron"],inputs:[{id:"index",type:"number",label:"Index"},{id:"a",type:"any",label:"A"},{id:"b",type:"any",label:"B"},{id:"c",type:"any",label:"C"},{id:"d",type:"any",label:"D"}],outputs:[{id:"result",type:"any",label:"Result"}],controls:[]},nw=[W1,K1,j1,J1,Q1,ew,tw],ow={id:"oscillator",name:"Oscillator",version:"1.0.0",category:"audio",description:"Generate audio waveform",icon:"waves",platforms:["web","electron"],inputs:[{id:"frequency",type:"number",label:"Freq"},{id:"detune",type:"number",label:"Detune"}],outputs:[{id:"audio",type:"audio",label:"Audio"},{id:"frequency",type:"number",label:"Freq"}],controls:[{id:"frequency",type:"number",label:"Frequency",default:440},{id:"detune",type:"number",label:"Detune",default:0},{id:"waveform",type:"select",label:"Waveform",default:"sine",props:{options:["sine","square","triangle","sawtooth"]}},{id:"volume",type:"number",label:"Volume (dB)",default:-6}]},iw={id:"audio-output",name:"Audio Output",version:"1.0.0",category:"audio",description:"Output audio to speakers",icon:"volume-2",platforms:["web","electron"],inputs:[{id:"audio",type:"audio",label:"Audio"}],outputs:[],controls:[{id:"volume",type:"number",label:"Volume (dB)",default:0},{id:"mute",type:"toggle",label:"Mute",default:!1}]},rw={id:"audio-analyzer",name:"Audio Analyzer",version:"1.0.0",category:"audio",description:"Analyze audio levels and frequencies",icon:"bar-chart-2",platforms:["web","electron"],inputs:[{id:"audio",type:"audio",label:"Audio"}],outputs:[{id:"level",type:"number",label:"Level"},{id:"bass",type:"number",label:"Bass"},{id:"mid",type:"number",label:"Mid"},{id:"high",type:"number",label:"High"}],controls:[{id:"smoothing",type:"number",label:"Smoothing",default:.8}]},lw={id:"gain",name:"Gain",version:"1.0.0",category:"audio",description:"Adjust audio volume",icon:"volume-1",platforms:["web","electron"],inputs:[{id:"audio",type:"audio",label:"Audio"},{id:"gain",type:"number",label:"Gain"}],outputs:[{id:"audio",type:"audio",label:"Audio"}],controls:[{id:"gain",type:"number",label:"Gain",default:1}]},aw={id:"filter",name:"Filter",version:"1.0.0",category:"audio",description:"Filter audio frequencies",icon:"sliders",platforms:["web","electron"],inputs:[{id:"audio",type:"audio",label:"Audio"},{id:"frequency",type:"number",label:"Freq"}],outputs:[{id:"audio",type:"audio",label:"Audio"}],controls:[{id:"frequency",type:"number",label:"Frequency",default:1e3},{id:"Q",type:"number",label:"Q",default:1},{id:"type",type:"select",label:"Type",default:"lowpass",props:{options:["lowpass","highpass","bandpass","notch"]}}]},sw={id:"audio-delay",name:"Delay",version:"1.0.0",category:"audio",description:"Add delay/echo effect",icon:"repeat",platforms:["web","electron"],inputs:[{id:"audio",type:"audio",label:"Audio"},{id:"time",type:"number",label:"Time"}],outputs:[{id:"audio",type:"audio",label:"Audio"}],controls:[{id:"time",type:"number",label:"Delay (s)",default:.25},{id:"feedback",type:"number",label:"Feedback",default:.5},{id:"wet",type:"number",label:"Wet",default:.5}]},uw={id:"beat-detect",name:"Beat Detect",version:"1.0.0",category:"audio",description:"Detect beats and estimate BPM",icon:"activity",platforms:["web","electron"],inputs:[{id:"audio",type:"audio",label:"Audio",required:!0}],outputs:[{id:"beat",type:"trigger",label:"Beat"},{id:"bpm",type:"number",label:"BPM"},{id:"energy",type:"number",label:"Energy"}],controls:[{id:"sensitivity",type:"slider",label:"Sensitivity",default:1.5,props:{min:1,max:3,step:.1}},{id:"minInterval",type:"number",label:"Min Interval (ms)",default:200,props:{min:50,max:500}},{id:"decayRate",type:"slider",label:"Decay Rate",default:.95,props:{min:.8,max:.99,step:.01}}]},cw={id:"audio-player",name:"Audio Player",version:"1.0.0",category:"audio",description:"Play audio files from URL",icon:"play-circle",platforms:["web","electron"],inputs:[{id:"url",type:"string",label:"URL"},{id:"play",type:"trigger",label:"Play"},{id:"stop",type:"trigger",label:"Stop"}],outputs:[{id:"audio",type:"audio",label:"Audio"},{id:"playing",type:"boolean",label:"Playing"},{id:"duration",type:"number",label:"Duration"},{id:"loading",type:"boolean",label:"Loading"},{id:"error",type:"string",label:"Error"}],controls:[{id:"url",type:"text",label:"URL",default:""},{id:"loop",type:"toggle",label:"Loop",default:!1},{id:"autoplay",type:"toggle",label:"Autoplay",default:!1},{id:"volume",type:"slider",label:"Volume (dB)",default:0,props:{min:-40,max:6,step:1}},{id:"playbackRate",type:"slider",label:"Speed",default:1,props:{min:.5,max:2,step:.1}}]},dw={id:"envelope",name:"Envelope (ADSR)",version:"1.0.0",category:"audio",description:"ADSR amplitude envelope",icon:"trending-up",platforms:["web","electron"],inputs:[{id:"trigger",type:"trigger",label:"Trigger"},{id:"release",type:"trigger",label:"Release"}],outputs:[{id:"envelope",type:"audio",label:"Envelope"},{id:"value",type:"number",label:"Value"}],controls:[{id:"attack",type:"slider",label:"Attack",default:.01,props:{min:.001,max:2,step:.001}},{id:"decay",type:"slider",label:"Decay",default:.1,props:{min:.001,max:2,step:.001}},{id:"sustain",type:"slider",label:"Sustain",default:.5,props:{min:0,max:1,step:.01}},{id:"release",type:"slider",label:"Release",default:.3,props:{min:.001,max:5,step:.001}}]},pw={id:"reverb",name:"Reverb",version:"1.0.0",category:"audio",description:"Add reverb effect",icon:"waves",platforms:["web","electron"],inputs:[{id:"audio",type:"audio",label:"Audio",required:!0}],outputs:[{id:"audio",type:"audio",label:"Audio"}],controls:[{id:"decay",type:"slider",label:"Decay",default:1.5,props:{min:.1,max:10,step:.1}},{id:"wet",type:"slider",label:"Wet",default:.5,props:{min:0,max:1,step:.01}},{id:"preDelay",type:"slider",label:"Pre-Delay",default:.01,props:{min:0,max:.1,step:.001}}]},fw=[ow,iw,rw,lw,aw,sw,uw,cw,dw,pw],hw={id:"shader",name:"Shader",version:"2.0.0",category:"visual",description:"Custom GLSL shader with presets and Shadertoy support",icon:"code",platforms:["web","electron"],inputs:[{id:"texture0",type:"texture",label:"Texture 0"},{id:"texture1",type:"texture",label:"Texture 1"},{id:"texture2",type:"texture",label:"Texture 2"},{id:"texture3",type:"texture",label:"Texture 3"},{id:"u_param1",type:"number",label:"Param 1"},{id:"u_param2",type:"number",label:"Param 2"},{id:"u_param3",type:"number",label:"Param 3"},{id:"u_param4",type:"number",label:"Param 4"},{id:"u_color",type:"data",label:"Color"},{id:"u_vec2",type:"data",label:"Vec2"}],outputs:[{id:"texture",type:"texture",label:"Texture"}],controls:[{id:"preset",type:"select",label:"Preset",default:"custom",props:{options:["custom","--- Generators ---","gradient","noise","plasma","circles","waves","voronoi","--- Effects ---","chromatic-aberration","pixelate","vignette","glitch","edge-detect","kaleidoscope","--- Utility ---","solid-color","uv-debug","passthrough","--- Artistic ---","watercolor","halftone"]}},{id:"code",type:"code",label:"Fragment Shader",default:`void mainImage(out vec4 fragColor, in vec2 fragCoord) {
  vec2 uv = fragCoord / iResolution.xy;
  vec3 col = 0.5 + 0.5 * cos(iTime + uv.xyx + vec3(0, 2, 4));
  fragColor = vec4(col, 1.0);
}`},{id:"vertexCode",type:"code",label:"Vertex Shader (optional)",default:""},{id:"shadertoy",type:"toggle",label:"Shadertoy Mode",default:!0},{id:"u_param1",type:"slider",label:"Param 1",default:.5,props:{min:0,max:1,step:.01}},{id:"u_param2",type:"slider",label:"Param 2",default:.5,props:{min:0,max:1,step:.01}},{id:"u_param3",type:"slider",label:"Param 3",default:.5,props:{min:0,max:1,step:.01}},{id:"u_param4",type:"slider",label:"Param 4",default:.5,props:{min:0,max:1,step:.01}}]},gw={id:"webcam",name:"Webcam",version:"1.0.0",category:"visual",description:"Capture video from camera",icon:"camera",platforms:["web","electron"],inputs:[],outputs:[{id:"texture",type:"texture",label:"Texture"},{id:"video",type:"video",label:"Video"},{id:"width",type:"number",label:"Width"},{id:"height",type:"number",label:"Height"}],controls:[{id:"enabled",type:"toggle",label:"Enabled",default:!0},{id:"device",type:"select",label:"Device",default:"default"}]},mw={id:"color",name:"Color",version:"1.0.0",category:"visual",description:"Create RGBA color value",icon:"palette",platforms:["web","electron"],inputs:[{id:"r",type:"number",label:"R"},{id:"g",type:"number",label:"G"},{id:"b",type:"number",label:"B"},{id:"a",type:"number",label:"A"}],outputs:[{id:"color",type:"data",label:"Color"},{id:"r",type:"number",label:"R"},{id:"g",type:"number",label:"G"},{id:"b",type:"number",label:"B"},{id:"a",type:"number",label:"A"}],controls:[{id:"r",type:"slider",label:"R",default:1,props:{min:0,max:1,step:.01}},{id:"g",type:"slider",label:"G",default:1,props:{min:0,max:1,step:.01}},{id:"b",type:"slider",label:"B",default:1,props:{min:0,max:1,step:.01}},{id:"a",type:"slider",label:"A",default:1,props:{min:0,max:1,step:.01}}]},yw={id:"texture-display",name:"Texture Display",version:"1.0.0",category:"visual",description:"Display texture on canvas",icon:"monitor",platforms:["web","electron"],inputs:[{id:"texture",type:"texture",label:"Texture"}],outputs:[],controls:[]},vw={id:"blend",name:"Blend",version:"1.0.0",category:"visual",description:"Blend two textures together",icon:"layers",platforms:["web","electron"],inputs:[{id:"a",type:"texture",label:"A"},{id:"b",type:"texture",label:"B"},{id:"mix",type:"number",label:"Mix"}],outputs:[{id:"texture",type:"texture",label:"Texture"}],controls:[{id:"mix",type:"slider",label:"Mix",default:.5,props:{min:0,max:1,step:.01}},{id:"mode",type:"select",label:"Mode",default:"normal",props:{options:["normal","add","multiply","screen","overlay"]}}]},bw={id:"blur",name:"Blur",version:"1.0.0",category:"visual",description:"Apply Gaussian blur to texture",icon:"droplet",platforms:["web","electron"],inputs:[{id:"texture",type:"texture",label:"Texture"},{id:"radius",type:"number",label:"Radius"}],outputs:[{id:"texture",type:"texture",label:"Texture"}],controls:[{id:"radius",type:"slider",label:"Radius",default:5,props:{min:0,max:50,step:.5}},{id:"passes",type:"number",label:"Passes",default:2,props:{min:1,max:10}}]},ww={id:"color-correction",name:"Color Correction",version:"1.0.0",category:"visual",description:"Adjust brightness, contrast, saturation, hue, and gamma",icon:"palette",platforms:["web","electron"],inputs:[{id:"texture",type:"texture",label:"Texture"},{id:"brightness",type:"number",label:"Brightness"},{id:"contrast",type:"number",label:"Contrast"},{id:"saturation",type:"number",label:"Saturation"},{id:"hue",type:"number",label:"Hue"},{id:"gamma",type:"number",label:"Gamma"}],outputs:[{id:"texture",type:"texture",label:"Texture"}],controls:[{id:"brightness",type:"slider",label:"Brightness",default:0,props:{min:-1,max:1,step:.01}},{id:"contrast",type:"slider",label:"Contrast",default:1,props:{min:0,max:3,step:.01}},{id:"saturation",type:"slider",label:"Saturation",default:1,props:{min:0,max:3,step:.01}},{id:"hue",type:"slider",label:"Hue",default:0,props:{min:-180,max:180,step:1}},{id:"gamma",type:"slider",label:"Gamma",default:1,props:{min:.1,max:3,step:.01}}]},xw={id:"displacement",name:"Displacement",version:"1.0.0",category:"visual",description:"Displace texture using displacement map",icon:"move",platforms:["web","electron"],inputs:[{id:"texture",type:"texture",label:"Texture"},{id:"displacementMap",type:"texture",label:"Displacement Map"},{id:"strength",type:"number",label:"Strength"}],outputs:[{id:"texture",type:"texture",label:"Texture"}],controls:[{id:"strength",type:"slider",label:"Strength",default:.1,props:{min:0,max:1,step:.01}},{id:"channel",type:"select",label:"Channel",default:"rg",props:{options:["r","rg","rgb"]}}]},_w={id:"transform-2d",name:"Transform 2D",version:"1.0.0",category:"visual",description:"Apply 2D transforms (scale, rotate, translate)",icon:"move-3d",platforms:["web","electron"],inputs:[{id:"texture",type:"texture",label:"Texture"},{id:"scale",type:"number",label:"Scale"},{id:"rotation",type:"number",label:"Rotation"},{id:"translateX",type:"number",label:"Translate X"},{id:"translateY",type:"number",label:"Translate Y"}],outputs:[{id:"texture",type:"texture",label:"Texture"}],controls:[{id:"scale",type:"slider",label:"Scale",default:1,props:{min:.1,max:5,step:.01}},{id:"rotation",type:"slider",label:"Rotation",default:0,props:{min:-180,max:180,step:1}},{id:"translateX",type:"slider",label:"Translate X",default:0,props:{min:-1,max:1,step:.01}},{id:"translateY",type:"slider",label:"Translate Y",default:0,props:{min:-1,max:1,step:.01}}]},Sw=[hw,gw,mw,yw,vw,bw,ww,xw,_w],$w={id:"text-generation",name:"Text Generate",version:"1.0.0",category:"ai",description:"Generate text using local language models",icon:"message-square",platforms:["web","electron"],inputs:[{id:"prompt",type:"string",label:"Prompt"},{id:"trigger",type:"trigger",label:"Generate"}],outputs:[{id:"text",type:"string",label:"Generated Text"},{id:"loading",type:"boolean",label:"Loading"}],controls:[{id:"prompt",type:"text",label:"Prompt",default:"Once upon a time"},{id:"maxTokens",type:"number",label:"Max Tokens",default:50,props:{min:10,max:200}},{id:"temperature",type:"slider",label:"Temperature",default:.7,props:{min:.1,max:2,step:.1}}]},Nw={id:"image-classification",name:"Classify Image",version:"1.0.0",category:"ai",description:"Classify images using Vision Transformer",icon:"scan",platforms:["web","electron"],inputs:[{id:"image",type:"data",label:"Image"},{id:"trigger",type:"trigger",label:"Classify"}],outputs:[{id:"labels",type:"data",label:"Labels"},{id:"topLabel",type:"string",label:"Top Label"},{id:"topScore",type:"number",label:"Top Score"},{id:"loading",type:"boolean",label:"Loading"}],controls:[{id:"topK",type:"number",label:"Top K",default:5,props:{min:1,max:10}},{id:"interval",type:"number",label:"Frame Interval",default:30,props:{min:1,max:120}}]},Ew={id:"sentiment-analysis",name:"Sentiment",version:"1.0.0",category:"ai",description:"Analyze text sentiment (positive/negative)",icon:"smile",platforms:["web","electron"],inputs:[{id:"text",type:"string",label:"Text"},{id:"trigger",type:"trigger",label:"Analyze"}],outputs:[{id:"sentiment",type:"string",label:"Sentiment"},{id:"score",type:"number",label:"Score"},{id:"positive",type:"number",label:"Positive"},{id:"negative",type:"number",label:"Negative"},{id:"loading",type:"boolean",label:"Loading"}],controls:[]},kw={id:"image-captioning",name:"Caption Image",version:"1.0.0",category:"ai",description:"Generate captions for images",icon:"image",platforms:["web","electron"],inputs:[{id:"image",type:"data",label:"Image"},{id:"trigger",type:"trigger",label:"Caption"}],outputs:[{id:"caption",type:"string",label:"Caption"},{id:"loading",type:"boolean",label:"Loading"}],controls:[{id:"interval",type:"number",label:"Frame Interval",default:60,props:{min:1,max:300}}]},Cw={id:"feature-extraction",name:"Text Embed",version:"1.0.0",category:"ai",description:"Convert text to embedding vectors",icon:"hash",platforms:["web","electron"],inputs:[{id:"text",type:"string",label:"Text"},{id:"trigger",type:"trigger",label:"Extract"}],outputs:[{id:"embedding",type:"data",label:"Embedding"},{id:"dimensions",type:"number",label:"Dimensions"},{id:"loading",type:"boolean",label:"Loading"}],controls:[]},Mw={id:"object-detection",name:"Detect Objects",version:"1.0.0",category:"ai",description:"Detect and locate objects in images",icon:"box",platforms:["web","electron"],inputs:[{id:"image",type:"data",label:"Image"},{id:"trigger",type:"trigger",label:"Detect"}],outputs:[{id:"objects",type:"data",label:"Objects"},{id:"count",type:"number",label:"Count"},{id:"loading",type:"boolean",label:"Loading"}],controls:[{id:"threshold",type:"slider",label:"Threshold",default:.5,props:{min:.1,max:1,step:.05}},{id:"interval",type:"number",label:"Frame Interval",default:30,props:{min:1,max:120}}]},Tw={id:"speech-recognition",name:"Speech to Text",version:"1.0.0",category:"ai",description:"Transcribe audio to text using Whisper models",icon:"mic",platforms:["web","electron"],inputs:[{id:"audio",type:"audio",label:"Audio"},{id:"trigger",type:"trigger",label:"Transcribe"}],outputs:[{id:"text",type:"string",label:"Transcribed Text"},{id:"loading",type:"boolean",label:"Loading"}],controls:[]},Iw={id:"text-transformation",name:"Text Transform",version:"1.0.0",category:"ai",description:"Transform text - summarize, translate, or rewrite using T5/Flan models",icon:"refresh-cw",platforms:["web","electron"],inputs:[{id:"text",type:"string",label:"Input Text"},{id:"trigger",type:"trigger",label:"Transform"}],outputs:[{id:"result",type:"string",label:"Transformed Text"},{id:"loading",type:"boolean",label:"Loading"}],controls:[{id:"text",type:"text",label:"Input Text",default:""},{id:"task",type:"select",label:"Task",default:"summarize",props:{options:[{value:"summarize",label:"Summarize"},{value:"translate",label:"Translate to French"},{value:"paraphrase",label:"Paraphrase"}]}},{id:"maxTokens",type:"number",label:"Max Tokens",default:100,props:{min:10,max:500}}]},Dw=[$w,Nw,Ew,kw,Cw,Mw,Tw,Iw],Pw={id:"http-request",name:"HTTP Request",version:"1.0.0",category:"connectivity",description:"Make HTTP/REST API requests",icon:"globe",platforms:["web","electron"],inputs:[{id:"url",type:"string",label:"URL"},{id:"headers",type:"data",label:"Headers"},{id:"body",type:"data",label:"Body"},{id:"trigger",type:"trigger",label:"Fetch"}],outputs:[{id:"response",type:"data",label:"Response"},{id:"status",type:"number",label:"Status"},{id:"error",type:"string",label:"Error"},{id:"loading",type:"boolean",label:"Loading"}],controls:[{id:"url",type:"text",label:"URL",default:"https://api.example.com/data"},{id:"method",type:"select",label:"Method",default:"GET",props:{options:["GET","POST","PUT","DELETE","PATCH"]}}]},Aw={id:"websocket",name:"WebSocket",version:"1.0.0",category:"connectivity",description:"Real-time WebSocket connection",icon:"radio",platforms:["web","electron"],inputs:[{id:"url",type:"string",label:"URL"},{id:"send",type:"data",label:"Send"},{id:"connect",type:"boolean",label:"Connect"}],outputs:[{id:"message",type:"data",label:"Message"},{id:"connected",type:"boolean",label:"Connected"},{id:"error",type:"string",label:"Error"}],controls:[{id:"url",type:"text",label:"URL",default:"wss://echo.websocket.org"},{id:"autoConnect",type:"toggle",label:"Auto Connect",default:!1}]},zw={id:"midi-input",name:"MIDI Input",version:"1.0.0",category:"connectivity",description:"Receive MIDI messages from devices",icon:"music",platforms:["web","electron"],inputs:[],outputs:[{id:"note",type:"number",label:"Note"},{id:"velocity",type:"number",label:"Velocity"},{id:"noteOn",type:"boolean",label:"Note On"},{id:"cc",type:"number",label:"CC Number"},{id:"ccValue",type:"number",label:"CC Value"},{id:"connected",type:"boolean",label:"Connected"}],controls:[{id:"enabled",type:"toggle",label:"Enabled",default:!0},{id:"channel",type:"number",label:"Channel (-1=all)",default:-1,props:{min:-1,max:15}}]},Rw={id:"midi-output",name:"MIDI Output",version:"1.0.0",category:"connectivity",description:"Send MIDI messages to devices",icon:"music",platforms:["web","electron"],inputs:[{id:"note",type:"number",label:"Note"},{id:"velocity",type:"number",label:"Velocity"},{id:"trigger",type:"trigger",label:"Send"}],outputs:[{id:"connected",type:"boolean",label:"Connected"}],controls:[{id:"channel",type:"number",label:"Channel",default:0,props:{min:0,max:15}}]},Bw={id:"mqtt",name:"MQTT",version:"1.0.0",category:"connectivity",description:"MQTT pub/sub messaging (via WebSocket)",icon:"radio",platforms:["web","electron"],inputs:[{id:"url",type:"string",label:"Broker URL"},{id:"topic",type:"string",label:"Topic"},{id:"publish",type:"data",label:"Publish"}],outputs:[{id:"message",type:"data",label:"Message"},{id:"topic",type:"string",label:"Topic"},{id:"connected",type:"boolean",label:"Connected"},{id:"error",type:"string",label:"Error"}],controls:[{id:"url",type:"text",label:"Broker URL",default:"ws://localhost:8083/mqtt",props:{placeholder:"ws://broker:8083/mqtt"}},{id:"topic",type:"text",label:"Topic",default:"clasp/data",props:{placeholder:"topic/subtopic"}},{id:"connect",type:"toggle",label:"Connect",default:!0}]},Ow={id:"osc",name:"OSC",version:"1.0.0",category:"connectivity",description:"Open Sound Control over WebSocket",icon:"radio-tower",platforms:["web","electron"],inputs:[{id:"host",type:"string",label:"Host"},{id:"port",type:"number",label:"Port"},{id:"address",type:"string",label:"Address"},{id:"send",type:"data",label:"Send"}],outputs:[{id:"address",type:"string",label:"Address"},{id:"args",type:"data",label:"Arguments"},{id:"value",type:"number",label:"Value"},{id:"connected",type:"boolean",label:"Connected"},{id:"error",type:"string",label:"Error"}],controls:[{id:"host",type:"text",label:"Host",default:"localhost"},{id:"port",type:"number",label:"Port",default:8080,props:{min:1,max:65535}},{id:"address",type:"text",label:"Address",default:"/clasp",props:{placeholder:"/path/to/param"}},{id:"connect",type:"toggle",label:"Connect",default:!0}]},Vw={id:"serial",name:"Serial Port",version:"1.0.0",category:"connectivity",description:"Serial port communication (Web Serial API)",icon:"usb",platforms:["web","electron"],inputs:[{id:"send",type:"string",label:"Send"}],outputs:[{id:"data",type:"string",label:"Raw Data"},{id:"line",type:"string",label:"Last Line"},{id:"value",type:"number",label:"Value"},{id:"connected",type:"boolean",label:"Connected"},{id:"error",type:"string",label:"Error"}],controls:[{id:"baudRate",type:"select",label:"Baud Rate",default:9600,props:{options:[9600,19200,38400,57600,115200]}},{id:"connect",type:"toggle",label:"Connect",default:!1}]},Lw={id:"ble",name:"Bluetooth LE",version:"1.0.0",category:"connectivity",description:"Bluetooth Low Energy communication (Web Bluetooth API)",icon:"bluetooth",platforms:["web","electron"],inputs:[{id:"send",type:"data",label:"Send"}],outputs:[{id:"value",type:"number",label:"Value"},{id:"text",type:"string",label:"Text"},{id:"rawValue",type:"data",label:"Raw Value"},{id:"deviceName",type:"string",label:"Device Name"},{id:"connected",type:"boolean",label:"Connected"},{id:"error",type:"string",label:"Error"}],controls:[{id:"serviceUUID",type:"text",label:"Service UUID",default:"",props:{placeholder:"e.g., heart_rate or 0000180d-..."}},{id:"characteristicUUID",type:"text",label:"Characteristic UUID",default:"",props:{placeholder:"UUID"}},{id:"connect",type:"toggle",label:"Connect",default:!1}]},Fw={id:"clasp-connection",name:"CLASP Connection",version:"1.0.0",category:"connectivity",description:"Manage a named CLASP connection (can be shared across nodes)",icon:"network",color:"#6366f1",platforms:["web","electron"],inputs:[{id:"url",type:"string",label:"URL"},{id:"connect",type:"trigger",label:"Connect"},{id:"disconnect",type:"trigger",label:"Disconnect"}],outputs:[{id:"connected",type:"boolean",label:"Connected"},{id:"status",type:"string",label:"Status"},{id:"error",type:"string",label:"Error"},{id:"session",type:"string",label:"Session ID"},{id:"connectionId",type:"string",label:"Connection ID"}],controls:[{id:"connectionId",type:"text",label:"Connection ID",default:"default",props:{placeholder:"Unique ID to reference this connection"}},{id:"url",type:"text",label:"URL",default:"ws://localhost:7330",props:{placeholder:"ws://host:port"}},{id:"name",type:"text",label:"Client Name",default:"latch"},{id:"token",type:"text",label:"Token",default:"",props:{placeholder:"cpsk_... or empty for open"}},{id:"autoConnect",type:"toggle",label:"Auto Connect",default:!0},{id:"autoReconnect",type:"toggle",label:"Auto Reconnect",default:!0},{id:"reconnectDelay",type:"number",label:"Reconnect Delay (ms)",default:5e3,props:{min:1e3,max:6e4}}],tags:["clasp","protocol","connection","websocket"]},Hw={id:"clasp-subscribe",name:"CLASP Subscribe",version:"1.0.0",category:"connectivity",description:"Subscribe to CLASP address patterns and receive values",icon:"bell",color:"#6366f1",platforms:["web","electron"],inputs:[{id:"connectionId",type:"string",label:"Connection ID"},{id:"pattern",type:"string",label:"Pattern"}],outputs:[{id:"value",type:"any",label:"Value"},{id:"address",type:"string",label:"Address"},{id:"type",type:"string",label:"Signal Type"},{id:"revision",type:"number",label:"Revision"},{id:"subscribed",type:"boolean",label:"Subscribed"},{id:"updated",type:"boolean",label:"Updated"}],controls:[{id:"connectionId",type:"text",label:"Connection ID",default:"default"},{id:"pattern",type:"text",label:"Pattern",default:"/**",props:{placeholder:"/lights/** or /param/*"}},{id:"types",type:"select",label:"Signal Types",default:"all",props:{options:["all","param","event","stream","gesture"]}},{id:"maxRate",type:"number",label:"Max Rate (Hz)",default:0,props:{min:0,max:120,step:1}},{id:"epsilon",type:"number",label:"Change Threshold",default:0,props:{min:0,max:1,step:.01}}],tags:["clasp","subscribe","listen","receive"]},Yw={id:"clasp-set",name:"CLASP Set",version:"1.0.0",category:"connectivity",description:"Set a CLASP parameter value (persistent state)",icon:"edit-3",color:"#6366f1",platforms:["web","electron"],inputs:[{id:"connectionId",type:"string",label:"Connection ID"},{id:"address",type:"string",label:"Address"},{id:"value",type:"any",label:"Value"},{id:"trigger",type:"trigger",label:"Send"}],outputs:[{id:"sent",type:"boolean",label:"Sent"},{id:"error",type:"string",label:"Error"}],controls:[{id:"connectionId",type:"text",label:"Connection ID",default:"default"},{id:"address",type:"text",label:"Address",default:"/param",props:{placeholder:"/lights/strip1/brightness"}}],tags:["clasp","set","parameter","send"]},Xw={id:"clasp-emit",name:"CLASP Emit",version:"1.0.0",category:"connectivity",description:"Emit a CLASP event (one-time trigger)",icon:"zap",color:"#6366f1",platforms:["web","electron"],inputs:[{id:"connectionId",type:"string",label:"Connection ID"},{id:"address",type:"string",label:"Address"},{id:"payload",type:"any",label:"Payload"},{id:"trigger",type:"trigger",label:"Emit"}],outputs:[{id:"sent",type:"boolean",label:"Sent"},{id:"error",type:"string",label:"Error"}],controls:[{id:"connectionId",type:"text",label:"Connection ID",default:"default"},{id:"address",type:"text",label:"Event Address",default:"/event",props:{placeholder:"/cue/fire"}}],tags:["clasp","emit","event","trigger"]},Gw={id:"clasp-get",name:"CLASP Get",version:"1.0.0",category:"connectivity",description:"Get current value of a CLASP parameter",icon:"download",color:"#6366f1",platforms:["web","electron"],inputs:[{id:"connectionId",type:"string",label:"Connection ID"},{id:"address",type:"string",label:"Address"},{id:"trigger",type:"trigger",label:"Get"}],outputs:[{id:"value",type:"any",label:"Value"},{id:"error",type:"string",label:"Error"}],controls:[{id:"connectionId",type:"text",label:"Connection ID",default:"default"},{id:"address",type:"text",label:"Address",default:"/param",props:{placeholder:"/lights/strip1/brightness"}}],tags:["clasp","get","read","fetch"]},Uw={id:"clasp-stream",name:"CLASP Stream",version:"1.0.0",category:"connectivity",description:"Stream high-rate data (continuous updates)",icon:"activity",color:"#6366f1",platforms:["web","electron"],inputs:[{id:"connectionId",type:"string",label:"Connection ID"},{id:"address",type:"string",label:"Address"},{id:"value",type:"any",label:"Value"}],outputs:[{id:"sent",type:"boolean",label:"Sent"}],controls:[{id:"connectionId",type:"text",label:"Connection ID",default:"default"},{id:"address",type:"text",label:"Address",default:"/stream",props:{placeholder:"/sensor/temperature"}},{id:"enabled",type:"toggle",label:"Enabled",default:!0}],tags:["clasp","stream","continuous","high-rate"]},Zw={id:"clasp-bundle",name:"CLASP Bundle",version:"1.0.0",category:"connectivity",description:"Send atomic bundles of operations",icon:"package",color:"#6366f1",platforms:["web","electron"],inputs:[{id:"connectionId",type:"string",label:"Connection ID"},{id:"messages",type:"data",label:"Messages"},{id:"at",type:"number",label:"Schedule At (us)"},{id:"trigger",type:"trigger",label:"Send"}],outputs:[{id:"sent",type:"boolean",label:"Sent"},{id:"error",type:"string",label:"Error"}],controls:[{id:"connectionId",type:"text",label:"Connection ID",default:"default"}],tags:["clasp","bundle","atomic","batch"]},qw=[Pw,Aw,zw,Rw,Bw,Ow,Vw,Lw,Fw,Hw,Yw,Xw,Gw,Uw,Zw],Ww={id:"json-parse",name:"JSON Parse",version:"1.0.0",category:"data",description:"Parse JSON string to object",icon:"braces",platforms:["web","electron"],inputs:[{id:"input",type:"string",label:"JSON String"}],outputs:[{id:"output",type:"data",label:"Object"},{id:"error",type:"string",label:"Error"}],controls:[{id:"path",type:"text",label:"Path",default:"",props:{placeholder:"e.g., data.items[0]"}}]},Kw={id:"json-stringify",name:"JSON Stringify",version:"1.0.0",category:"data",description:"Convert object to JSON string",icon:"braces",platforms:["web","electron"],inputs:[{id:"input",type:"data",label:"Object"}],outputs:[{id:"output",type:"string",label:"JSON String"}],controls:[{id:"pretty",type:"toggle",label:"Pretty Print",default:!1}]},jw={id:"texture-to-data",name:"Texture to Data",version:"1.0.0",category:"data",description:"Convert texture to image data for AI processing",icon:"image-down",platforms:["web","electron"],inputs:[{id:"texture",type:"texture",label:"Texture",required:!0},{id:"trigger",type:"trigger",label:"Capture"}],outputs:[{id:"data",type:"data",label:"Image Data"},{id:"width",type:"number",label:"Width"},{id:"height",type:"number",label:"Height"}],controls:[{id:"format",type:"select",label:"Format",default:"imageData",props:{options:["imageData","base64","blob"]}},{id:"continuous",type:"toggle",label:"Continuous",default:!1}]},Jw=[Ww,Kw,jw],Qw={id:"function",name:"Function",version:"1.0.0",category:"code",description:"Custom JavaScript function with sandboxed execution",icon:"code-2",platforms:["web","electron"],inputs:[{id:"a",type:"any",label:"A"},{id:"b",type:"any",label:"B"},{id:"c",type:"any",label:"C"},{id:"d",type:"any",label:"D"}],outputs:[{id:"result",type:"any",label:"Result"},{id:"error",type:"string",label:"Error"}],controls:[{id:"code",type:"code",label:"Code",default:`// Access inputs via: inputs.a, inputs.b, etc.
// Access time via: time, deltaTime, frame
// Use state: getState('key', default), setState('key', value)
// Return a value or object with multiple outputs

return inputs.a + inputs.b;`}]},ex={id:"expression",name:"Expression",version:"1.0.0",category:"code",description:"Inline math expression evaluator",icon:"calculator",platforms:["web","electron"],inputs:[{id:"a",type:"number",label:"A"},{id:"b",type:"number",label:"B"},{id:"c",type:"number",label:"C"},{id:"d",type:"number",label:"D"}],outputs:[{id:"result",type:"number",label:"Result"},{id:"error",type:"string",label:"Error"}],controls:[{id:"expression",type:"text",label:"Expression",default:"a + b",props:{placeholder:"e.g., sin(t) * a + b"}}]},tx={id:"template",name:"Template",version:"1.0.0",category:"code",description:"String template with variable interpolation",icon:"text-cursor-input",platforms:["web","electron"],inputs:[{id:"a",type:"any",label:"A"},{id:"b",type:"any",label:"B"},{id:"c",type:"any",label:"C"},{id:"d",type:"any",label:"D"}],outputs:[{id:"output",type:"string",label:"Output"}],controls:[{id:"template",type:"text",label:"Template",default:"Value: {{a}}",props:{placeholder:"Use {{varname}} for interpolation"}}]},nx={id:"counter",name:"Counter",version:"1.0.0",category:"code",description:"Increment/decrement counter with min/max",icon:"list-ordered",platforms:["web","electron"],inputs:[{id:"increment",type:"trigger",label:"Increment"},{id:"decrement",type:"trigger",label:"Decrement"},{id:"reset",type:"trigger",label:"Reset"},{id:"set",type:"number",label:"Set Value"}],outputs:[{id:"count",type:"number",label:"Count"},{id:"normalized",type:"number",label:"Normalized"},{id:"atMin",type:"boolean",label:"At Min"},{id:"atMax",type:"boolean",label:"At Max"}],controls:[{id:"min",type:"number",label:"Min",default:0},{id:"max",type:"number",label:"Max",default:100},{id:"step",type:"number",label:"Step",default:1},{id:"wrap",type:"toggle",label:"Wrap Around",default:!1}]},ox={id:"toggle",name:"Toggle",version:"1.0.0",category:"code",description:"Flip-flop toggle with set/reset",icon:"toggle-left",platforms:["web","electron"],inputs:[{id:"trigger",type:"trigger",label:"Toggle"},{id:"set",type:"trigger",label:"Set"},{id:"reset",type:"trigger",label:"Reset"}],outputs:[{id:"value",type:"boolean",label:"Value"},{id:"inverted",type:"boolean",label:"Inverted"},{id:"number",type:"number",label:"Number"}],controls:[{id:"initial",type:"toggle",label:"Initial Value",default:!1}]},ix={id:"sample-hold",name:"Sample & Hold",version:"1.0.0",category:"code",description:"Capture and hold value on trigger",icon:"clipboard",platforms:["web","electron"],inputs:[{id:"input",type:"any",label:"Input"},{id:"trigger",type:"trigger",label:"Sample"}],outputs:[{id:"output",type:"any",label:"Output"}],controls:[]},rx={id:"value-delay",name:"Value Delay",version:"1.0.0",category:"code",description:"Delay value by N frames",icon:"timer",platforms:["web","electron"],inputs:[{id:"input",type:"any",label:"Input"}],outputs:[{id:"output",type:"any",label:"Output"}],controls:[{id:"frames",type:"number",label:"Frames",default:1,props:{min:1,max:300}}]},lx=[Qw,ex,tx,nx,ox,ix,rx],ax={id:"subflow-input",name:"Subflow Input",version:"1.0.0",category:"subflows",description:"Input port for a subflow",icon:"log-in",platforms:["web","electron"],inputs:[],outputs:[{id:"value",type:"any",label:"Value"}],controls:[{id:"portName",type:"text",label:"Port Name",default:"input"},{id:"portType",type:"select",label:"Type",default:"any",props:{options:["any","number","string","boolean","trigger","audio","texture","data"]}},{id:"defaultValue",type:"text",label:"Default",default:""}]},sx={id:"subflow-output",name:"Subflow Output",version:"1.0.0",category:"subflows",description:"Output port for a subflow",icon:"log-out",platforms:["web","electron"],inputs:[{id:"value",type:"any",label:"Value"}],outputs:[],controls:[{id:"portName",type:"text",label:"Port Name",default:"output"},{id:"portType",type:"select",label:"Type",default:"any",props:{options:["any","number","string","boolean","trigger","audio","texture","data"]}}]},ux=[ax,sx],cx={id:"scene-3d",name:"Scene 3D",version:"1.0.0",category:"3d",description:"Container for 3D objects",icon:"box",platforms:["web","electron"],inputs:[{id:"objects",type:"object3d",label:"Objects",multiple:!0}],outputs:[{id:"scene",type:"scene3d",label:"Scene"}],controls:[{id:"backgroundColor",type:"color",label:"Background",default:"#000000"},{id:"showGrid",type:"toggle",label:"Show Grid",default:!1}]},dx={id:"camera-3d",name:"Camera 3D",version:"1.0.0",category:"3d",description:"Perspective or orthographic camera",icon:"camera",platforms:["web","electron"],inputs:[{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"},{id:"targetX",type:"number",label:"Target X"},{id:"targetY",type:"number",label:"Target Y"},{id:"targetZ",type:"number",label:"Target Z"}],outputs:[{id:"camera",type:"camera3d",label:"Camera"}],controls:[{id:"type",type:"select",label:"Type",default:"perspective",props:{options:["perspective","orthographic"]}},{id:"fov",type:"number",label:"FOV",default:50,props:{min:10,max:120}},{id:"near",type:"number",label:"Near",default:.1},{id:"far",type:"number",label:"Far",default:1e3},{id:"orthoSize",type:"number",label:"Ortho Size",default:5},{id:"posX",type:"number",label:"Position X",default:0},{id:"posY",type:"number",label:"Position Y",default:2},{id:"posZ",type:"number",label:"Position Z",default:5},{id:"targetX",type:"number",label:"Target X",default:0},{id:"targetY",type:"number",label:"Target Y",default:0},{id:"targetZ",type:"number",label:"Target Z",default:0}]},px={id:"render-3d",name:"Render 3D",version:"1.0.0",category:"3d",description:"Render 3D scene to texture",icon:"image",platforms:["web","electron"],inputs:[{id:"scene",type:"scene3d",label:"Scene",required:!0},{id:"camera",type:"camera3d",label:"Camera",required:!0}],outputs:[{id:"texture",type:"texture",label:"Texture"},{id:"depth",type:"texture",label:"Depth"}],controls:[{id:"width",type:"number",label:"Width",default:512,props:{min:64,max:2048}},{id:"height",type:"number",label:"Height",default:512,props:{min:64,max:2048}},{id:"includeDepth",type:"toggle",label:"Include Depth",default:!1}]},fx={id:"box-3d",name:"Box 3D",version:"1.0.0",category:"3d",description:"Create a box/cube mesh",icon:"box",platforms:["web","electron"],inputs:[{id:"width",type:"number",label:"Width"},{id:"height",type:"number",label:"Height"},{id:"depth",type:"number",label:"Depth"},{id:"material",type:"material3d",label:"Material"},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"}],outputs:[{id:"object",type:"object3d",label:"Object"}],controls:[{id:"width",type:"number",label:"Width",default:1},{id:"height",type:"number",label:"Height",default:1},{id:"depth",type:"number",label:"Depth",default:1},{id:"color",type:"color",label:"Color",default:"#808080"}]},hx={id:"sphere-3d",name:"Sphere 3D",version:"1.0.0",category:"3d",description:"Create a sphere mesh",icon:"circle",platforms:["web","electron"],inputs:[{id:"radius",type:"number",label:"Radius"},{id:"material",type:"material3d",label:"Material"},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"}],outputs:[{id:"object",type:"object3d",label:"Object"}],controls:[{id:"radius",type:"number",label:"Radius",default:.5},{id:"widthSegments",type:"number",label:"Width Segs",default:32,props:{min:3,max:64}},{id:"heightSegments",type:"number",label:"Height Segs",default:16,props:{min:2,max:32}},{id:"color",type:"color",label:"Color",default:"#808080"}]},gx={id:"plane-3d",name:"Plane 3D",version:"1.0.0",category:"3d",description:"Create a plane mesh",icon:"square",platforms:["web","electron"],inputs:[{id:"width",type:"number",label:"Width"},{id:"height",type:"number",label:"Height"},{id:"material",type:"material3d",label:"Material"},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"}],outputs:[{id:"object",type:"object3d",label:"Object"}],controls:[{id:"width",type:"number",label:"Width",default:1},{id:"height",type:"number",label:"Height",default:1},{id:"color",type:"color",label:"Color",default:"#808080"}]},mx={id:"cylinder-3d",name:"Cylinder 3D",version:"1.0.0",category:"3d",description:"Create a cylinder mesh",icon:"cylinder",platforms:["web","electron"],inputs:[{id:"radiusTop",type:"number",label:"Radius Top"},{id:"radiusBottom",type:"number",label:"Radius Bottom"},{id:"height",type:"number",label:"Height"},{id:"material",type:"material3d",label:"Material"},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"}],outputs:[{id:"object",type:"object3d",label:"Object"}],controls:[{id:"radiusTop",type:"number",label:"Radius Top",default:.5},{id:"radiusBottom",type:"number",label:"Radius Bottom",default:.5},{id:"height",type:"number",label:"Height",default:1},{id:"radialSegments",type:"number",label:"Segments",default:32,props:{min:3,max:64}},{id:"color",type:"color",label:"Color",default:"#808080"}]},yx={id:"torus-3d",name:"Torus 3D",version:"1.0.0",category:"3d",description:"Create a torus (donut) mesh",icon:"circle-dot",platforms:["web","electron"],inputs:[{id:"radius",type:"number",label:"Radius"},{id:"tube",type:"number",label:"Tube"},{id:"material",type:"material3d",label:"Material"},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"}],outputs:[{id:"object",type:"object3d",label:"Object"}],controls:[{id:"radius",type:"number",label:"Radius",default:.5},{id:"tube",type:"number",label:"Tube",default:.2},{id:"radialSegments",type:"number",label:"Radial Segs",default:16,props:{min:2,max:32}},{id:"tubularSegments",type:"number",label:"Tubular Segs",default:100,props:{min:3,max:200}},{id:"color",type:"color",label:"Color",default:"#808080"}]},vx={id:"transform-3d",name:"Transform 3D",version:"1.0.0",category:"3d",description:"Apply position, rotation, and scale",icon:"move-3d",platforms:["web","electron"],inputs:[{id:"object",type:"object3d",label:"Object",required:!0},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"},{id:"rotX",type:"number",label:"Rot X"},{id:"rotY",type:"number",label:"Rot Y"},{id:"rotZ",type:"number",label:"Rot Z"},{id:"scaleX",type:"number",label:"Scale X"},{id:"scaleY",type:"number",label:"Scale Y"},{id:"scaleZ",type:"number",label:"Scale Z"}],outputs:[{id:"object",type:"object3d",label:"Object"},{id:"transform",type:"transform3d",label:"Transform"}],controls:[{id:"posX",type:"number",label:"Position X",default:0},{id:"posY",type:"number",label:"Position Y",default:0},{id:"posZ",type:"number",label:"Position Z",default:0},{id:"rotX",type:"number",label:"Rotation X",default:0},{id:"rotY",type:"number",label:"Rotation Y",default:0},{id:"rotZ",type:"number",label:"Rotation Z",default:0},{id:"scaleX",type:"number",label:"Scale X",default:1},{id:"scaleY",type:"number",label:"Scale Y",default:1},{id:"scaleZ",type:"number",label:"Scale Z",default:1}]},bx={id:"material-3d",name:"Material 3D",version:"1.0.0",category:"3d",description:"Create a PBR material",icon:"palette",platforms:["web","electron"],inputs:[{id:"colorMap",type:"texture",label:"Color Map"},{id:"normalMap",type:"texture",label:"Normal Map"},{id:"roughnessMap",type:"texture",label:"Roughness Map"},{id:"metalnessMap",type:"texture",label:"Metalness Map"},{id:"metalness",type:"number",label:"Metalness"},{id:"roughness",type:"number",label:"Roughness"},{id:"opacity",type:"number",label:"Opacity"}],outputs:[{id:"material",type:"material3d",label:"Material"}],controls:[{id:"type",type:"select",label:"Type",default:"standard",props:{options:["standard","basic","phong","physical"]}},{id:"color",type:"color",label:"Color",default:"#808080"},{id:"metalness",type:"slider",label:"Metalness",default:0,props:{min:0,max:1,step:.01}},{id:"roughness",type:"slider",label:"Roughness",default:.5,props:{min:0,max:1,step:.01}},{id:"opacity",type:"slider",label:"Opacity",default:1,props:{min:0,max:1,step:.01}},{id:"wireframe",type:"toggle",label:"Wireframe",default:!1},{id:"side",type:"select",label:"Side",default:"front",props:{options:["front","back","double"]}},{id:"emissive",type:"color",label:"Emissive",default:"#000000"},{id:"emissiveIntensity",type:"number",label:"Emissive Int.",default:0,props:{min:0,max:10}}]},wx={id:"group-3d",name:"Group 3D",version:"1.0.0",category:"3d",description:"Combine multiple objects into a group",icon:"layers",platforms:["web","electron"],inputs:[{id:"objects",type:"object3d",label:"Objects",multiple:!0},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"}],outputs:[{id:"object",type:"object3d",label:"Object"}],controls:[{id:"posX",type:"number",label:"Position X",default:0},{id:"posY",type:"number",label:"Position Y",default:0},{id:"posZ",type:"number",label:"Position Z",default:0}]},xx={id:"ambient-light-3d",name:"Ambient Light",version:"1.0.0",category:"3d",description:"Uniform lighting from all directions",icon:"sun",platforms:["web","electron"],inputs:[{id:"intensity",type:"number",label:"Intensity"}],outputs:[{id:"light",type:"light3d",label:"Light"},{id:"object",type:"object3d",label:"Object"}],controls:[{id:"color",type:"color",label:"Color",default:"#ffffff"},{id:"intensity",type:"slider",label:"Intensity",default:.5,props:{min:0,max:2,step:.01}}]},_x={id:"directional-light-3d",name:"Directional Light",version:"1.0.0",category:"3d",description:"Light from a specific direction (like sun)",icon:"sun-dim",platforms:["web","electron"],inputs:[{id:"intensity",type:"number",label:"Intensity"},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"}],outputs:[{id:"light",type:"light3d",label:"Light"},{id:"object",type:"object3d",label:"Object"}],controls:[{id:"color",type:"color",label:"Color",default:"#ffffff"},{id:"intensity",type:"slider",label:"Intensity",default:1,props:{min:0,max:5,step:.01}},{id:"posX",type:"number",label:"Position X",default:5},{id:"posY",type:"number",label:"Position Y",default:5},{id:"posZ",type:"number",label:"Position Z",default:5},{id:"castShadow",type:"toggle",label:"Cast Shadow",default:!0}]},Sx={id:"point-light-3d",name:"Point Light",version:"1.0.0",category:"3d",description:"Light that radiates in all directions from a point",icon:"lightbulb",platforms:["web","electron"],inputs:[{id:"intensity",type:"number",label:"Intensity"},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"}],outputs:[{id:"light",type:"light3d",label:"Light"},{id:"object",type:"object3d",label:"Object"}],controls:[{id:"color",type:"color",label:"Color",default:"#ffffff"},{id:"intensity",type:"slider",label:"Intensity",default:1,props:{min:0,max:5,step:.01}},{id:"distance",type:"number",label:"Distance",default:0,props:{min:0}},{id:"decay",type:"number",label:"Decay",default:2,props:{min:0,max:5}},{id:"posX",type:"number",label:"Position X",default:0},{id:"posY",type:"number",label:"Position Y",default:2},{id:"posZ",type:"number",label:"Position Z",default:0},{id:"castShadow",type:"toggle",label:"Cast Shadow",default:!1}]},$x={id:"spot-light-3d",name:"Spot Light",version:"1.0.0",category:"3d",description:"Cone-shaped light like a spotlight",icon:"flashlight",platforms:["web","electron"],inputs:[{id:"intensity",type:"number",label:"Intensity"},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"}],outputs:[{id:"light",type:"light3d",label:"Light"},{id:"object",type:"object3d",label:"Object"}],controls:[{id:"color",type:"color",label:"Color",default:"#ffffff"},{id:"intensity",type:"slider",label:"Intensity",default:1,props:{min:0,max:5,step:.01}},{id:"distance",type:"number",label:"Distance",default:0,props:{min:0}},{id:"angle",type:"slider",label:"Angle",default:30,props:{min:1,max:90,step:1}},{id:"penumbra",type:"slider",label:"Penumbra",default:.1,props:{min:0,max:1,step:.01}},{id:"decay",type:"number",label:"Decay",default:2,props:{min:0,max:5}},{id:"posX",type:"number",label:"Position X",default:0},{id:"posY",type:"number",label:"Position Y",default:5},{id:"posZ",type:"number",label:"Position Z",default:0},{id:"targetX",type:"number",label:"Target X",default:0},{id:"targetY",type:"number",label:"Target Y",default:0},{id:"targetZ",type:"number",label:"Target Z",default:0},{id:"castShadow",type:"toggle",label:"Cast Shadow",default:!0}]},Nx={id:"gltf-loader",name:"GLTF Loader",version:"1.0.0",category:"3d",description:"Load 3D models in GLTF/GLB format",icon:"file-box",platforms:["web","electron"],inputs:[{id:"url",type:"string",label:"URL"},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"}],outputs:[{id:"object",type:"object3d",label:"Object"},{id:"loading",type:"boolean",label:"Loading"},{id:"error",type:"string",label:"Error"}],controls:[{id:"url",type:"text",label:"URL",default:""},{id:"posX",type:"number",label:"Position X",default:0},{id:"posY",type:"number",label:"Position Y",default:0},{id:"posZ",type:"number",label:"Position Z",default:0},{id:"scale",type:"number",label:"Scale",default:1,props:{min:.001,max:100}}]},Ex=[cx,dx,px,fx,hx,gx,mx,yx,vx,bx,wx,xx,_x,Sx,$x,Nx],kx={id:"main-output",name:"Main Output",version:"1.0.0",category:"outputs",description:"Final output viewer with large preview",icon:"monitor-play",platforms:["web","electron"],inputs:[{id:"texture",type:"texture",label:"Texture"}],outputs:[],controls:[]},Cx={class:"preview-area"},Mx=["width","height"],Tx={class:"input-port"},Ix={class:"node-footer"},Dx={class:"status-text"},Px=ve({__name:"MainOutputNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=Xt(),o=We(),i=fe(null),r=fe(null),l=fe(!1),a=Y(()=>{var m,g;const v=((m=t.data)==null?void 0:m.nodeType)??"main-output";return o.getDefinition(v)??((g=t.data)==null?void 0:g.definition)??null}),s=Y(()=>{var v;return a.value?((v=lt[a.value.category])==null?void 0:v.color)??"var(--color-neutral-400)":"var(--color-neutral-400)"}),u=Y(()=>l.value?320:200),c=Y(()=>l.value?200:125);let d=null;function f(){var z;if(!i.value||!r.value)return;const v=n.nodeMetrics.get(t.id);if(!((z=v==null?void 0:v.outputValues)==null?void 0:z._input_texture)){r.value.fillStyle="#1a1a1a",r.value.fillRect(0,0,u.value,c.value),r.value.fillStyle="#666",r.value.font="12px monospace",r.value.textAlign="center",r.value.fillText("No Input",u.value/2,c.value/2);return}const w=Ns().getCanvas();r.value.drawImage(w,0,0,u.value,c.value)}function p(){const v=()=>{n.isRunning&&f(),d=requestAnimationFrame(v)};v()}function $(){d!==null&&(cancelAnimationFrame(d),d=null)}function _(){l.value=!l.value}Ve(()=>{i.value&&(r.value=i.value.getContext("2d"),f(),p())}),Mt(()=>{$()});function C(v){var m;return((m=Ge[v])==null?void 0:m.color)??"var(--color-neutral-400)"}return(v,m)=>(G(),ee("div",{class:Se(["main-output-node",{selected:t.selected,expanded:l.value}])},[E("div",{class:"node-header",style:de({borderLeftColor:s.value})},[m[0]||(m[0]=E("span",{class:"node-title"},"OUTPUT",-1)),E("button",{class:"expand-btn",onClick:he(_,["stop"])},[l.value?(G(),_e(B(Us),{key:0,size:14})):(G(),_e(B(Gs),{key:1,size:14}))])],4),E("div",Cx,[E("canvas",{ref_key:"previewCanvas",ref:i,width:u.value,height:c.value,class:"preview-canvas"},null,8,Mx),E("div",Tx,[pe(B(Me),{id:"texture",type:"target",position:B(ne).Left,style:de({background:C("texture")}),class:"port-handle"},null,8,["position","style"]),m[1]||(m[1]=E("span",{class:"port-label"},"Texture",-1))])]),E("div",Ix,[E("span",Dx,Ne(B(n).isRunning?"Live":"Stopped"),1),m[2]||(m[2]=E("span",{class:"resolution-text"}," 512 x 512 ",-1))])],2))}}),Ax=Ke(Px,[["__scopeId","data-v-469fe9ec"]]),zx=[kx],Rx={class:"handles-column handles-left"},Bx=["onMouseenter"],Ox={class:"label-text"},Vx={class:"handles-column handles-right"},Lx=["onMouseenter"],Fx={class:"label-text"},Hx={class:"node-content"},Yx={key:1,class:"node-body"},Xx={key:0,class:"node-preview"},Gx={key:1,class:"node-controls"},Ux={class:"control-label"},Zx={key:0,class:"control-slider"},qx=["value","min","max","step","onInput"],Wx={class:"slider-value"},Kx=["checked","onChange"],jx={class:"toggle-label"},Jx=["value","onChange"],Qx=["value"],e_=["value","step","onInput"],t_=["value","placeholder","onInput"],n_=["value","onInput"],o_={class:"color-value"},i_=20,r_=ve({__name:"BaseNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=bt(),o=We(),i=fe(!1),r=fe(null),l=fe(!1),a=fe(""),s=fe(null),u=fe(!1);let c=null;const d=Y(()=>{var V;return((V=p.value)==null?void 0:V.outputs.some(X=>X.id==="loading"))??!1});function f(){if(!d.value)return;const X=io().getOutputValue(t.id,"loading");u.value=X===!0}Ve(()=>{d.value&&(c=window.setInterval(f,100))}),Mt(()=>{c&&clearInterval(c)});const p=Y(()=>{var X,F;const V=(X=t.data)==null?void 0:X.nodeType;if(V){const J=o.getDefinition(V);if(J)return J}return((F=t.data)==null?void 0:F.definition)??null}),$=Y(()=>{var V,X;return((V=t.data)==null?void 0:V.label)??((X=t.data)==null?void 0:X.nodeType)??"Node"}),_={debug:Bs,inputs:Ms,outputs:Cs,timing:Vs,math:Os,logic:Fs,audio:qs,video:As,visual:js,shaders:Ws,data:Ls,ai:ks,code:qo,"3d":Rs,connectivity:Es,subflows:Hs,custom:Ks},C=Y(()=>p.value?_[p.value.category]??qo:qo),v=Y(()=>{var V;return p.value?((V=lt[p.value.category])==null?void 0:V.color)??"var(--color-neutral-400)":"var(--color-neutral-400)"}),m=Y(()=>{var V;return((V=p.value)==null?void 0:V.inputs)??[]}),g=Y(()=>{var V;return((V=p.value)==null?void 0:V.outputs)??[]}),w=Y(()=>{var V;return((V=p.value)==null?void 0:V.controls)??[]}),z=Y(()=>p.value?p.value.outputs.some(V=>V.type==="texture"):!1),I=Y(()=>p.value?w.value.some(V=>V.type==="slider"||V.type==="toggle"||V.type==="select"||V.type==="number"||V.type==="text"||V.type==="color"):!1),q=Y(()=>w.value.filter(V=>V.type!=="code")),j=Y(()=>!z.value&&!I.value),te=["slider","trigger","xy-pad","constant","lfo","monitor","oscilloscope"],W=["math","logic","3d","audio"],O=Y(()=>{var X;if(!p.value)return!1;const V=(X=t.data)==null?void 0:X.nodeType;return te.includes(V)||z.value||!I.value?!1:W.includes(p.value.category)}),y=Y(()=>{var X;const V={};for(const F of w.value)V[F.id]=((X=t.data)==null?void 0:X[F.id])??F.default;return V}),U=Y(()=>Math.max(m.value.length,g.value.length,1));function h(V){var X;return((X=Ge[V])==null?void 0:X.color)??"var(--color-neutral-400)"}function T(V,X){return V.includes("norm")||V.includes("Norm")||V.startsWith("0-1")||V.includes("normalized")?"01":V.includes("raw")||V.includes("Raw")?"raw":V==="pass"||V.includes("through")||V==="passthrough"?"pass":{boolean:"bool",trigger:"pulse",any:"any",number:"float",string:"str",texture:"tex",audio:"audio",data:"data",scene3d:"scene",object3d:"obj3d",geometry3d:"geo",material3d:"mat",camera3d:"cam",light3d:"light",transform3d:"xfm",video:"video"}[X]??X}function b(V,X){n.updateNodeData(t.id,{[V]:X})}function R(){i.value=!i.value}function S(){a.value=$.value,l.value=!0,ot(()=>{var V,X;(V=s.value)==null||V.focus(),(X=s.value)==null||X.select()})}function A(){if(l.value){const V=a.value.trim();V&&V!==$.value&&n.updateNodeData(t.id,{label:V}),l.value=!1}}function D(){l.value=!1,a.value=""}function H(V){V.key==="Enter"?(V.preventDefault(),A()):V.key==="Escape"&&(V.preventDefault(),D())}return(V,X)=>(G(),ee("div",{class:Se(["base-node",{selected:t.selected,collapsed:i.value,"simple-node":j.value&&!i.value,"compact-node":O.value&&!i.value,"has-preview":z.value}]),style:de({"--port-count":U.value,"--port-spacing":i_+"px"})},[E("div",Rx,[(G(!0),ee(Pe,null,ft(m.value,F=>(G(),ee("div",{key:F.id,class:"handle-slot",onMouseenter:J=>r.value=`in-${F.id}`,onMouseleave:X[0]||(X[0]=J=>r.value=null)},[pe(B(Me),{id:F.id,type:"target",position:B(ne).Left,style:de({background:h(F.type)}),class:"port-handle"},null,8,["id","position","style"]),E("div",{class:Se(["port-label port-label-left",{visible:r.value===`in-${F.id}`||t.selected}])},[E("span",Ox,Ne(F.label),1),E("span",{class:"label-type",style:de({color:h(F.type)})},Ne(T(F.id,F.type)),5)],2)],40,Bx))),128))]),E("div",Vx,[(G(!0),ee(Pe,null,ft(g.value,F=>(G(),ee("div",{key:F.id,class:"handle-slot",onMouseenter:J=>r.value=`out-${F.id}`,onMouseleave:X[1]||(X[1]=J=>r.value=null)},[pe(B(Me),{id:F.id,type:"source",position:B(ne).Right,style:de({background:h(F.type)}),class:"port-handle"},null,8,["id","position","style"]),E("div",{class:Se(["port-label port-label-right",{visible:r.value===`out-${F.id}`||t.selected}])},[E("span",Fx,Ne(F.label),1),E("span",{class:"label-type",style:de({color:h(F.type)})},Ne(T(F.id,F.type)),5)],2)],40,Lx))),128))]),E("div",Hx,[E("div",{class:"node-header",style:de({borderLeftColor:v.value})},[(G(),_e(dt(C.value),{size:14,class:"node-icon",style:de({color:v.value})},null,8,["style"])),l.value?vn((G(),ee("input",{key:0,ref_key:"labelInputRef",ref:s,"onUpdate:modelValue":X[2]||(X[2]=F=>a.value=F),type:"text",class:"node-title-input",onBlur:A,onKeydown:H,onMousedown:X[3]||(X[3]=he(()=>{},["stop"])),onClick:X[4]||(X[4]=he(()=>{},["stop"]))},null,544)),[[mo,a.value]]):(G(),ee("span",{key:1,class:"node-title",title:"Double-click to edit label",onDblclick:he(S,["stop","prevent"])},Ne($.value),33)),u.value?(G(),_e(B(Xs),{key:2,size:12,class:"loading-indicator"})):ye("",!0),j.value?ye("",!0):(G(),ee("button",{key:3,class:"node-collapse-btn",onClick:he(R,["stop"])},[i.value?(G(),_e(B(_n),{key:1,size:14})):(G(),_e(B(Sn),{key:0,size:14}))]))],4),O.value&&!i.value?(G(),ee("div",{key:0,class:"compact-body",style:de({background:v.value})},[(G(),_e(dt(C.value),{size:32,class:"compact-icon"}))],4)):!j.value&&!i.value?(G(),ee("div",Yx,[z.value?(G(),ee("div",Xx,[pe(Ts,{"node-id":t.id,width:120,height:80,"show-placeholder":!0},null,8,["node-id"])])):ye("",!0),I.value&&q.value.length>0?(G(),ee("div",Gx,[(G(!0),ee(Pe,null,ft(q.value,F=>{var J,P,L,K,Q,oe;return G(),ee("div",{key:F.id,class:"inline-control"},[E("label",Ux,Ne(F.label),1),F.type==="slider"?(G(),ee("div",Zx,[E("input",{type:"range",value:y.value[F.id]??0,min:((J=F.props)==null?void 0:J.min)??0,max:((P=F.props)==null?void 0:P.max)??1,step:((L=F.props)==null?void 0:L.step)??.01,onInput:ie=>b(F.id,parseFloat(ie.target.value)),onMousedown:X[5]||(X[5]=he(()=>{},["stop"]))},null,40,qx),E("span",Wx,Ne((y.value[F.id]??0).toFixed(2)),1)])):F.type==="toggle"?(G(),ee("label",{key:1,class:"control-toggle",onMousedown:X[6]||(X[6]=he(()=>{},["stop"]))},[E("input",{type:"checkbox",checked:y.value[F.id],onChange:ie=>b(F.id,ie.target.checked)},null,40,Kx),X[11]||(X[11]=E("span",{class:"toggle-track"},[E("span",{class:"toggle-thumb"})],-1)),E("span",jx,Ne(y.value[F.id]?"ON":"OFF"),1)],32)):F.type==="select"?(G(),ee("select",{key:2,class:"control-select",value:y.value[F.id],onChange:ie=>b(F.id,ie.target.value),onMousedown:X[7]||(X[7]=he(()=>{},["stop"]))},[(G(!0),ee(Pe,null,ft(((K=F.props)==null?void 0:K.options)??[],ie=>(G(),ee("option",{key:ie,value:ie},Ne(ie),9,Qx))),128))],40,Jx)):F.type==="number"?(G(),ee("input",{key:3,type:"number",class:"control-number",value:y.value[F.id]??0,step:((Q=F.props)==null?void 0:Q.step)??1,onInput:ie=>b(F.id,parseFloat(ie.target.value)||0),onMousedown:X[8]||(X[8]=he(()=>{},["stop"]))},null,40,e_)):F.type==="text"?(G(),ee("input",{key:4,type:"text",class:"control-text",value:y.value[F.id]??"",placeholder:((oe=F.props)==null?void 0:oe.placeholder)??"",onInput:ie=>b(F.id,ie.target.value),onMousedown:X[9]||(X[9]=he(()=>{},["stop"]))},null,40,t_)):F.type==="color"?(G(),ee("div",{key:5,class:"control-color",onMousedown:X[10]||(X[10]=he(()=>{},["stop"]))},[E("input",{type:"color",value:y.value[F.id]??"#808080",onInput:ie=>b(F.id,ie.target.value)},null,40,n_),E("span",o_,Ne(y.value[F.id]),1)],32)):ye("",!0)])}),128))])):ye("",!0)])):ye("",!0)])],6))}}),xl=Ke(r_,[["__scopeId","data-v-dcd6e726"]]),l_={default:Oe(xl),custom:Oe(xl),trigger:Oe(eb),"xy-pad":Oe(bb),textbox:Oe(Cb),monitor:Oe(Bb),oscilloscope:Oe(Kb),graph:Oe(y1),equalizer:Oe(T1),"main-output":Oe(Ax)},_l=[...Mb,...I1,...F1,...q1,...nw,...fw,...Sw,...Dw,...qw,...Jw,...lx,...ux,...Ex,...zx];function a_(){const e=We();for(const t of _l)e.register(t);console.log(`[Registry] Registered ${_l.length} nodes`)}const s_={class:"editor-view"},u_={class:"panel-info"},c_={key:1,class:"empty-state"},d_={key:0,class:"connection-error"},p_=ve({__name:"EditorView",setup(e){const{canUndo:t,canRedo:n,undo:o,redo:i,startBatch:r,endBatch:l}=B0(),a=fe(null);let s=null;const u=fe(null),c=bt(),d=Is(),f=We(),p=Ce(),{onConnect:$,addEdges:_,onNodeDragStop:C,onPaneReady:v,onPaneClick:m,onNodeClick:g,project:w,fitView:z,setViewport:I,getViewport:q,getSelectedEdges:j}=p,te={animated:Oe(D0)};a_();const W=fe(!0);Ve(async()=>{c.activeFlow||!await c.loadSampleFlowIfFirstVisit()&&!c.activeFlow&&c.createFlow("My First Flow"),W.value=!1});function O(P){const L=z0(P,K=>f.getDefinition(K),K=>{var Q,oe;return(oe=(Q=c.activeFlow)==null?void 0:Q.nodes.find(ie=>ie.id===K))==null?void 0:oe.data});return!L.valid&&L.reason&&y(L.reason),L.valid}function y(P){a.value=P,s&&clearTimeout(s),s=setTimeout(()=>{a.value=null},2e3)}function U(P){var oe,ie;const L=(oe=P.data)==null?void 0:oe.nodeType;if(!L)return"var(--color-neutral-400)";const K=f.getDefinition(L);if(!K)return"var(--color-neutral-400)";const Q=K.category;return((ie=lt[Q])==null?void 0:ie.color)??"var(--color-neutral-400)"}$(P=>{_([P]),c.activeFlow&&c.addEdge(P.source,P.sourceHandle??"",P.target,P.targetHandle??"")}),C(({node:P})=>{c.updateNodePosition(P.id,P.position)});function h(P){P.preventDefault(),P.dataTransfer&&(P.dataTransfer.dropEffect="copy")}function T(P){var ge;const L=(ge=P.dataTransfer)==null?void 0:ge.getData("application/clasp-node");if(!L)return;const K=f.getDefinition(L);if(!K)return;const{left:Q,top:oe}=P.currentTarget.getBoundingClientRect(),ie=w({x:P.clientX-Q,y:P.clientY-oe}),ce=r();c.addNode(L,ie,{label:K.name,nodeType:L,definition:K}),l(ce,`Add ${K.name} node`)}xe(()=>d.zoom,P=>{const L=q();I({...L,zoom:P})}),v(()=>{c.activeNodes.length>0&&z({padding:.2})}),xe(()=>p.getSelectedNodes.value,P=>{const L=P.map(K=>K.id);d.selectNodes(L),L.length===1?d.setInspectedNode(L[0]):L.length===0&&d.setInspectedNode(null)}),m(()=>{d.clearSelection(),d.setInspectedNode(null)}),g(({node:P,event:L})=>{L.shiftKey||d.setInspectedNode(P.id)});function b(P){const L=P.filter(K=>K.type==="remove");if(L.length>0){const K=r();for(const Q of L)c.removeNode(Q.id),d.removeFromSelection(Q.id),d.inspectedNode===Q.id&&d.setInspectedNode(null);l(K,`Delete ${L.length} node${L.length>1?"s":""}`)}}function R(P){if(P.target instanceof HTMLInputElement||P.target instanceof HTMLTextAreaElement)return;const K=navigator.platform.toUpperCase().indexOf("MAC")>=0?P.metaKey:P.ctrlKey;if(K&&P.key==="z"&&!P.shiftKey){P.preventDefault(),t.value&&o();return}if(K&&P.key==="z"&&P.shiftKey||K&&P.key==="y"){P.preventDefault(),n.value&&i();return}if(K&&P.key==="a"){P.preventDefault();const Q=c.activeNodes.map(oe=>oe.id);d.selectNodes(Q),c.activeNodes.forEach(oe=>{oe.selected=!0});return}if(K&&P.key==="c"){P.preventDefault(),A();return}if(K&&P.key==="x"){P.preventDefault(),D();return}if(K&&P.key==="v"){P.preventDefault(),H();return}if(K&&P.key==="d"){P.preventDefault(),V();return}if(K&&P.key==="g"){P.preventDefault(),X();return}if(K&&P.key==="e"){P.preventDefault(),F();return}if(K&&P.shiftKey&&P.key==="G"){P.preventDefault(),J();return}if(P.key==="Delete"||P.key==="Backspace"){P.preventDefault(),S();return}}function S(){const P=d.selectedNodes,K=j.value.map(Q=>Q.id);if(!(P.length===0&&K.length===0)){if(P.length>0){c.removeNodes(P);const Q=c.activeNodes.map(oe=>oe.id);d.cleanupExposedControls(Q),d.clearSelection(),d.inspectedNode&&P.includes(d.inspectedNode)&&d.setInspectedNode(null)}K.length>0&&c.removeEdges(K)}}function A(){const P=c.activeNodes.filter(Q=>d.selectedNodes.includes(Q.id));if(P.length===0)return;const L=Math.min(...P.map(Q=>Q.position.x)),K=Math.min(...P.map(Q=>Q.position.y));u.value={nodes:P.map(Q=>{var oe;return{nodeType:(oe=Q.data)==null?void 0:oe.nodeType,position:{x:Q.position.x-L,y:Q.position.y-K},data:{...Q.data}}}),copyOffset:{x:20,y:20}}}function D(){if(A(),u.value&&u.value.nodes.length>0){const P=r(),L=d.selectedNodes.slice();c.removeNodes(L),d.clearSelection(),l(P,`Cut ${L.length} node${L.length>1?"s":""}`)}}function H(){if(!u.value||u.value.nodes.length===0)return;const P=r(),L=[],K=q(),Q=-K.x/K.zoom+100,oe=-K.y/K.zoom+100;for(const ie of u.value.nodes){const ce=f.getDefinition(ie.nodeType);if(!ce)continue;const ge={x:Q+ie.position.x+u.value.copyOffset.x,y:oe+ie.position.y+u.value.copyOffset.y},N=c.addNode(ie.nodeType,ge,{...ie.data,label:ce.name,nodeType:ie.nodeType,definition:ce});N&&L.push(N.id)}u.value.copyOffset.x+=20,u.value.copyOffset.y+=20,d.selectNodes(L),c.activeNodes.forEach(ie=>{ie.selected=L.includes(ie.id)}),l(P,`Paste ${L.length} node${L.length>1?"s":""}`)}function V(){var Q;const P=c.activeNodes.filter(oe=>d.selectedNodes.includes(oe.id));if(P.length===0)return;const L=r(),K=[];for(const oe of P){const ie=(Q=oe.data)==null?void 0:Q.nodeType,ce=f.getDefinition(ie);if(!ce)continue;const ge={x:oe.position.x+20,y:oe.position.y+20},N=c.addNode(ie,ge,{...oe.data,label:ce.name,nodeType:ie,definition:ce});N&&K.push(N.id)}d.selectNodes(K),c.activeNodes.forEach(oe=>{oe.selected=K.includes(oe.id)}),l(L,`Duplicate ${K.length} node${K.length>1?"s":""}`)}function X(){const P=d.selectedNodes;if(P.length<1){y("Select at least one node to create a subflow");return}const L=window.prompt("Enter name for the new subflow:","My Subflow");if(!L)return;const K=r(),Q=c.createSubflowFromSelection(P,L);Q?(d.clearSelection(),d.selectNodes([Q.instanceNodeId]),y(`Created subflow "${L}"`),l(K,`Create subflow "${L}"`)):y("Failed to create subflow")}function F(){var oe;if(d.selectedNodes.length!==1){y("Select a single subflow instance to edit");return}const P=d.selectedNodes[0],L=c.activeNodes.find(ie=>ie.id===P);if(!L||((oe=L.data)==null?void 0:oe.nodeType)!=="subflow"){y("Selected node is not a subflow");return}const K=L.data.subflowId;if(!c.getFlowById(K)){y("Subflow not found");return}c.setActiveFlow(K)}function J(){var oe;if(d.selectedNodes.length!==1){y("Select a single subflow instance to unpack");return}const P=d.selectedNodes[0],L=c.activeNodes.find(ie=>ie.id===P);if(!L||((oe=L.data)==null?void 0:oe.nodeType)!=="subflow"){y("Selected node is not a subflow");return}const K=r(),Q=c.unpackSubflowInstance(P);Q&&Q.length>0?(d.clearSelection(),d.selectNodes(Q),c.activeNodes.forEach(ie=>{ie.selected=Q.includes(ie.id)}),l(K,"Unpack subflow")):y("Failed to unpack subflow")}return Ve(async()=>{window.addEventListener("keydown",R);try{const P=L0();await P.initialize();const L=P.getLoadErrors();L.length>0&&console.warn("Custom node load errors:",L)}catch(P){console.error("Failed to initialize custom node loader:",P)}}),Mt(()=>{window.removeEventListener("keydown",R)}),(P,L)=>(G(),ee("div",s_,[B(c).activeFlow?(G(),_e(B(ig),{key:0,nodes:B(c).activeFlow.nodes,"onUpdate:nodes":L[0]||(L[0]=K=>B(c).activeFlow.nodes=K),edges:B(c).activeFlow.edges,"onUpdate:edges":L[1]||(L[1]=K=>B(c).activeFlow.edges=K),"node-types":B(l_),"edge-types":te,"default-edge-options":{type:"animated"},"is-valid-connection":O,"snap-to-grid":B(d).snapToGrid,"snap-grid":[B(d).gridSize,B(d).gridSize],"connection-line-style":{stroke:"var(--color-primary-400)",strokeWidth:2},"selection-key-code":null,"multi-selection-key-code":null,"delete-key-code":"Delete","edges-updatable":!0,"selectable-edges":!0,"fit-view-on-init":"",class:"flow-canvas",onDragover:h,onDrop:T,onNodesChange:b},{default:Xe(()=>[B(d).showGrid?(G(),_e(B(pg),{key:0,gap:B(d).gridSize,size:1,"pattern-color":"var(--color-neutral-300)"},null,8,["gap"])):ye("",!0),pe(B(Yg),{position:"bottom-right","show-zoom":!0,"show-fit-view":!0,"show-interactive":!1}),B(d).showMinimap?(G(),_e(B(N0),{key:1,position:"bottom-right",style:{marginBottom:"50px"},pannable:!0,zoomable:!0,"node-color":U})):ye("",!0),pe(B(Wi),{position:"top-right",class:"canvas-panel"},{default:Xe(()=>[E("div",u_,[E("span",null,Ne(B(c).activeNodes.length)+" nodes",1),E("span",null,Ne(B(c).activeEdges.length)+" connections",1)])]),_:1})]),_:1},8,["nodes","edges","node-types","snap-to-grid","snap-grid"])):ye("",!0),B(c).activeNodes.length===0?(G(),ee("div",c_,[...L[2]||(L[2]=[E("p",null,"Drag nodes from the sidebar to get started",-1)])])):ye("",!0),pe(Ds,{name:"toast"},{default:Xe(()=>[a.value?(G(),ee("div",d_,Ne(a.value),1)):ye("",!0)]),_:1})]))}}),m_=Ke(p_,[["__scopeId","data-v-556227dc"]]);export{m_ as default};
